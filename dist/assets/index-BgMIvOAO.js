const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-5K1UbLpr.js","assets/webworkerAll-DXy0NZYb.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-CrH4V9S6.js","assets/SharedSystems-D41B4951.js","assets/WebGLRenderer-BL_rBpH0.js"])))=>i.map(i=>d[i]);
var Ex=Object.defineProperty;var Tx=(i,t,e)=>t in i?Ex(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Z=(i,t,e)=>Tx(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();function ha(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var pu={exports:{}},Kr={},mu={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf;function Mx(){if(zf)return St;zf=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function _(C,M,V){this.props=C,this.context=M,this.refs=k,this.updater=V||v}_.prototype.isReactComponent={},_.prototype.setState=function(C,M){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,M,"setState")},_.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function R(){}R.prototype=_.prototype;function O(C,M,V){this.props=C,this.context=M,this.refs=k,this.updater=V||v}var B=O.prototype=new R;B.constructor=O,S(B,_.prototype),B.isPureReactComponent=!0;var D=Array.isArray,G=Object.prototype.hasOwnProperty,H={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function nt(C,M,V){var K,Q={},ot=null,ht=null;if(M!=null)for(K in M.ref!==void 0&&(ht=M.ref),M.key!==void 0&&(ot=""+M.key),M)G.call(M,K)&&!j.hasOwnProperty(K)&&(Q[K]=M[K]);var st=arguments.length-2;if(st===1)Q.children=V;else if(1<st){for(var gt=Array(st),yt=0;yt<st;yt++)gt[yt]=arguments[yt+2];Q.children=gt}if(C&&C.defaultProps)for(K in st=C.defaultProps,st)Q[K]===void 0&&(Q[K]=st[K]);return{$$typeof:i,type:C,key:ot,ref:ht,props:Q,_owner:H.current}}function dt(C,M){return{$$typeof:i,type:C.type,key:M,ref:C.ref,props:C.props,_owner:C._owner}}function J(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function tt(C){var M={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(V){return M[V]})}var _t=/\/+/g;function xt(C,M){return typeof C=="object"&&C!==null&&C.key!=null?tt(""+C.key):M.toString(36)}function Mt(C,M,V,K,Q){var ot=typeof C;(ot==="undefined"||ot==="boolean")&&(C=null);var ht=!1;if(C===null)ht=!0;else switch(ot){case"string":case"number":ht=!0;break;case"object":switch(C.$$typeof){case i:case t:ht=!0}}if(ht)return ht=C,Q=Q(ht),C=K===""?"."+xt(ht,0):K,D(Q)?(V="",C!=null&&(V=C.replace(_t,"$&/")+"/"),Mt(Q,M,V,"",function(yt){return yt})):Q!=null&&(J(Q)&&(Q=dt(Q,V+(!Q.key||ht&&ht.key===Q.key?"":(""+Q.key).replace(_t,"$&/")+"/")+C)),M.push(Q)),1;if(ht=0,K=K===""?".":K+":",D(C))for(var st=0;st<C.length;st++){ot=C[st];var gt=K+xt(ot,st);ht+=Mt(ot,M,V,gt,Q)}else if(gt=w(C),typeof gt=="function")for(C=gt.call(C),st=0;!(ot=C.next()).done;)ot=ot.value,gt=K+xt(ot,st++),ht+=Mt(ot,M,V,gt,Q);else if(ot==="object")throw M=String(C),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ht}function qt(C,M,V){if(C==null)return C;var K=[],Q=0;return Mt(C,K,"","",function(ot){return M.call(V,ot,Q++)}),K}function A(C){if(C._status===-1){var M=C._result;M=M(),M.then(function(V){(C._status===0||C._status===-1)&&(C._status=1,C._result=V)},function(V){(C._status===0||C._status===-1)&&(C._status=2,C._result=V)}),C._status===-1&&(C._status=0,C._result=M)}if(C._status===1)return C._result.default;throw C._result}var E={current:null},b={transition:null},F={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:b,ReactCurrentOwner:H};function L(){throw Error("act(...) is not supported in production builds of React.")}return St.Children={map:qt,forEach:function(C,M,V){qt(C,function(){M.apply(this,arguments)},V)},count:function(C){var M=0;return qt(C,function(){M++}),M},toArray:function(C){return qt(C,function(M){return M})||[]},only:function(C){if(!J(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},St.Component=_,St.Fragment=e,St.Profiler=o,St.PureComponent=O,St.StrictMode=r,St.Suspense=d,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,St.act=L,St.cloneElement=function(C,M,V){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var K=S({},C.props),Q=C.key,ot=C.ref,ht=C._owner;if(M!=null){if(M.ref!==void 0&&(ot=M.ref,ht=H.current),M.key!==void 0&&(Q=""+M.key),C.type&&C.type.defaultProps)var st=C.type.defaultProps;for(gt in M)G.call(M,gt)&&!j.hasOwnProperty(gt)&&(K[gt]=M[gt]===void 0&&st!==void 0?st[gt]:M[gt])}var gt=arguments.length-2;if(gt===1)K.children=V;else if(1<gt){st=Array(gt);for(var yt=0;yt<gt;yt++)st[yt]=arguments[yt+2];K.children=st}return{$$typeof:i,type:C.type,key:Q,ref:ot,props:K,_owner:ht}},St.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:a,_context:C},C.Consumer=C},St.createElement=nt,St.createFactory=function(C){var M=nt.bind(null,C);return M.type=C,M},St.createRef=function(){return{current:null}},St.forwardRef=function(C){return{$$typeof:c,render:C}},St.isValidElement=J,St.lazy=function(C){return{$$typeof:m,_payload:{_status:-1,_result:C},_init:A}},St.memo=function(C,M){return{$$typeof:p,type:C,compare:M===void 0?null:M}},St.startTransition=function(C){var M=b.transition;b.transition={};try{C()}finally{b.transition=M}},St.unstable_act=L,St.useCallback=function(C,M){return E.current.useCallback(C,M)},St.useContext=function(C){return E.current.useContext(C)},St.useDebugValue=function(){},St.useDeferredValue=function(C){return E.current.useDeferredValue(C)},St.useEffect=function(C,M){return E.current.useEffect(C,M)},St.useId=function(){return E.current.useId()},St.useImperativeHandle=function(C,M,V){return E.current.useImperativeHandle(C,M,V)},St.useInsertionEffect=function(C,M){return E.current.useInsertionEffect(C,M)},St.useLayoutEffect=function(C,M){return E.current.useLayoutEffect(C,M)},St.useMemo=function(C,M){return E.current.useMemo(C,M)},St.useReducer=function(C,M,V){return E.current.useReducer(C,M,V)},St.useRef=function(C){return E.current.useRef(C)},St.useState=function(C){return E.current.useState(C)},St.useSyncExternalStore=function(C,M,V){return E.current.useSyncExternalStore(C,M,V)},St.useTransition=function(){return E.current.useTransition()},St.version="18.3.1",St}var Nf;function Ah(){return Nf||(Nf=1,mu.exports=Mx()),mu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function Rx(){if(Df)return Kr;Df=1;var i=Ah(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var m,y={},w=null,v=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(v=d.ref);for(m in d)r.call(d,m)&&!a.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:t,type:c,key:w,ref:v,props:y,_owner:o.current}}return Kr.Fragment=e,Kr.jsx=u,Kr.jsxs=u,Kr}var Wf;function Ix(){return Wf||(Wf=1,pu.exports=Rx()),pu.exports}var Ft=Ix(),Do={},gu={exports:{}},Pe={},yu={exports:{}},xu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function Fx(){return Uf||(Uf=1,function(i){function t(b,F){var L=b.length;b.push(F);t:for(;0<L;){var C=L-1>>>1,M=b[C];if(0<o(M,F))b[C]=F,b[L]=M,L=C;else break t}}function e(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var F=b[0],L=b.pop();if(L!==F){b[0]=L;t:for(var C=0,M=b.length,V=M>>>1;C<V;){var K=2*(C+1)-1,Q=b[K],ot=K+1,ht=b[ot];if(0>o(Q,L))ot<M&&0>o(ht,Q)?(b[C]=ht,b[ot]=L,C=ot):(b[C]=Q,b[K]=L,C=K);else if(ot<M&&0>o(ht,L))b[C]=ht,b[ot]=L,C=ot;else break t}}return F}function o(b,F){var L=b.sortIndex-F.sortIndex;return L!==0?L:b.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();i.unstable_now=function(){return u.now()-c}}var d=[],p=[],m=1,y=null,w=3,v=!1,S=!1,k=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(b){for(var F=e(p);F!==null;){if(F.callback===null)r(p);else if(F.startTime<=b)r(p),F.sortIndex=F.expirationTime,t(d,F);else break;F=e(p)}}function D(b){if(k=!1,B(b),!S)if(e(d)!==null)S=!0,A(G);else{var F=e(p);F!==null&&E(D,F.startTime-b)}}function G(b,F){S=!1,k&&(k=!1,R(nt),nt=-1),v=!0;var L=w;try{for(B(F),y=e(d);y!==null&&(!(y.expirationTime>F)||b&&!tt());){var C=y.callback;if(typeof C=="function"){y.callback=null,w=y.priorityLevel;var M=C(y.expirationTime<=F);F=i.unstable_now(),typeof M=="function"?y.callback=M:y===e(d)&&r(d),B(F)}else r(d);y=e(d)}if(y!==null)var V=!0;else{var K=e(p);K!==null&&E(D,K.startTime-F),V=!1}return V}finally{y=null,w=L,v=!1}}var H=!1,j=null,nt=-1,dt=5,J=-1;function tt(){return!(i.unstable_now()-J<dt)}function _t(){if(j!==null){var b=i.unstable_now();J=b;var F=!0;try{F=j(!0,b)}finally{F?xt():(H=!1,j=null)}}else H=!1}var xt;if(typeof O=="function")xt=function(){O(_t)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,qt=Mt.port2;Mt.port1.onmessage=_t,xt=function(){qt.postMessage(null)}}else xt=function(){_(_t,0)};function A(b){j=b,H||(H=!0,xt())}function E(b,F){nt=_(function(){b(i.unstable_now())},F)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(b){b.callback=null},i.unstable_continueExecution=function(){S||v||(S=!0,A(G))},i.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dt=0<b?Math.floor(1e3/b):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(b){switch(w){case 1:case 2:case 3:var F=3;break;default:F=w}var L=w;w=F;try{return b()}finally{w=L}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(b,F){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var L=w;w=b;try{return F()}finally{w=L}},i.unstable_scheduleCallback=function(b,F,L){var C=i.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?C+L:C):L=C,b){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=L+M,b={id:m++,callback:F,priorityLevel:b,startTime:L,expirationTime:M,sortIndex:-1},L>C?(b.sortIndex=L,t(p,b),e(d)===null&&b===e(p)&&(k?(R(nt),nt=-1):k=!0,E(D,L-C))):(b.sortIndex=M,t(d,b),S||v||(S=!0,A(G))),b},i.unstable_shouldYield=tt,i.unstable_wrapCallback=function(b){var F=w;return function(){var L=w;w=F;try{return b.apply(this,arguments)}finally{w=L}}}}(xu)),xu}var Hf;function Lx(){return Hf||(Hf=1,yu.exports=Fx()),yu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function Ox(){if(jf)return Pe;jf=1;var i=Ah(),t=Lx();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(n){return d.call(y,n)?!0:d.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function v(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,l,h){if(s===null||typeof s>"u"||v(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(n,s,l,h,f,g,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=x}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new k(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];_[s]=new k(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new k(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new k(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new k(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new k(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new k(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new k(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new k(n,5,!1,n.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function O(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(R,O);_[s]=new k(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(R,O);_[s]=new k(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(R,O);_[s]=new k(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new k(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new k(n,1,!1,n.toLowerCase(),null,!0,!0)});function B(n,s,l,h){var f=_.hasOwnProperty(s)?_[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,f,h)&&(l=null),h||f===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var D=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),H=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),dt=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),tt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),qt=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),b=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=b&&n[b]||n["@@iterator"],typeof n=="function"?n:null)}var L=Object.assign,C;function M(n){if(C===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);C=s&&s[1]||""}return`
`+C+n}var V=!1;function K(n,s){if(!n||V)return"";V=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var h=W}Reflect.construct(n,[],s)}else{try{s.call()}catch(W){h=W}n.call(s.prototype)}else{try{throw Error()}catch(W){h=W}n()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),g=h.stack.split(`
`),x=f.length-1,P=g.length-1;1<=x&&0<=P&&f[x]!==g[P];)P--;for(;1<=x&&0<=P;x--,P--)if(f[x]!==g[P]){if(x!==1||P!==1)do if(x--,P--,0>P||f[x]!==g[P]){var T=`
`+f[x].replace(" at new "," at ");return n.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",n.displayName)),T}while(1<=x&&0<=P);break}}}finally{V=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?M(n):""}function Q(n){switch(n.tag){case 5:return M(n.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return n=K(n.type,!1),n;case 11:return n=K(n.type.render,!1),n;case 1:return n=K(n.type,!0),n;default:return""}}function ot(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case H:return"Portal";case dt:return"Profiler";case nt:return"StrictMode";case xt:return"Suspense";case Mt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tt:return(n.displayName||"Context")+".Consumer";case J:return(n._context.displayName||"Context")+".Provider";case _t:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case qt:return s=n.displayName||null,s!==null?s:ot(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return ot(n(s))}catch{}}return null}function ht(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ot(s);case 8:return s===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function st(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function gt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yt(n){var s=gt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){h=""+x,g.call(this,x)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function we(n){n._valueTracker||(n._valueTracker=yt(n))}function ue(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=gt(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function me(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function _e(n,s){var l=s.checked;return L({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function wt(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=st(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ct(n,s){s=s.checked,s!=null&&B(n,"checked",s,!1)}function Ci(n,s){Ct(n,s);var l=st(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ts(n,s.type,l):s.hasOwnProperty("defaultValue")&&Ts(n,s.type,st(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Es(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Ts(n,s,l){(s!=="number"||me(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var cr=Array.isArray;function Ai(n,s,l,h){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&h&&(n[l].defaultSelected=!0)}else{for(l=""+st(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Aa(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return L({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $h(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(cr(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:st(l)}}function Yh(n,s){var l=st(s.value),h=st(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function Xh(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function qh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ka(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?qh(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ms,Kh=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ms.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function dr(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fy=["Webkit","ms","Moz","O"];Object.keys(fr).forEach(function(n){Fy.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),fr[s]=fr[n]})});function Qh(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||fr.hasOwnProperty(n)&&fr[n]?(""+s).trim():s+"px"}function Zh(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Qh(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,f):n[l]=f}}var Ly=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ba(n,s){if(s){if(Ly[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Pa(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ea=null;function Ta(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ma=null,ki=null,bi=null;function Jh(n){if(n=Or(n)){if(typeof Ma!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Js(s),Ma(n.stateNode,n.type,s))}}function tc(n){ki?bi?bi.push(n):bi=[n]:ki=n}function ec(){if(ki){var n=ki,s=bi;if(bi=ki=null,Jh(n),s)for(n=0;n<s.length;n++)Jh(s[n])}}function nc(n,s){return n(s)}function ic(){}var Ra=!1;function rc(n,s,l){if(Ra)return n(s,l);Ra=!0;try{return nc(n,s,l)}finally{Ra=!1,(ki!==null||bi!==null)&&(ic(),ec())}}function pr(n,s){var l=n.stateNode;if(l===null)return null;var h=Js(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Ia=!1;if(c)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{Ia=!1}function Oy(n,s,l,h,f,g,x,P,T){var W=Array.prototype.slice.call(arguments,3);try{s.apply(l,W)}catch(Y){this.onError(Y)}}var gr=!1,Rs=null,Is=!1,Fa=null,By={onError:function(n){gr=!0,Rs=n}};function zy(n,s,l,h,f,g,x,P,T){gr=!1,Rs=null,Oy.apply(By,arguments)}function Ny(n,s,l,h,f,g,x,P,T){if(zy.apply(this,arguments),gr){if(gr){var W=Rs;gr=!1,Rs=null}else throw Error(e(198));Is||(Is=!0,Fa=W)}}function ti(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function sc(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function oc(n){if(ti(n)!==n)throw Error(e(188))}function Dy(n){var s=n.alternate;if(!s){if(s=ti(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return oc(f),n;if(g===h)return oc(f),s;g=g.sibling}throw Error(e(188))}if(l.return!==h.return)l=f,h=g;else{for(var x=!1,P=f.child;P;){if(P===l){x=!0,l=f,h=g;break}if(P===h){x=!0,h=f,l=g;break}P=P.sibling}if(!x){for(P=g.child;P;){if(P===l){x=!0,l=g,h=f;break}if(P===h){x=!0,h=g,l=f;break}P=P.sibling}if(!x)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function ac(n){return n=Dy(n),n!==null?lc(n):null}function lc(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=lc(n);if(s!==null)return s;n=n.sibling}return null}var uc=t.unstable_scheduleCallback,hc=t.unstable_cancelCallback,Wy=t.unstable_shouldYield,Uy=t.unstable_requestPaint,$t=t.unstable_now,Hy=t.unstable_getCurrentPriorityLevel,La=t.unstable_ImmediatePriority,cc=t.unstable_UserBlockingPriority,Fs=t.unstable_NormalPriority,jy=t.unstable_LowPriority,dc=t.unstable_IdlePriority,Ls=null,on=null;function Gy(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ls,n,void 0,(n.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:Yy,Vy=Math.log,$y=Math.LN2;function Yy(n){return n>>>=0,n===0?32:31-(Vy(n)/$y|0)|0}var Os=64,Bs=4194304;function yr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zs(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,x=l&268435455;if(x!==0){var P=x&~f;P!==0?h=yr(P):(g&=x,g!==0&&(h=yr(g)))}else x=l&~f,x!==0?h=yr(x):g!==0&&(h=yr(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(h&4&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-Ye(s),f=1<<l,h|=n[l],s&=~f;return h}function Xy(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qy(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var x=31-Ye(g),P=1<<x,T=f[x];T===-1?(!(P&l)||P&h)&&(f[x]=Xy(P,s)):T<=s&&(n.expiredLanes|=P),g&=~P}}function Oa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function fc(){var n=Os;return Os<<=1,!(Os&4194240)&&(Os=64),n}function Ba(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function xr(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Ye(s),n[s]=l}function Ky(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-Ye(l),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,l&=~g}}function za(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-Ye(l),f=1<<h;f&s|n[h]&s&&(n[h]|=s),l&=~f}}var Rt=0;function pc(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var mc,Na,gc,yc,xc,Da=!1,Ns=[],In=null,Fn=null,Ln=null,vr=new Map,wr=new Map,On=[],Qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vc(n,s){switch(n){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":vr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wr.delete(s.pointerId)}}function _r(n,s,l,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Or(s),s!==null&&Na(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Zy(n,s,l,h,f){switch(s){case"focusin":return In=_r(In,n,s,l,h,f),!0;case"dragenter":return Fn=_r(Fn,n,s,l,h,f),!0;case"mouseover":return Ln=_r(Ln,n,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return vr.set(g,_r(vr.get(g)||null,n,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,wr.set(g,_r(wr.get(g)||null,n,s,l,h,f)),!0}return!1}function wc(n){var s=ei(n.target);if(s!==null){var l=ti(s);if(l!==null){if(s=l.tag,s===13){if(s=sc(l),s!==null){n.blockedOn=s,xc(n.priority,function(){gc(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ds(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Ua(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Ea=h,l.target.dispatchEvent(h),Ea=null}else return s=Or(l),s!==null&&Na(s),n.blockedOn=l,!1;s.shift()}return!0}function _c(n,s,l){Ds(n)&&l.delete(s)}function Jy(){Da=!1,In!==null&&Ds(In)&&(In=null),Fn!==null&&Ds(Fn)&&(Fn=null),Ln!==null&&Ds(Ln)&&(Ln=null),vr.forEach(_c),wr.forEach(_c)}function Sr(n,s){n.blockedOn===s&&(n.blockedOn=null,Da||(Da=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jy)))}function Cr(n){function s(f){return Sr(f,n)}if(0<Ns.length){Sr(Ns[0],n);for(var l=1;l<Ns.length;l++){var h=Ns[l];h.blockedOn===n&&(h.blockedOn=null)}}for(In!==null&&Sr(In,n),Fn!==null&&Sr(Fn,n),Ln!==null&&Sr(Ln,n),vr.forEach(s),wr.forEach(s),l=0;l<On.length;l++)h=On[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<On.length&&(l=On[0],l.blockedOn===null);)wc(l),l.blockedOn===null&&On.shift()}var Pi=D.ReactCurrentBatchConfig,Ws=!0;function t0(n,s,l,h){var f=Rt,g=Pi.transition;Pi.transition=null;try{Rt=1,Wa(n,s,l,h)}finally{Rt=f,Pi.transition=g}}function e0(n,s,l,h){var f=Rt,g=Pi.transition;Pi.transition=null;try{Rt=4,Wa(n,s,l,h)}finally{Rt=f,Pi.transition=g}}function Wa(n,s,l,h){if(Ws){var f=Ua(n,s,l,h);if(f===null)rl(n,s,h,Us,l),vc(n,h);else if(Zy(f,n,s,l,h))h.stopPropagation();else if(vc(n,h),s&4&&-1<Qy.indexOf(n)){for(;f!==null;){var g=Or(f);if(g!==null&&mc(g),g=Ua(n,s,l,h),g===null&&rl(n,s,h,Us,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else rl(n,s,h,null,l)}}var Us=null;function Ua(n,s,l,h){if(Us=null,n=Ta(h),n=ei(n),n!==null)if(s=ti(n),s===null)n=null;else if(l=s.tag,l===13){if(n=sc(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Us=n,null}function Sc(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hy()){case La:return 1;case cc:return 4;case Fs:case jy:return 16;case dc:return 536870912;default:return 16}default:return 16}}var Bn=null,Ha=null,Hs=null;function Cc(){if(Hs)return Hs;var n,s=Ha,l=s.length,h,f="value"in Bn?Bn.value:Bn.textContent,g=f.length;for(n=0;n<l&&s[n]===f[n];n++);var x=l-n;for(h=1;h<=x&&s[l-h]===f[g-h];h++);return Hs=f.slice(n,1<h?1-h:void 0)}function js(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gs(){return!0}function Ac(){return!1}function Re(n){function s(l,h,f,g,x){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(l=n[P],this[P]=l?l(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gs:Ac,this.isPropagationStopped=Ac,this}return L(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),s}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Re(Ei),Ar=L({},Ei,{view:0,detail:0}),n0=Re(Ar),Ga,Va,kr,Vs=L({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==kr&&(kr&&n.type==="mousemove"?(Ga=n.screenX-kr.screenX,Va=n.screenY-kr.screenY):Va=Ga=0,kr=n),Ga)},movementY:function(n){return"movementY"in n?n.movementY:Va}}),kc=Re(Vs),i0=L({},Vs,{dataTransfer:0}),r0=Re(i0),s0=L({},Ar,{relatedTarget:0}),$a=Re(s0),o0=L({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),a0=Re(o0),l0=L({},Ei,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u0=Re(l0),h0=L({},Ei,{data:0}),bc=Re(h0),c0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=f0[n])?!!s[n]:!1}function Ya(){return p0}var m0=L({},Ar,{key:function(n){if(n.key){var s=c0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=js(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?d0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(n){return n.type==="keypress"?js(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?js(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g0=Re(m0),y0=L({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=Re(y0),x0=L({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),v0=Re(x0),w0=L({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=Re(w0),S0=L({},Vs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),C0=Re(S0),A0=[9,13,27,32],Xa=c&&"CompositionEvent"in window,br=null;c&&"documentMode"in document&&(br=document.documentMode);var k0=c&&"TextEvent"in window&&!br,Ec=c&&(!Xa||br&&8<br&&11>=br),Tc=" ",Mc=!1;function Rc(n,s){switch(n){case"keyup":return A0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ic(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ti=!1;function b0(n,s){switch(n){case"compositionend":return Ic(s);case"keypress":return s.which!==32?null:(Mc=!0,Tc);case"textInput":return n=s.data,n===Tc&&Mc?null:n;default:return null}}function P0(n,s){if(Ti)return n==="compositionend"||!Xa&&Rc(n,s)?(n=Cc(),Hs=Ha=Bn=null,Ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ec&&s.locale!=="ko"?null:s.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!E0[n.type]:s==="textarea"}function Lc(n,s,l,h){tc(h),s=Ks(s,"onChange"),0<s.length&&(l=new ja("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var Pr=null,Er=null;function T0(n){Zc(n,0)}function $s(n){var s=Li(n);if(ue(s))return n}function M0(n,s){if(n==="change")return s}var Oc=!1;if(c){var qa;if(c){var Ka="oninput"in document;if(!Ka){var Bc=document.createElement("div");Bc.setAttribute("oninput","return;"),Ka=typeof Bc.oninput=="function"}qa=Ka}else qa=!1;Oc=qa&&(!document.documentMode||9<document.documentMode)}function zc(){Pr&&(Pr.detachEvent("onpropertychange",Nc),Er=Pr=null)}function Nc(n){if(n.propertyName==="value"&&$s(Er)){var s=[];Lc(s,Er,n,Ta(n)),rc(T0,s)}}function R0(n,s,l){n==="focusin"?(zc(),Pr=s,Er=l,Pr.attachEvent("onpropertychange",Nc)):n==="focusout"&&zc()}function I0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $s(Er)}function F0(n,s){if(n==="click")return $s(s)}function L0(n,s){if(n==="input"||n==="change")return $s(s)}function O0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Xe=typeof Object.is=="function"?Object.is:O0;function Tr(n,s){if(Xe(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!d.call(s,f)||!Xe(n[f],s[f]))return!1}return!0}function Dc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wc(n,s){var l=Dc(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Dc(l)}}function Uc(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Uc(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Hc(){for(var n=window,s=me();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=me(n.document)}return s}function Qa(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function B0(n){var s=Hc(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&Uc(l.ownerDocument.documentElement,l)){if(h!==null&&Qa(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=Wc(l,g);var x=Wc(l,h);f&&x&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var z0=c&&"documentMode"in document&&11>=document.documentMode,Mi=null,Za=null,Mr=null,Ja=!1;function jc(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ja||Mi==null||Mi!==me(h)||(h=Mi,"selectionStart"in h&&Qa(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Mr&&Tr(Mr,h)||(Mr=h,h=Ks(Za,"onSelect"),0<h.length&&(s=new ja("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=Mi)))}function Ys(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Ri={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},tl={},Gc={};c&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function Xs(n){if(tl[n])return tl[n];if(!Ri[n])return n;var s=Ri[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Gc)return tl[n]=s[l];return n}var Vc=Xs("animationend"),$c=Xs("animationiteration"),Yc=Xs("animationstart"),Xc=Xs("transitionend"),qc=new Map,Kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(n,s){qc.set(n,s),a(s,[n])}for(var el=0;el<Kc.length;el++){var nl=Kc[el],N0=nl.toLowerCase(),D0=nl[0].toUpperCase()+nl.slice(1);zn(N0,"on"+D0)}zn(Vc,"onAnimationEnd"),zn($c,"onAnimationIteration"),zn(Yc,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(Xc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Qc(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,Ny(h,s,void 0,n),n.currentTarget=null}function Zc(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],f=h.event;h=h.listeners;t:{var g=void 0;if(s)for(var x=h.length-1;0<=x;x--){var P=h[x],T=P.instance,W=P.currentTarget;if(P=P.listener,T!==g&&f.isPropagationStopped())break t;Qc(f,P,W),g=T}else for(x=0;x<h.length;x++){if(P=h[x],T=P.instance,W=P.currentTarget,P=P.listener,T!==g&&f.isPropagationStopped())break t;Qc(f,P,W),g=T}}}if(Is)throw n=Fa,Is=!1,Fa=null,n}function Ot(n,s){var l=s[hl];l===void 0&&(l=s[hl]=new Set);var h=n+"__bubble";l.has(h)||(Jc(s,n,2,!1),l.add(h))}function il(n,s,l){var h=0;s&&(h|=4),Jc(l,n,h,s)}var qs="_reactListening"+Math.random().toString(36).slice(2);function Ir(n){if(!n[qs]){n[qs]=!0,r.forEach(function(l){l!=="selectionchange"&&(W0.has(l)||il(l,!1,n),il(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[qs]||(s[qs]=!0,il("selectionchange",!1,s))}}function Jc(n,s,l,h){switch(Sc(s)){case 1:var f=t0;break;case 4:f=e0;break;default:f=Wa}l=f.bind(null,s,l,n),f=void 0,!Ia||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function rl(n,s,l,h,f){var g=h;if(!(s&1)&&!(s&2)&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var P=h.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(x===4)for(x=h.return;x!==null;){var T=x.tag;if((T===3||T===4)&&(T=x.stateNode.containerInfo,T===f||T.nodeType===8&&T.parentNode===f))return;x=x.return}for(;P!==null;){if(x=ei(P),x===null)return;if(T=x.tag,T===5||T===6){h=g=x;continue t}P=P.parentNode}}h=h.return}rc(function(){var W=g,Y=Ta(l),X=[];t:{var $=qc.get(n);if($!==void 0){var et=ja,rt=n;switch(n){case"keypress":if(js(l)===0)break t;case"keydown":case"keyup":et=g0;break;case"focusin":rt="focus",et=$a;break;case"focusout":rt="blur",et=$a;break;case"beforeblur":case"afterblur":et=$a;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=r0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=v0;break;case Vc:case $c:case Yc:et=a0;break;case Xc:et=_0;break;case"scroll":et=n0;break;case"wheel":et=C0;break;case"copy":case"cut":case"paste":et=u0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Pc}var at=(s&4)!==0,Yt=!at&&n==="scroll",z=at?$!==null?$+"Capture":null:$;at=[];for(var I=W,N;I!==null;){N=I;var q=N.stateNode;if(N.tag===5&&q!==null&&(N=q,z!==null&&(q=pr(I,z),q!=null&&at.push(Fr(I,q,N)))),Yt)break;I=I.return}0<at.length&&($=new et($,rt,null,l,Y),X.push({event:$,listeners:at}))}}if(!(s&7)){t:{if($=n==="mouseover"||n==="pointerover",et=n==="mouseout"||n==="pointerout",$&&l!==Ea&&(rt=l.relatedTarget||l.fromElement)&&(ei(rt)||rt[wn]))break t;if((et||$)&&($=Y.window===Y?Y:($=Y.ownerDocument)?$.defaultView||$.parentWindow:window,et?(rt=l.relatedTarget||l.toElement,et=W,rt=rt?ei(rt):null,rt!==null&&(Yt=ti(rt),rt!==Yt||rt.tag!==5&&rt.tag!==6)&&(rt=null)):(et=null,rt=W),et!==rt)){if(at=kc,q="onMouseLeave",z="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(at=Pc,q="onPointerLeave",z="onPointerEnter",I="pointer"),Yt=et==null?$:Li(et),N=rt==null?$:Li(rt),$=new at(q,I+"leave",et,l,Y),$.target=Yt,$.relatedTarget=N,q=null,ei(Y)===W&&(at=new at(z,I+"enter",rt,l,Y),at.target=N,at.relatedTarget=Yt,q=at),Yt=q,et&&rt)e:{for(at=et,z=rt,I=0,N=at;N;N=Ii(N))I++;for(N=0,q=z;q;q=Ii(q))N++;for(;0<I-N;)at=Ii(at),I--;for(;0<N-I;)z=Ii(z),N--;for(;I--;){if(at===z||z!==null&&at===z.alternate)break e;at=Ii(at),z=Ii(z)}at=null}else at=null;et!==null&&td(X,$,et,at,!1),rt!==null&&Yt!==null&&td(X,Yt,rt,at,!0)}}t:{if($=W?Li(W):window,et=$.nodeName&&$.nodeName.toLowerCase(),et==="select"||et==="input"&&$.type==="file")var lt=M0;else if(Fc($))if(Oc)lt=L0;else{lt=I0;var ft=R0}else(et=$.nodeName)&&et.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(lt=F0);if(lt&&(lt=lt(n,W))){Lc(X,lt,l,Y);break t}ft&&ft(n,$,W),n==="focusout"&&(ft=$._wrapperState)&&ft.controlled&&$.type==="number"&&Ts($,"number",$.value)}switch(ft=W?Li(W):window,n){case"focusin":(Fc(ft)||ft.contentEditable==="true")&&(Mi=ft,Za=W,Mr=null);break;case"focusout":Mr=Za=Mi=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,jc(X,l,Y);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":jc(X,l,Y)}var pt;if(Xa)t:{switch(n){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Ti?Rc(n,l)&&(mt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(mt="onCompositionStart");mt&&(Ec&&l.locale!=="ko"&&(Ti||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Ti&&(pt=Cc()):(Bn=Y,Ha="value"in Bn?Bn.value:Bn.textContent,Ti=!0)),ft=Ks(W,mt),0<ft.length&&(mt=new bc(mt,n,null,l,Y),X.push({event:mt,listeners:ft}),pt?mt.data=pt:(pt=Ic(l),pt!==null&&(mt.data=pt)))),(pt=k0?b0(n,l):P0(n,l))&&(W=Ks(W,"onBeforeInput"),0<W.length&&(Y=new bc("onBeforeInput","beforeinput",null,l,Y),X.push({event:Y,listeners:W}),Y.data=pt))}Zc(X,s)})}function Fr(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Ks(n,s){for(var l=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=pr(n,l),g!=null&&h.unshift(Fr(n,g,f)),g=pr(n,s),g!=null&&h.push(Fr(n,g,f))),n=n.return}return h}function Ii(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function td(n,s,l,h,f){for(var g=s._reactName,x=[];l!==null&&l!==h;){var P=l,T=P.alternate,W=P.stateNode;if(T!==null&&T===h)break;P.tag===5&&W!==null&&(P=W,f?(T=pr(l,g),T!=null&&x.unshift(Fr(l,T,P))):f||(T=pr(l,g),T!=null&&x.push(Fr(l,T,P)))),l=l.return}x.length!==0&&n.push({event:s,listeners:x})}var U0=/\r\n?/g,H0=/\u0000|\uFFFD/g;function ed(n){return(typeof n=="string"?n:""+n).replace(U0,`
`).replace(H0,"")}function Qs(n,s,l){if(s=ed(s),ed(n)!==s&&l)throw Error(e(425))}function Zs(){}var sl=null,ol=null;function al(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ll=typeof setTimeout=="function"?setTimeout:void 0,j0=typeof clearTimeout=="function"?clearTimeout:void 0,nd=typeof Promise=="function"?Promise:void 0,G0=typeof queueMicrotask=="function"?queueMicrotask:typeof nd<"u"?function(n){return nd.resolve(null).then(n).catch(V0)}:ll;function V0(n){setTimeout(function(){throw n})}function ul(n,s){var l=s,h=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){n.removeChild(f),Cr(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Cr(s)}function Nn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function id(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),an="__reactFiber$"+Fi,Lr="__reactProps$"+Fi,wn="__reactContainer$"+Fi,hl="__reactEvents$"+Fi,$0="__reactListeners$"+Fi,Y0="__reactHandles$"+Fi;function ei(n){var s=n[an];if(s)return s;for(var l=n.parentNode;l;){if(s=l[wn]||l[an]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=id(n);n!==null;){if(l=n[an])return l;n=id(n)}return s}n=l,l=n.parentNode}return null}function Or(n){return n=n[an]||n[wn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Li(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Js(n){return n[Lr]||null}var cl=[],Oi=-1;function Dn(n){return{current:n}}function Bt(n){0>Oi||(n.current=cl[Oi],cl[Oi]=null,Oi--)}function Lt(n,s){Oi++,cl[Oi]=n.current,n.current=s}var Wn={},he=Dn(Wn),Se=Dn(!1),ni=Wn;function Bi(n,s){var l=n.type.contextTypes;if(!l)return Wn;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Ce(n){return n=n.childContextTypes,n!=null}function to(){Bt(Se),Bt(he)}function rd(n,s,l){if(he.current!==Wn)throw Error(e(168));Lt(he,s),Lt(Se,l)}function sd(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(e(108,ht(n)||"Unknown",f));return L({},l,h)}function eo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wn,ni=he.current,Lt(he,n),Lt(Se,Se.current),!0}function od(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=sd(n,s,ni),h.__reactInternalMemoizedMergedChildContext=n,Bt(Se),Bt(he),Lt(he,n)):Bt(Se),Lt(Se,l)}var _n=null,no=!1,dl=!1;function ad(n){_n===null?_n=[n]:_n.push(n)}function X0(n){no=!0,ad(n)}function Un(){if(!dl&&_n!==null){dl=!0;var n=0,s=Rt;try{var l=_n;for(Rt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}_n=null,no=!1}catch(f){throw _n!==null&&(_n=_n.slice(n+1)),uc(La,Un),f}finally{Rt=s,dl=!1}}return null}var zi=[],Ni=0,io=null,ro=0,Ne=[],De=0,ii=null,Sn=1,Cn="";function ri(n,s){zi[Ni++]=ro,zi[Ni++]=io,io=n,ro=s}function ld(n,s,l){Ne[De++]=Sn,Ne[De++]=Cn,Ne[De++]=ii,ii=n;var h=Sn;n=Cn;var f=32-Ye(h)-1;h&=~(1<<f),l+=1;var g=32-Ye(s)+f;if(30<g){var x=f-f%5;g=(h&(1<<x)-1).toString(32),h>>=x,f-=x,Sn=1<<32-Ye(s)+f|l<<f|h,Cn=g+n}else Sn=1<<g|l<<f|h,Cn=n}function fl(n){n.return!==null&&(ri(n,1),ld(n,1,0))}function pl(n){for(;n===io;)io=zi[--Ni],zi[Ni]=null,ro=zi[--Ni],zi[Ni]=null;for(;n===ii;)ii=Ne[--De],Ne[De]=null,Cn=Ne[--De],Ne[De]=null,Sn=Ne[--De],Ne[De]=null}var Ie=null,Fe=null,zt=!1,qe=null;function ud(n,s){var l=je(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function hd(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Ie=n,Fe=Nn(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Ie=n,Fe=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=ii!==null?{id:Sn,overflow:Cn}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=je(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Ie=n,Fe=null,!0):!1;default:return!1}}function ml(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gl(n){if(zt){var s=Fe;if(s){var l=s;if(!hd(n,s)){if(ml(n))throw Error(e(418));s=Nn(l.nextSibling);var h=Ie;s&&hd(n,s)?ud(h,l):(n.flags=n.flags&-4097|2,zt=!1,Ie=n)}}else{if(ml(n))throw Error(e(418));n.flags=n.flags&-4097|2,zt=!1,Ie=n}}}function cd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ie=n}function so(n){if(n!==Ie)return!1;if(!zt)return cd(n),zt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!al(n.type,n.memoizedProps)),s&&(s=Fe)){if(ml(n))throw dd(),Error(e(418));for(;s;)ud(n,s),s=Nn(s.nextSibling)}if(cd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Fe=Nn(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Fe=null}}else Fe=Ie?Nn(n.stateNode.nextSibling):null;return!0}function dd(){for(var n=Fe;n;)n=Nn(n.nextSibling)}function Di(){Fe=Ie=null,zt=!1}function yl(n){qe===null?qe=[n]:qe.push(n)}var q0=D.ReactCurrentBatchConfig;function Br(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(x){var P=f.refs;x===null?delete P[g]:P[g]=x},s._stringRef=g,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function oo(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function fd(n){var s=n._init;return s(n._payload)}function pd(n){function s(z,I){if(n){var N=z.deletions;N===null?(z.deletions=[I],z.flags|=16):N.push(I)}}function l(z,I){if(!n)return null;for(;I!==null;)s(z,I),I=I.sibling;return null}function h(z,I){for(z=new Map;I!==null;)I.key!==null?z.set(I.key,I):z.set(I.index,I),I=I.sibling;return z}function f(z,I){return z=qn(z,I),z.index=0,z.sibling=null,z}function g(z,I,N){return z.index=N,n?(N=z.alternate,N!==null?(N=N.index,N<I?(z.flags|=2,I):N):(z.flags|=2,I)):(z.flags|=1048576,I)}function x(z){return n&&z.alternate===null&&(z.flags|=2),z}function P(z,I,N,q){return I===null||I.tag!==6?(I=lu(N,z.mode,q),I.return=z,I):(I=f(I,N),I.return=z,I)}function T(z,I,N,q){var lt=N.type;return lt===j?Y(z,I,N.props.children,q,N.key):I!==null&&(I.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===A&&fd(lt)===I.type)?(q=f(I,N.props),q.ref=Br(z,I,N),q.return=z,q):(q=Ro(N.type,N.key,N.props,null,z.mode,q),q.ref=Br(z,I,N),q.return=z,q)}function W(z,I,N,q){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=uu(N,z.mode,q),I.return=z,I):(I=f(I,N.children||[]),I.return=z,I)}function Y(z,I,N,q,lt){return I===null||I.tag!==7?(I=di(N,z.mode,q,lt),I.return=z,I):(I=f(I,N),I.return=z,I)}function X(z,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=lu(""+I,z.mode,N),I.return=z,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case G:return N=Ro(I.type,I.key,I.props,null,z.mode,N),N.ref=Br(z,null,I),N.return=z,N;case H:return I=uu(I,z.mode,N),I.return=z,I;case A:var q=I._init;return X(z,q(I._payload),N)}if(cr(I)||F(I))return I=di(I,z.mode,N,null),I.return=z,I;oo(z,I)}return null}function $(z,I,N,q){var lt=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return lt!==null?null:P(z,I,""+N,q);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case G:return N.key===lt?T(z,I,N,q):null;case H:return N.key===lt?W(z,I,N,q):null;case A:return lt=N._init,$(z,I,lt(N._payload),q)}if(cr(N)||F(N))return lt!==null?null:Y(z,I,N,q,null);oo(z,N)}return null}function et(z,I,N,q,lt){if(typeof q=="string"&&q!==""||typeof q=="number")return z=z.get(N)||null,P(I,z,""+q,lt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case G:return z=z.get(q.key===null?N:q.key)||null,T(I,z,q,lt);case H:return z=z.get(q.key===null?N:q.key)||null,W(I,z,q,lt);case A:var ft=q._init;return et(z,I,N,ft(q._payload),lt)}if(cr(q)||F(q))return z=z.get(N)||null,Y(I,z,q,lt,null);oo(I,q)}return null}function rt(z,I,N,q){for(var lt=null,ft=null,pt=I,mt=I=0,re=null;pt!==null&&mt<N.length;mt++){pt.index>mt?(re=pt,pt=null):re=pt.sibling;var Pt=$(z,pt,N[mt],q);if(Pt===null){pt===null&&(pt=re);break}n&&pt&&Pt.alternate===null&&s(z,pt),I=g(Pt,I,mt),ft===null?lt=Pt:ft.sibling=Pt,ft=Pt,pt=re}if(mt===N.length)return l(z,pt),zt&&ri(z,mt),lt;if(pt===null){for(;mt<N.length;mt++)pt=X(z,N[mt],q),pt!==null&&(I=g(pt,I,mt),ft===null?lt=pt:ft.sibling=pt,ft=pt);return zt&&ri(z,mt),lt}for(pt=h(z,pt);mt<N.length;mt++)re=et(pt,z,mt,N[mt],q),re!==null&&(n&&re.alternate!==null&&pt.delete(re.key===null?mt:re.key),I=g(re,I,mt),ft===null?lt=re:ft.sibling=re,ft=re);return n&&pt.forEach(function(Kn){return s(z,Kn)}),zt&&ri(z,mt),lt}function at(z,I,N,q){var lt=F(N);if(typeof lt!="function")throw Error(e(150));if(N=lt.call(N),N==null)throw Error(e(151));for(var ft=lt=null,pt=I,mt=I=0,re=null,Pt=N.next();pt!==null&&!Pt.done;mt++,Pt=N.next()){pt.index>mt?(re=pt,pt=null):re=pt.sibling;var Kn=$(z,pt,Pt.value,q);if(Kn===null){pt===null&&(pt=re);break}n&&pt&&Kn.alternate===null&&s(z,pt),I=g(Kn,I,mt),ft===null?lt=Kn:ft.sibling=Kn,ft=Kn,pt=re}if(Pt.done)return l(z,pt),zt&&ri(z,mt),lt;if(pt===null){for(;!Pt.done;mt++,Pt=N.next())Pt=X(z,Pt.value,q),Pt!==null&&(I=g(Pt,I,mt),ft===null?lt=Pt:ft.sibling=Pt,ft=Pt);return zt&&ri(z,mt),lt}for(pt=h(z,pt);!Pt.done;mt++,Pt=N.next())Pt=et(pt,z,mt,Pt.value,q),Pt!==null&&(n&&Pt.alternate!==null&&pt.delete(Pt.key===null?mt:Pt.key),I=g(Pt,I,mt),ft===null?lt=Pt:ft.sibling=Pt,ft=Pt);return n&&pt.forEach(function(Px){return s(z,Px)}),zt&&ri(z,mt),lt}function Yt(z,I,N,q){if(typeof N=="object"&&N!==null&&N.type===j&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case G:t:{for(var lt=N.key,ft=I;ft!==null;){if(ft.key===lt){if(lt=N.type,lt===j){if(ft.tag===7){l(z,ft.sibling),I=f(ft,N.props.children),I.return=z,z=I;break t}}else if(ft.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===A&&fd(lt)===ft.type){l(z,ft.sibling),I=f(ft,N.props),I.ref=Br(z,ft,N),I.return=z,z=I;break t}l(z,ft);break}else s(z,ft);ft=ft.sibling}N.type===j?(I=di(N.props.children,z.mode,q,N.key),I.return=z,z=I):(q=Ro(N.type,N.key,N.props,null,z.mode,q),q.ref=Br(z,I,N),q.return=z,z=q)}return x(z);case H:t:{for(ft=N.key;I!==null;){if(I.key===ft)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){l(z,I.sibling),I=f(I,N.children||[]),I.return=z,z=I;break t}else{l(z,I);break}else s(z,I);I=I.sibling}I=uu(N,z.mode,q),I.return=z,z=I}return x(z);case A:return ft=N._init,Yt(z,I,ft(N._payload),q)}if(cr(N))return rt(z,I,N,q);if(F(N))return at(z,I,N,q);oo(z,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(l(z,I.sibling),I=f(I,N),I.return=z,z=I):(l(z,I),I=lu(N,z.mode,q),I.return=z,z=I),x(z)):l(z,I)}return Yt}var Wi=pd(!0),md=pd(!1),ao=Dn(null),lo=null,Ui=null,xl=null;function vl(){xl=Ui=lo=null}function wl(n){var s=ao.current;Bt(ao),n._currentValue=s}function _l(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function Hi(n,s){lo=n,xl=Ui=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Ae=!0),n.firstContext=null)}function We(n){var s=n._currentValue;if(xl!==n)if(n={context:n,memoizedValue:s,next:null},Ui===null){if(lo===null)throw Error(e(308));Ui=n,lo.dependencies={lanes:0,firstContext:n}}else Ui=Ui.next=n;return s}var si=null;function Sl(n){si===null?si=[n]:si.push(n)}function gd(n,s,l,h){var f=s.interleaved;return f===null?(l.next=l,Sl(s)):(l.next=f.next,f.next=l),s.interleaved=l,An(n,h)}function An(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Hn=!1;function Cl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function jn(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,kt&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,An(n,l)}return f=h.interleaved,f===null?(s.next=s,Sl(h)):(s.next=f.next,f.next=s),h.interleaved=s,An(n,l)}function uo(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,za(n,l)}}function xd(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var x={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=x:g=g.next=x,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function ho(n,s,l,h){var f=n.updateQueue;Hn=!1;var g=f.firstBaseUpdate,x=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var T=P,W=T.next;T.next=null,x===null?g=W:x.next=W,x=T;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,P=Y.lastBaseUpdate,P!==x&&(P===null?Y.firstBaseUpdate=W:P.next=W,Y.lastBaseUpdate=T))}if(g!==null){var X=f.baseState;x=0,Y=W=T=null,P=g;do{var $=P.lane,et=P.eventTime;if((h&$)===$){Y!==null&&(Y=Y.next={eventTime:et,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var rt=n,at=P;switch($=s,et=l,at.tag){case 1:if(rt=at.payload,typeof rt=="function"){X=rt.call(et,X,$);break t}X=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=at.payload,$=typeof rt=="function"?rt.call(et,X,$):rt,$==null)break t;X=L({},X,$);break t;case 2:Hn=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,$=f.effects,$===null?f.effects=[P]:$.push(P))}else et={eventTime:et,lane:$,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Y===null?(W=Y=et,T=X):Y=Y.next=et,x|=$;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;$=P,P=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);if(Y===null&&(T=X),f.baseState=T,f.firstBaseUpdate=W,f.lastBaseUpdate=Y,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);li|=x,n.lanes=x,n.memoizedState=X}}function vd(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(e(191,f));f.call(h)}}}var zr={},ln=Dn(zr),Nr=Dn(zr),Dr=Dn(zr);function oi(n){if(n===zr)throw Error(e(174));return n}function Al(n,s){switch(Lt(Dr,s),Lt(Nr,n),Lt(ln,zr),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ka(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ka(s,n)}Bt(ln),Lt(ln,s)}function ji(){Bt(ln),Bt(Nr),Bt(Dr)}function wd(n){oi(Dr.current);var s=oi(ln.current),l=ka(s,n.type);s!==l&&(Lt(Nr,n),Lt(ln,l))}function kl(n){Nr.current===n&&(Bt(ln),Bt(Nr))}var Dt=Dn(0);function co(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bl=[];function Pl(){for(var n=0;n<bl.length;n++)bl[n]._workInProgressVersionPrimary=null;bl.length=0}var fo=D.ReactCurrentDispatcher,El=D.ReactCurrentBatchConfig,ai=0,Wt=null,Jt=null,ne=null,po=!1,Wr=!1,Ur=0,K0=0;function ce(){throw Error(e(321))}function Tl(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Xe(n[l],s[l]))return!1;return!0}function Ml(n,s,l,h,f,g){if(ai=g,Wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,fo.current=n===null||n.memoizedState===null?tx:ex,n=l(h,f),Wr){g=0;do{if(Wr=!1,Ur=0,25<=g)throw Error(e(301));g+=1,ne=Jt=null,s.updateQueue=null,fo.current=nx,n=l(h,f)}while(Wr)}if(fo.current=yo,s=Jt!==null&&Jt.next!==null,ai=0,ne=Jt=Wt=null,po=!1,s)throw Error(e(300));return n}function Rl(){var n=Ur!==0;return Ur=0,n}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?Wt.memoizedState=ne=n:ne=ne.next=n,ne}function Ue(){if(Jt===null){var n=Wt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var s=ne===null?Wt.memoizedState:ne.next;if(s!==null)ne=s,Jt=n;else{if(n===null)throw Error(e(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},ne===null?Wt.memoizedState=ne=n:ne=ne.next=n}return ne}function Hr(n,s){return typeof s=="function"?s(n):s}function Il(n){var s=Ue(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=Jt,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var x=f.next;f.next=g.next,g.next=x}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var P=x=null,T=null,W=g;do{var Y=W.lane;if((ai&Y)===Y)T!==null&&(T=T.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:n(h,W.action);else{var X={lane:Y,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};T===null?(P=T=X,x=h):T=T.next=X,Wt.lanes|=Y,li|=Y}W=W.next}while(W!==null&&W!==g);T===null?x=h:T.next=P,Xe(h,s.memoizedState)||(Ae=!0),s.memoizedState=h,s.baseState=x,s.baseQueue=T,l.lastRenderedState=h}if(n=l.interleaved,n!==null){f=n;do g=f.lane,Wt.lanes|=g,li|=g,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Fl(n){var s=Ue(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do g=n(g,x.action),x=x.next;while(x!==f);Xe(g,s.memoizedState)||(Ae=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function _d(){}function Sd(n,s){var l=Wt,h=Ue(),f=s(),g=!Xe(h.memoizedState,f);if(g&&(h.memoizedState=f,Ae=!0),h=h.queue,Ll(kd.bind(null,l,h,n),[n]),h.getSnapshot!==s||g||ne!==null&&ne.memoizedState.tag&1){if(l.flags|=2048,jr(9,Ad.bind(null,l,h,f,s),void 0,null),ie===null)throw Error(e(349));ai&30||Cd(l,s,f)}return f}function Cd(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Wt.updateQueue,s===null?(s={lastEffect:null,stores:null},Wt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Ad(n,s,l,h){s.value=l,s.getSnapshot=h,bd(s)&&Pd(n)}function kd(n,s,l){return l(function(){bd(s)&&Pd(n)})}function bd(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Xe(n,l)}catch{return!0}}function Pd(n){var s=An(n,1);s!==null&&Je(s,n,1,-1)}function Ed(n){var s=un();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:n},s.queue=n,n=n.dispatch=J0.bind(null,Wt,n),[s.memoizedState,n]}function jr(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=Wt.updateQueue,s===null?(s={lastEffect:null,stores:null},Wt.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Td(){return Ue().memoizedState}function mo(n,s,l,h){var f=un();Wt.flags|=n,f.memoizedState=jr(1|s,l,void 0,h===void 0?null:h)}function go(n,s,l,h){var f=Ue();h=h===void 0?null:h;var g=void 0;if(Jt!==null){var x=Jt.memoizedState;if(g=x.destroy,h!==null&&Tl(h,x.deps)){f.memoizedState=jr(s,l,g,h);return}}Wt.flags|=n,f.memoizedState=jr(1|s,l,g,h)}function Md(n,s){return mo(8390656,8,n,s)}function Ll(n,s){return go(2048,8,n,s)}function Rd(n,s){return go(4,2,n,s)}function Id(n,s){return go(4,4,n,s)}function Fd(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ld(n,s,l){return l=l!=null?l.concat([n]):null,go(4,4,Fd.bind(null,s,n),l)}function Ol(){}function Od(n,s){var l=Ue();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Tl(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Bd(n,s){var l=Ue();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Tl(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function zd(n,s,l){return ai&21?(Xe(l,s)||(l=fc(),Wt.lanes|=l,li|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Ae=!0),n.memoizedState=l)}function Q0(n,s){var l=Rt;Rt=l!==0&&4>l?l:4,n(!0);var h=El.transition;El.transition={};try{n(!1),s()}finally{Rt=l,El.transition=h}}function Nd(){return Ue().memoizedState}function Z0(n,s,l){var h=Yn(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Dd(n))Wd(s,l);else if(l=gd(n,s,l,h),l!==null){var f=ye();Je(l,n,h,f),Ud(l,s,h)}}function J0(n,s,l){var h=Yn(n),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dd(n))Wd(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var x=s.lastRenderedState,P=g(x,l);if(f.hasEagerState=!0,f.eagerState=P,Xe(P,x)){var T=s.interleaved;T===null?(f.next=f,Sl(s)):(f.next=T.next,T.next=f),s.interleaved=f;return}}catch{}finally{}l=gd(n,s,f,h),l!==null&&(f=ye(),Je(l,n,h,f),Ud(l,s,h))}}function Dd(n){var s=n.alternate;return n===Wt||s!==null&&s===Wt}function Wd(n,s){Wr=po=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Ud(n,s,l){if(l&4194240){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,za(n,l)}}var yo={readContext:We,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useInsertionEffect:ce,useLayoutEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useMutableSource:ce,useSyncExternalStore:ce,useId:ce,unstable_isNewReconciler:!1},tx={readContext:We,useCallback:function(n,s){return un().memoizedState=[n,s===void 0?null:s],n},useContext:We,useEffect:Md,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,mo(4194308,4,Fd.bind(null,s,n),l)},useLayoutEffect:function(n,s){return mo(4194308,4,n,s)},useInsertionEffect:function(n,s){return mo(4,2,n,s)},useMemo:function(n,s){var l=un();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=un();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=Z0.bind(null,Wt,n),[h.memoizedState,n]},useRef:function(n){var s=un();return n={current:n},s.memoizedState=n},useState:Ed,useDebugValue:Ol,useDeferredValue:function(n){return un().memoizedState=n},useTransition:function(){var n=Ed(!1),s=n[0];return n=Q0.bind(null,n[1]),un().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=Wt,f=un();if(zt){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),ie===null)throw Error(e(349));ai&30||Cd(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,Md(kd.bind(null,h,g,n),[n]),h.flags|=2048,jr(9,Ad.bind(null,h,g,l,s),void 0,null),l},useId:function(){var n=un(),s=ie.identifierPrefix;if(zt){var l=Cn,h=Sn;l=(h&~(1<<32-Ye(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Ur++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=K0++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},ex={readContext:We,useCallback:Od,useContext:We,useEffect:Ll,useImperativeHandle:Ld,useInsertionEffect:Rd,useLayoutEffect:Id,useMemo:Bd,useReducer:Il,useRef:Td,useState:function(){return Il(Hr)},useDebugValue:Ol,useDeferredValue:function(n){var s=Ue();return zd(s,Jt.memoizedState,n)},useTransition:function(){var n=Il(Hr)[0],s=Ue().memoizedState;return[n,s]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Nd,unstable_isNewReconciler:!1},nx={readContext:We,useCallback:Od,useContext:We,useEffect:Ll,useImperativeHandle:Ld,useInsertionEffect:Rd,useLayoutEffect:Id,useMemo:Bd,useReducer:Fl,useRef:Td,useState:function(){return Fl(Hr)},useDebugValue:Ol,useDeferredValue:function(n){var s=Ue();return Jt===null?s.memoizedState=n:zd(s,Jt.memoizedState,n)},useTransition:function(){var n=Fl(Hr)[0],s=Ue().memoizedState;return[n,s]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Nd,unstable_isNewReconciler:!1};function Ke(n,s){if(n&&n.defaultProps){s=L({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Bl(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:L({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var xo={isMounted:function(n){return(n=n._reactInternals)?ti(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=ye(),f=Yn(n),g=kn(h,f);g.payload=s,l!=null&&(g.callback=l),s=jn(n,g,f),s!==null&&(Je(s,n,f,h),uo(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=ye(),f=Yn(n),g=kn(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=jn(n,g,f),s!==null&&(Je(s,n,f,h),uo(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=ye(),h=Yn(n),f=kn(l,h);f.tag=2,s!=null&&(f.callback=s),s=jn(n,f,h),s!==null&&(Je(s,n,h,l),uo(s,n,h))}};function Hd(n,s,l,h,f,g,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,x):s.prototype&&s.prototype.isPureReactComponent?!Tr(l,h)||!Tr(f,g):!0}function jd(n,s,l){var h=!1,f=Wn,g=s.contextType;return typeof g=="object"&&g!==null?g=We(g):(f=Ce(s)?ni:he.current,h=s.contextTypes,g=(h=h!=null)?Bi(n,f):Wn),s=new s(l,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=xo,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Gd(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&xo.enqueueReplaceState(s,s.state,null)}function zl(n,s,l,h){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},Cl(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=We(g):(g=Ce(s)?ni:he.current,f.context=Bi(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Bl(n,s,g,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&xo.enqueueReplaceState(f,f.state,null),ho(n,l,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Gi(n,s){try{var l="",h=s;do l+=Q(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Nl(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Dl(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var ix=typeof WeakMap=="function"?WeakMap:Map;function Vd(n,s,l){l=kn(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){ko||(ko=!0,tu=h),Dl(n,s)},l}function $d(n,s,l){l=kn(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Dl(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Dl(n,s),typeof h!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),l}function Yd(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new ix;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),n=yx.bind(null,n,s,l),s.then(n,n))}function Xd(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function qd(n,s,l,h,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=kn(-1,1),s.tag=2,jn(l,s,1))),l.lanes|=1),n)}var rx=D.ReactCurrentOwner,Ae=!1;function ge(n,s,l,h){s.child=n===null?md(s,null,l,h):Wi(s,n.child,l,h)}function Kd(n,s,l,h,f){l=l.render;var g=s.ref;return Hi(s,f),h=Ml(n,s,l,h,g,f),l=Rl(),n!==null&&!Ae?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,bn(n,s,f)):(zt&&l&&fl(s),s.flags|=1,ge(n,s,h,f),s.child)}function Qd(n,s,l,h,f){if(n===null){var g=l.type;return typeof g=="function"&&!au(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,Zd(n,s,g,h,f)):(n=Ro(l.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!(n.lanes&f)){var x=g.memoizedProps;if(l=l.compare,l=l!==null?l:Tr,l(x,h)&&n.ref===s.ref)return bn(n,s,f)}return s.flags|=1,n=qn(g,h),n.ref=s.ref,n.return=s,s.child=n}function Zd(n,s,l,h,f){if(n!==null){var g=n.memoizedProps;if(Tr(g,h)&&n.ref===s.ref)if(Ae=!1,s.pendingProps=h=g,(n.lanes&f)!==0)n.flags&131072&&(Ae=!0);else return s.lanes=n.lanes,bn(n,s,f)}return Wl(n,s,l,h,f)}function Jd(n,s,l){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt($i,Le),Le|=l;else{if(!(l&1073741824))return n=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Lt($i,Le),Le|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Lt($i,Le),Le|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Lt($i,Le),Le|=h;return ge(n,s,f,l),s.child}function tf(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Wl(n,s,l,h,f){var g=Ce(l)?ni:he.current;return g=Bi(s,g),Hi(s,f),l=Ml(n,s,l,h,g,f),h=Rl(),n!==null&&!Ae?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,bn(n,s,f)):(zt&&h&&fl(s),s.flags|=1,ge(n,s,l,f),s.child)}function ef(n,s,l,h,f){if(Ce(l)){var g=!0;eo(s)}else g=!1;if(Hi(s,f),s.stateNode===null)wo(n,s),jd(s,l,h),zl(s,l,h,f),h=!0;else if(n===null){var x=s.stateNode,P=s.memoizedProps;x.props=P;var T=x.context,W=l.contextType;typeof W=="object"&&W!==null?W=We(W):(W=Ce(l)?ni:he.current,W=Bi(s,W));var Y=l.getDerivedStateFromProps,X=typeof Y=="function"||typeof x.getSnapshotBeforeUpdate=="function";X||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==h||T!==W)&&Gd(s,x,h,W),Hn=!1;var $=s.memoizedState;x.state=$,ho(s,h,x,f),T=s.memoizedState,P!==h||$!==T||Se.current||Hn?(typeof Y=="function"&&(Bl(s,l,Y,h),T=s.memoizedState),(P=Hn||Hd(s,l,P,h,$,T,W))?(X||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=T),x.props=h,x.state=T,x.context=W,h=P):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{x=s.stateNode,yd(n,s),P=s.memoizedProps,W=s.type===s.elementType?P:Ke(s.type,P),x.props=W,X=s.pendingProps,$=x.context,T=l.contextType,typeof T=="object"&&T!==null?T=We(T):(T=Ce(l)?ni:he.current,T=Bi(s,T));var et=l.getDerivedStateFromProps;(Y=typeof et=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==X||$!==T)&&Gd(s,x,h,T),Hn=!1,$=s.memoizedState,x.state=$,ho(s,h,x,f);var rt=s.memoizedState;P!==X||$!==rt||Se.current||Hn?(typeof et=="function"&&(Bl(s,l,et,h),rt=s.memoizedState),(W=Hn||Hd(s,l,W,h,$,rt,T)||!1)?(Y||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,rt,T),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,rt,T)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||P===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=rt),x.props=h,x.state=rt,x.context=T,h=W):(typeof x.componentDidUpdate!="function"||P===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),h=!1)}return Ul(n,s,l,h,g,f)}function Ul(n,s,l,h,f,g){tf(n,s);var x=(s.flags&128)!==0;if(!h&&!x)return f&&od(s,l,!1),bn(n,s,g);h=s.stateNode,rx.current=s;var P=x&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&x?(s.child=Wi(s,n.child,null,g),s.child=Wi(s,null,P,g)):ge(n,s,P,g),s.memoizedState=h.state,f&&od(s,l,!0),s.child}function nf(n){var s=n.stateNode;s.pendingContext?rd(n,s.pendingContext,s.pendingContext!==s.context):s.context&&rd(n,s.context,!1),Al(n,s.containerInfo)}function rf(n,s,l,h,f){return Di(),yl(f),s.flags|=256,ge(n,s,l,h),s.child}var Hl={dehydrated:null,treeContext:null,retryLane:0};function jl(n){return{baseLanes:n,cachePool:null,transitions:null}}function sf(n,s,l){var h=s.pendingProps,f=Dt.current,g=!1,x=(s.flags&128)!==0,P;if((P=x)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Lt(Dt,f&1),n===null)return gl(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(x=h.children,n=h.fallback,g?(h=s.mode,g=s.child,x={mode:"hidden",children:x},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=x):g=Io(x,h,0,null),n=di(n,h,l,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=jl(l),s.memoizedState=Hl,n):Gl(s,x));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return sx(n,s,x,h,P,f,l);if(g){g=h.fallback,x=s.mode,f=n.child,P=f.sibling;var T={mode:"hidden",children:h.children};return!(x&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=T,s.deletions=null):(h=qn(f,T),h.subtreeFlags=f.subtreeFlags&14680064),P!==null?g=qn(P,g):(g=di(g,x,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,x=n.child.memoizedState,x=x===null?jl(l):{baseLanes:x.baseLanes|l,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=n.childLanes&~l,s.memoizedState=Hl,h}return g=n.child,n=g.sibling,h=qn(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function Gl(n,s){return s=Io({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function vo(n,s,l,h){return h!==null&&yl(h),Wi(s,n.child,null,l),n=Gl(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function sx(n,s,l,h,f,g,x){if(l)return s.flags&256?(s.flags&=-257,h=Nl(Error(e(422))),vo(n,s,x,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Io({mode:"visible",children:h.children},f,0,null),g=di(g,f,x,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&Wi(s,n.child,null,x),s.child.memoizedState=jl(x),s.memoizedState=Hl,g);if(!(s.mode&1))return vo(n,s,x,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var P=h.dgst;return h=P,g=Error(e(419)),h=Nl(g,h,void 0),vo(n,s,x,h)}if(P=(x&n.childLanes)!==0,Ae||P){if(h=ie,h!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|x)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,An(n,f),Je(h,n,f,-1))}return ou(),h=Nl(Error(e(421))),vo(n,s,x,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=xx.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,Fe=Nn(f.nextSibling),Ie=s,zt=!0,qe=null,n!==null&&(Ne[De++]=Sn,Ne[De++]=Cn,Ne[De++]=ii,Sn=n.id,Cn=n.overflow,ii=s),s=Gl(s,h.children),s.flags|=4096,s)}function of(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),_l(n.return,s,l)}function Vl(n,s,l,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function af(n,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(ge(n,s,h.children,l),h=Dt.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&of(n,l,s);else if(n.tag===19)of(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Lt(Dt,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&co(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Vl(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&co(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Vl(s,!0,l,null,g);break;case"together":Vl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function wo(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function bn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),li|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=qn(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=qn(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function ox(n,s,l){switch(s.tag){case 3:nf(s),Di();break;case 5:wd(s);break;case 1:Ce(s.type)&&eo(s);break;case 4:Al(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Lt(ao,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Lt(Dt,Dt.current&1),s.flags|=128,null):l&s.child.childLanes?sf(n,s,l):(Lt(Dt,Dt.current&1),n=bn(n,s,l),n!==null?n.sibling:null);Lt(Dt,Dt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,n.flags&128){if(h)return af(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Lt(Dt,Dt.current),h)break;return null;case 22:case 23:return s.lanes=0,Jd(n,s,l)}return bn(n,s,l)}var lf,$l,uf,hf;lf=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},$l=function(){},uf=function(n,s,l,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,oi(ln.current);var g=null;switch(l){case"input":f=_e(n,f),h=_e(n,h),g=[];break;case"select":f=L({},f,{value:void 0}),h=L({},h,{value:void 0}),g=[];break;case"textarea":f=Aa(n,f),h=Aa(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Zs)}ba(l,h);var x;l=null;for(W in f)if(!h.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var P=f[W];for(x in P)P.hasOwnProperty(x)&&(l||(l={}),l[x]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in h){var T=h[W];if(P=f!=null?f[W]:void 0,h.hasOwnProperty(W)&&T!==P&&(T!=null||P!=null))if(W==="style")if(P){for(x in P)!P.hasOwnProperty(x)||T&&T.hasOwnProperty(x)||(l||(l={}),l[x]="");for(x in T)T.hasOwnProperty(x)&&P[x]!==T[x]&&(l||(l={}),l[x]=T[x])}else l||(g||(g=[]),g.push(W,l)),l=T;else W==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,P=P?P.__html:void 0,T!=null&&P!==T&&(g=g||[]).push(W,T)):W==="children"?typeof T!="string"&&typeof T!="number"||(g=g||[]).push(W,""+T):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(T!=null&&W==="onScroll"&&Ot("scroll",n),g||P===T||(g=[])):(g=g||[]).push(W,T))}l&&(g=g||[]).push("style",l);var W=g;(s.updateQueue=W)&&(s.flags|=4)}},hf=function(n,s,l,h){l!==h&&(s.flags|=4)};function Gr(n,s){if(!zt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function de(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function ax(n,s,l){var h=s.pendingProps;switch(pl(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(s),null;case 1:return Ce(s.type)&&to(),de(s),null;case 3:return h=s.stateNode,ji(),Bt(Se),Bt(he),Pl(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(so(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,qe!==null&&(iu(qe),qe=null))),$l(n,s),de(s),null;case 5:kl(s);var f=oi(Dr.current);if(l=s.type,n!==null&&s.stateNode!=null)uf(n,s,l,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return de(s),null}if(n=oi(ln.current),so(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[an]=s,h[Lr]=g,n=(s.mode&1)!==0,l){case"dialog":Ot("cancel",h),Ot("close",h);break;case"iframe":case"object":case"embed":Ot("load",h);break;case"video":case"audio":for(f=0;f<Rr.length;f++)Ot(Rr[f],h);break;case"source":Ot("error",h);break;case"img":case"image":case"link":Ot("error",h),Ot("load",h);break;case"details":Ot("toggle",h);break;case"input":wt(h,g),Ot("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ot("invalid",h);break;case"textarea":$h(h,g),Ot("invalid",h)}ba(l,g),f=null;for(var x in g)if(g.hasOwnProperty(x)){var P=g[x];x==="children"?typeof P=="string"?h.textContent!==P&&(g.suppressHydrationWarning!==!0&&Qs(h.textContent,P,n),f=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&Qs(h.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(x)&&P!=null&&x==="onScroll"&&Ot("scroll",h)}switch(l){case"input":we(h),Es(h,g,!0);break;case"textarea":we(h),Xh(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Zs)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=qh(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=x.createElement(l,{is:h.is}):(n=x.createElement(l),l==="select"&&(x=n,h.multiple?x.multiple=!0:h.size&&(x.size=h.size))):n=x.createElementNS(n,l),n[an]=s,n[Lr]=h,lf(n,s,!1,!1),s.stateNode=n;t:{switch(x=Pa(l,h),l){case"dialog":Ot("cancel",n),Ot("close",n),f=h;break;case"iframe":case"object":case"embed":Ot("load",n),f=h;break;case"video":case"audio":for(f=0;f<Rr.length;f++)Ot(Rr[f],n);f=h;break;case"source":Ot("error",n),f=h;break;case"img":case"image":case"link":Ot("error",n),Ot("load",n),f=h;break;case"details":Ot("toggle",n),f=h;break;case"input":wt(n,h),f=_e(n,h),Ot("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=L({},h,{value:void 0}),Ot("invalid",n);break;case"textarea":$h(n,h),f=Aa(n,h),Ot("invalid",n);break;default:f=h}ba(l,f),P=f;for(g in P)if(P.hasOwnProperty(g)){var T=P[g];g==="style"?Zh(n,T):g==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&Kh(n,T)):g==="children"?typeof T=="string"?(l!=="textarea"||T!=="")&&dr(n,T):typeof T=="number"&&dr(n,""+T):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?T!=null&&g==="onScroll"&&Ot("scroll",n):T!=null&&B(n,g,T,x))}switch(l){case"input":we(n),Es(n,h,!1);break;case"textarea":we(n),Xh(n);break;case"option":h.value!=null&&n.setAttribute("value",""+st(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?Ai(n,!!h.multiple,g,!1):h.defaultValue!=null&&Ai(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Zs)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return de(s),null;case 6:if(n&&s.stateNode!=null)hf(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=oi(Dr.current),oi(ln.current),so(s)){if(h=s.stateNode,l=s.memoizedProps,h[an]=s,(g=h.nodeValue!==l)&&(n=Ie,n!==null))switch(n.tag){case 3:Qs(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qs(h.nodeValue,l,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[an]=s,s.stateNode=h}return de(s),null;case 13:if(Bt(Dt),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(zt&&Fe!==null&&s.mode&1&&!(s.flags&128))dd(),Di(),s.flags|=98560,g=!1;else if(g=so(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(e(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(e(317));g[an]=s}else Di(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;de(s),g=!1}else qe!==null&&(iu(qe),qe=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||Dt.current&1?te===0&&(te=3):ou())),s.updateQueue!==null&&(s.flags|=4),de(s),null);case 4:return ji(),$l(n,s),n===null&&Ir(s.stateNode.containerInfo),de(s),null;case 10:return wl(s.type._context),de(s),null;case 17:return Ce(s.type)&&to(),de(s),null;case 19:if(Bt(Dt),g=s.memoizedState,g===null)return de(s),null;if(h=(s.flags&128)!==0,x=g.rendering,x===null)if(h)Gr(g,!1);else{if(te!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(x=co(n),x!==null){for(s.flags|=128,Gr(g,!1),h=x.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,n=h,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,n=x.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Lt(Dt,Dt.current&1|2),s.child}n=n.sibling}g.tail!==null&&$t()>Yi&&(s.flags|=128,h=!0,Gr(g,!1),s.lanes=4194304)}else{if(!h)if(n=co(x),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Gr(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!zt)return de(s),null}else 2*$t()-g.renderingStartTime>Yi&&l!==1073741824&&(s.flags|=128,h=!0,Gr(g,!1),s.lanes=4194304);g.isBackwards?(x.sibling=s.child,s.child=x):(l=g.last,l!==null?l.sibling=x:s.child=x,g.last=x)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=$t(),s.sibling=null,l=Dt.current,Lt(Dt,h?l&1|2:l&1),s):(de(s),null);case 22:case 23:return su(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Le&1073741824&&(de(s),s.subtreeFlags&6&&(s.flags|=8192)):de(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function lx(n,s){switch(pl(s),s.tag){case 1:return Ce(s.type)&&to(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ji(),Bt(Se),Bt(he),Pl(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return kl(s),null;case 13:if(Bt(Dt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Di()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Bt(Dt),null;case 4:return ji(),null;case 10:return wl(s.type._context),null;case 22:case 23:return su(),null;case 24:return null;default:return null}}var _o=!1,fe=!1,ux=typeof WeakSet=="function"?WeakSet:Set,it=null;function Vi(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){jt(n,s,h)}else l.current=null}function Yl(n,s,l){try{l()}catch(h){jt(n,s,h)}}var cf=!1;function hx(n,s){if(sl=Ws,n=Hc(),Qa(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break t}var x=0,P=-1,T=-1,W=0,Y=0,X=n,$=null;e:for(;;){for(var et;X!==l||f!==0&&X.nodeType!==3||(P=x+f),X!==g||h!==0&&X.nodeType!==3||(T=x+h),X.nodeType===3&&(x+=X.nodeValue.length),(et=X.firstChild)!==null;)$=X,X=et;for(;;){if(X===n)break e;if($===l&&++W===f&&(P=x),$===g&&++Y===h&&(T=x),(et=X.nextSibling)!==null)break;X=$,$=X.parentNode}X=et}l=P===-1||T===-1?null:{start:P,end:T}}else l=null}l=l||{start:0,end:0}}else l=null;for(ol={focusedElem:n,selectionRange:l},Ws=!1,it=s;it!==null;)if(s=it,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,it=n;else for(;it!==null;){s=it;try{var rt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(rt!==null){var at=rt.memoizedProps,Yt=rt.memoizedState,z=s.stateNode,I=z.getSnapshotBeforeUpdate(s.elementType===s.type?at:Ke(s.type,at),Yt);z.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=s.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(q){jt(s,s.return,q)}if(n=s.sibling,n!==null){n.return=s.return,it=n;break}it=s.return}return rt=cf,cf=!1,rt}function Vr(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Yl(s,l,g)}f=f.next}while(f!==h)}}function So(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Xl(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function df(n){var s=n.alternate;s!==null&&(n.alternate=null,df(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[an],delete s[Lr],delete s[hl],delete s[$0],delete s[Y0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ff(n){return n.tag===5||n.tag===3||n.tag===4}function pf(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||ff(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ql(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Zs));else if(h!==4&&(n=n.child,n!==null))for(ql(n,s,l),n=n.sibling;n!==null;)ql(n,s,l),n=n.sibling}function Kl(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Kl(n,s,l),n=n.sibling;n!==null;)Kl(n,s,l),n=n.sibling}var ae=null,Qe=!1;function Gn(n,s,l){for(l=l.child;l!==null;)mf(n,s,l),l=l.sibling}function mf(n,s,l){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ls,l)}catch{}switch(l.tag){case 5:fe||Vi(l,s);case 6:var h=ae,f=Qe;ae=null,Gn(n,s,l),ae=h,Qe=f,ae!==null&&(Qe?(n=ae,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ae.removeChild(l.stateNode));break;case 18:ae!==null&&(Qe?(n=ae,l=l.stateNode,n.nodeType===8?ul(n.parentNode,l):n.nodeType===1&&ul(n,l),Cr(n)):ul(ae,l.stateNode));break;case 4:h=ae,f=Qe,ae=l.stateNode.containerInfo,Qe=!0,Gn(n,s,l),ae=h,Qe=f;break;case 0:case 11:case 14:case 15:if(!fe&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,x=g.destroy;g=g.tag,x!==void 0&&(g&2||g&4)&&Yl(l,s,x),f=f.next}while(f!==h)}Gn(n,s,l);break;case 1:if(!fe&&(Vi(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){jt(l,s,P)}Gn(n,s,l);break;case 21:Gn(n,s,l);break;case 22:l.mode&1?(fe=(h=fe)||l.memoizedState!==null,Gn(n,s,l),fe=h):Gn(n,s,l);break;default:Gn(n,s,l)}}function gf(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new ux),s.forEach(function(h){var f=vx.bind(null,n,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Ze(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=n,x=s,P=x;t:for(;P!==null;){switch(P.tag){case 5:ae=P.stateNode,Qe=!1;break t;case 3:ae=P.stateNode.containerInfo,Qe=!0;break t;case 4:ae=P.stateNode.containerInfo,Qe=!0;break t}P=P.return}if(ae===null)throw Error(e(160));mf(g,x,f),ae=null,Qe=!1;var T=f.alternate;T!==null&&(T.return=null),f.return=null}catch(W){jt(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)yf(s,n),s=s.sibling}function yf(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ze(s,n),hn(n),h&4){try{Vr(3,n,n.return),So(3,n)}catch(at){jt(n,n.return,at)}try{Vr(5,n,n.return)}catch(at){jt(n,n.return,at)}}break;case 1:Ze(s,n),hn(n),h&512&&l!==null&&Vi(l,l.return);break;case 5:if(Ze(s,n),hn(n),h&512&&l!==null&&Vi(l,l.return),n.flags&32){var f=n.stateNode;try{dr(f,"")}catch(at){jt(n,n.return,at)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,x=l!==null?l.memoizedProps:g,P=n.type,T=n.updateQueue;if(n.updateQueue=null,T!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&Ct(f,g),Pa(P,x);var W=Pa(P,g);for(x=0;x<T.length;x+=2){var Y=T[x],X=T[x+1];Y==="style"?Zh(f,X):Y==="dangerouslySetInnerHTML"?Kh(f,X):Y==="children"?dr(f,X):B(f,Y,X,W)}switch(P){case"input":Ci(f,g);break;case"textarea":Yh(f,g);break;case"select":var $=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var et=g.value;et!=null?Ai(f,!!g.multiple,et,!1):$!==!!g.multiple&&(g.defaultValue!=null?Ai(f,!!g.multiple,g.defaultValue,!0):Ai(f,!!g.multiple,g.multiple?[]:"",!1))}f[Lr]=g}catch(at){jt(n,n.return,at)}}break;case 6:if(Ze(s,n),hn(n),h&4){if(n.stateNode===null)throw Error(e(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(at){jt(n,n.return,at)}}break;case 3:if(Ze(s,n),hn(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Cr(s.containerInfo)}catch(at){jt(n,n.return,at)}break;case 4:Ze(s,n),hn(n);break;case 13:Ze(s,n),hn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Jl=$t())),h&4&&gf(n);break;case 22:if(Y=l!==null&&l.memoizedState!==null,n.mode&1?(fe=(W=fe)||Y,Ze(s,n),fe=W):Ze(s,n),hn(n),h&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!Y&&n.mode&1)for(it=n,Y=n.child;Y!==null;){for(X=it=Y;it!==null;){switch($=it,et=$.child,$.tag){case 0:case 11:case 14:case 15:Vr(4,$,$.return);break;case 1:Vi($,$.return);var rt=$.stateNode;if(typeof rt.componentWillUnmount=="function"){h=$,l=$.return;try{s=h,rt.props=s.memoizedProps,rt.state=s.memoizedState,rt.componentWillUnmount()}catch(at){jt(h,l,at)}}break;case 5:Vi($,$.return);break;case 22:if($.memoizedState!==null){wf(X);continue}}et!==null?(et.return=$,it=et):wf(X)}Y=Y.sibling}t:for(Y=null,X=n;;){if(X.tag===5){if(Y===null){Y=X;try{f=X.stateNode,W?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=X.stateNode,T=X.memoizedProps.style,x=T!=null&&T.hasOwnProperty("display")?T.display:null,P.style.display=Qh("display",x))}catch(at){jt(n,n.return,at)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=W?"":X.memoizedProps}catch(at){jt(n,n.return,at)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break t;for(;X.sibling===null;){if(X.return===null||X.return===n)break t;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Ze(s,n),hn(n),h&4&&gf(n);break;case 21:break;default:Ze(s,n),hn(n)}}function hn(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(ff(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(dr(f,""),h.flags&=-33);var g=pf(n);Kl(n,g,f);break;case 3:case 4:var x=h.stateNode.containerInfo,P=pf(n);ql(n,P,x);break;default:throw Error(e(161))}}catch(T){jt(n,n.return,T)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function cx(n,s,l){it=n,xf(n)}function xf(n,s,l){for(var h=(n.mode&1)!==0;it!==null;){var f=it,g=f.child;if(f.tag===22&&h){var x=f.memoizedState!==null||_o;if(!x){var P=f.alternate,T=P!==null&&P.memoizedState!==null||fe;P=_o;var W=fe;if(_o=x,(fe=T)&&!W)for(it=f;it!==null;)x=it,T=x.child,x.tag===22&&x.memoizedState!==null?_f(f):T!==null?(T.return=x,it=T):_f(f);for(;g!==null;)it=g,xf(g),g=g.sibling;it=f,_o=P,fe=W}vf(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,it=g):vf(n)}}function vf(n){for(;it!==null;){var s=it;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:fe||So(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!fe)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Ke(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&vd(s,g,h);break;case 3:var x=s.updateQueue;if(x!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}vd(s,x,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var T=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&l.focus();break;case"img":T.src&&(l.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var Y=W.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Cr(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}fe||s.flags&512&&Xl(s)}catch($){jt(s,s.return,$)}}if(s===n){it=null;break}if(l=s.sibling,l!==null){l.return=s.return,it=l;break}it=s.return}}function wf(n){for(;it!==null;){var s=it;if(s===n){it=null;break}var l=s.sibling;if(l!==null){l.return=s.return,it=l;break}it=s.return}}function _f(n){for(;it!==null;){var s=it;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{So(4,s)}catch(T){jt(s,l,T)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(T){jt(s,f,T)}}var g=s.return;try{Xl(s)}catch(T){jt(s,g,T)}break;case 5:var x=s.return;try{Xl(s)}catch(T){jt(s,x,T)}}}catch(T){jt(s,s.return,T)}if(s===n){it=null;break}var P=s.sibling;if(P!==null){P.return=s.return,it=P;break}it=s.return}}var dx=Math.ceil,Co=D.ReactCurrentDispatcher,Ql=D.ReactCurrentOwner,He=D.ReactCurrentBatchConfig,kt=0,ie=null,Kt=null,le=0,Le=0,$i=Dn(0),te=0,$r=null,li=0,Ao=0,Zl=0,Yr=null,ke=null,Jl=0,Yi=1/0,Pn=null,ko=!1,tu=null,Vn=null,bo=!1,$n=null,Po=0,Xr=0,eu=null,Eo=-1,To=0;function ye(){return kt&6?$t():Eo!==-1?Eo:Eo=$t()}function Yn(n){return n.mode&1?kt&2&&le!==0?le&-le:q0.transition!==null?(To===0&&(To=fc()),To):(n=Rt,n!==0||(n=window.event,n=n===void 0?16:Sc(n.type)),n):1}function Je(n,s,l,h){if(50<Xr)throw Xr=0,eu=null,Error(e(185));xr(n,l,h),(!(kt&2)||n!==ie)&&(n===ie&&(!(kt&2)&&(Ao|=l),te===4&&Xn(n,le)),be(n,h),l===1&&kt===0&&!(s.mode&1)&&(Yi=$t()+500,no&&Un()))}function be(n,s){var l=n.callbackNode;qy(n,s);var h=zs(n,n===ie?le:0);if(h===0)l!==null&&hc(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&hc(l),s===1)n.tag===0?X0(Cf.bind(null,n)):ad(Cf.bind(null,n)),G0(function(){!(kt&6)&&Un()}),l=null;else{switch(pc(h)){case 1:l=La;break;case 4:l=cc;break;case 16:l=Fs;break;case 536870912:l=dc;break;default:l=Fs}l=Rf(l,Sf.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function Sf(n,s){if(Eo=-1,To=0,kt&6)throw Error(e(327));var l=n.callbackNode;if(Xi()&&n.callbackNode!==l)return null;var h=zs(n,n===ie?le:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=Mo(n,h);else{s=h;var f=kt;kt|=2;var g=kf();(ie!==n||le!==s)&&(Pn=null,Yi=$t()+500,hi(n,s));do try{mx();break}catch(P){Af(n,P)}while(!0);vl(),Co.current=g,kt=f,Kt!==null?s=0:(ie=null,le=0,s=te)}if(s!==0){if(s===2&&(f=Oa(n),f!==0&&(h=f,s=nu(n,f))),s===1)throw l=$r,hi(n,0),Xn(n,h),be(n,$t()),l;if(s===6)Xn(n,h);else{if(f=n.current.alternate,!(h&30)&&!fx(f)&&(s=Mo(n,h),s===2&&(g=Oa(n),g!==0&&(h=g,s=nu(n,g))),s===1))throw l=$r,hi(n,0),Xn(n,h),be(n,$t()),l;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:ci(n,ke,Pn);break;case 3:if(Xn(n,h),(h&130023424)===h&&(s=Jl+500-$t(),10<s)){if(zs(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){ye(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=ll(ci.bind(null,n,ke,Pn),s);break}ci(n,ke,Pn);break;case 4:if(Xn(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var x=31-Ye(h);g=1<<x,x=s[x],x>f&&(f=x),h&=~g}if(h=f,h=$t()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*dx(h/1960))-h,10<h){n.timeoutHandle=ll(ci.bind(null,n,ke,Pn),h);break}ci(n,ke,Pn);break;case 5:ci(n,ke,Pn);break;default:throw Error(e(329))}}}return be(n,$t()),n.callbackNode===l?Sf.bind(null,n):null}function nu(n,s){var l=Yr;return n.current.memoizedState.isDehydrated&&(hi(n,s).flags|=256),n=Mo(n,s),n!==2&&(s=ke,ke=l,s!==null&&iu(s)),n}function iu(n){ke===null?ke=n:ke.push.apply(ke,n)}function fx(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Xe(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xn(n,s){for(s&=~Zl,s&=~Ao,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-Ye(s),h=1<<l;n[l]=-1,s&=~h}}function Cf(n){if(kt&6)throw Error(e(327));Xi();var s=zs(n,0);if(!(s&1))return be(n,$t()),null;var l=Mo(n,s);if(n.tag!==0&&l===2){var h=Oa(n);h!==0&&(s=h,l=nu(n,h))}if(l===1)throw l=$r,hi(n,0),Xn(n,s),be(n,$t()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ci(n,ke,Pn),be(n,$t()),null}function ru(n,s){var l=kt;kt|=1;try{return n(s)}finally{kt=l,kt===0&&(Yi=$t()+500,no&&Un())}}function ui(n){$n!==null&&$n.tag===0&&!(kt&6)&&Xi();var s=kt;kt|=1;var l=He.transition,h=Rt;try{if(He.transition=null,Rt=1,n)return n()}finally{Rt=h,He.transition=l,kt=s,!(kt&6)&&Un()}}function su(){Le=$i.current,Bt($i)}function hi(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,j0(l)),Kt!==null)for(l=Kt.return;l!==null;){var h=l;switch(pl(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&to();break;case 3:ji(),Bt(Se),Bt(he),Pl();break;case 5:kl(h);break;case 4:ji();break;case 13:Bt(Dt);break;case 19:Bt(Dt);break;case 10:wl(h.type._context);break;case 22:case 23:su()}l=l.return}if(ie=n,Kt=n=qn(n.current,null),le=Le=s,te=0,$r=null,Zl=Ao=li=0,ke=Yr=null,si!==null){for(s=0;s<si.length;s++)if(l=si[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var x=g.next;g.next=f,h.next=x}l.pending=h}si=null}return n}function Af(n,s){do{var l=Kt;try{if(vl(),fo.current=yo,po){for(var h=Wt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}po=!1}if(ai=0,ne=Jt=Wt=null,Wr=!1,Ur=0,Ql.current=null,l===null||l.return===null){te=1,$r=s,Kt=null;break}t:{var g=n,x=l.return,P=l,T=s;if(s=le,P.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=T,Y=P,X=Y.tag;if(!(Y.mode&1)&&(X===0||X===11||X===15)){var $=Y.alternate;$?(Y.updateQueue=$.updateQueue,Y.memoizedState=$.memoizedState,Y.lanes=$.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var et=Xd(x);if(et!==null){et.flags&=-257,qd(et,x,P,g,s),et.mode&1&&Yd(g,W,s),s=et,T=W;var rt=s.updateQueue;if(rt===null){var at=new Set;at.add(T),s.updateQueue=at}else rt.add(T);break t}else{if(!(s&1)){Yd(g,W,s),ou();break t}T=Error(e(426))}}else if(zt&&P.mode&1){var Yt=Xd(x);if(Yt!==null){!(Yt.flags&65536)&&(Yt.flags|=256),qd(Yt,x,P,g,s),yl(Gi(T,P));break t}}g=T=Gi(T,P),te!==4&&(te=2),Yr===null?Yr=[g]:Yr.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=Vd(g,T,s);xd(g,z);break t;case 1:P=T;var I=g.type,N=g.stateNode;if(!(g.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Vn===null||!Vn.has(N)))){g.flags|=65536,s&=-s,g.lanes|=s;var q=$d(g,P,s);xd(g,q);break t}}g=g.return}while(g!==null)}Pf(l)}catch(lt){s=lt,Kt===l&&l!==null&&(Kt=l=l.return);continue}break}while(!0)}function kf(){var n=Co.current;return Co.current=yo,n===null?yo:n}function ou(){(te===0||te===3||te===2)&&(te=4),ie===null||!(li&268435455)&&!(Ao&268435455)||Xn(ie,le)}function Mo(n,s){var l=kt;kt|=2;var h=kf();(ie!==n||le!==s)&&(Pn=null,hi(n,s));do try{px();break}catch(f){Af(n,f)}while(!0);if(vl(),kt=l,Co.current=h,Kt!==null)throw Error(e(261));return ie=null,le=0,te}function px(){for(;Kt!==null;)bf(Kt)}function mx(){for(;Kt!==null&&!Wy();)bf(Kt)}function bf(n){var s=Mf(n.alternate,n,Le);n.memoizedProps=n.pendingProps,s===null?Pf(n):Kt=s,Ql.current=null}function Pf(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=lx(l,s),l!==null){l.flags&=32767,Kt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{te=6,Kt=null;return}}else if(l=ax(l,s,Le),l!==null){Kt=l;return}if(s=s.sibling,s!==null){Kt=s;return}Kt=s=n}while(s!==null);te===0&&(te=5)}function ci(n,s,l){var h=Rt,f=He.transition;try{He.transition=null,Rt=1,gx(n,s,l,h)}finally{He.transition=f,Rt=h}return null}function gx(n,s,l,h){do Xi();while($n!==null);if(kt&6)throw Error(e(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(Ky(n,g),n===ie&&(Kt=ie=null,le=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||bo||(bo=!0,Rf(Fs,function(){return Xi(),null})),g=(l.flags&15990)!==0,l.subtreeFlags&15990||g){g=He.transition,He.transition=null;var x=Rt;Rt=1;var P=kt;kt|=4,Ql.current=null,hx(n,l),yf(l,n),B0(ol),Ws=!!sl,ol=sl=null,n.current=l,cx(l),Uy(),kt=P,Rt=x,He.transition=g}else n.current=l;if(bo&&(bo=!1,$n=n,Po=f),g=n.pendingLanes,g===0&&(Vn=null),Gy(l.stateNode),be(n,$t()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(ko)throw ko=!1,n=tu,tu=null,n;return Po&1&&n.tag!==0&&Xi(),g=n.pendingLanes,g&1?n===eu?Xr++:(Xr=0,eu=n):Xr=0,Un(),null}function Xi(){if($n!==null){var n=pc(Po),s=He.transition,l=Rt;try{if(He.transition=null,Rt=16>n?16:n,$n===null)var h=!1;else{if(n=$n,$n=null,Po=0,kt&6)throw Error(e(331));var f=kt;for(kt|=4,it=n.current;it!==null;){var g=it,x=g.child;if(it.flags&16){var P=g.deletions;if(P!==null){for(var T=0;T<P.length;T++){var W=P[T];for(it=W;it!==null;){var Y=it;switch(Y.tag){case 0:case 11:case 15:Vr(8,Y,g)}var X=Y.child;if(X!==null)X.return=Y,it=X;else for(;it!==null;){Y=it;var $=Y.sibling,et=Y.return;if(df(Y),Y===W){it=null;break}if($!==null){$.return=et,it=$;break}it=et}}}var rt=g.alternate;if(rt!==null){var at=rt.child;if(at!==null){rt.child=null;do{var Yt=at.sibling;at.sibling=null,at=Yt}while(at!==null)}}it=g}}if(g.subtreeFlags&2064&&x!==null)x.return=g,it=x;else t:for(;it!==null;){if(g=it,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Vr(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,it=z;break t}it=g.return}}var I=n.current;for(it=I;it!==null;){x=it;var N=x.child;if(x.subtreeFlags&2064&&N!==null)N.return=x,it=N;else t:for(x=I;it!==null;){if(P=it,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:So(9,P)}}catch(lt){jt(P,P.return,lt)}if(P===x){it=null;break t}var q=P.sibling;if(q!==null){q.return=P.return,it=q;break t}it=P.return}}if(kt=f,Un(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ls,n)}catch{}h=!0}return h}finally{Rt=l,He.transition=s}}return!1}function Ef(n,s,l){s=Gi(l,s),s=Vd(n,s,1),n=jn(n,s,1),s=ye(),n!==null&&(xr(n,1,s),be(n,s))}function jt(n,s,l){if(n.tag===3)Ef(n,n,l);else for(;s!==null;){if(s.tag===3){Ef(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Vn===null||!Vn.has(h))){n=Gi(l,n),n=$d(s,n,1),s=jn(s,n,1),n=ye(),s!==null&&(xr(s,1,n),be(s,n));break}}s=s.return}}function yx(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=ye(),n.pingedLanes|=n.suspendedLanes&l,ie===n&&(le&l)===l&&(te===4||te===3&&(le&130023424)===le&&500>$t()-Jl?hi(n,0):Zl|=l),be(n,s)}function Tf(n,s){s===0&&(n.mode&1?(s=Bs,Bs<<=1,!(Bs&130023424)&&(Bs=4194304)):s=1);var l=ye();n=An(n,s),n!==null&&(xr(n,s,l),be(n,l))}function xx(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Tf(n,l)}function vx(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),Tf(n,l)}var Mf;Mf=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||Se.current)Ae=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return Ae=!1,ox(n,s,l);Ae=!!(n.flags&131072)}else Ae=!1,zt&&s.flags&1048576&&ld(s,ro,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;wo(n,s),n=s.pendingProps;var f=Bi(s,he.current);Hi(s,l),f=Ml(null,s,h,n,f,l);var g=Rl();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ce(h)?(g=!0,eo(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Cl(s),f.updater=xo,s.stateNode=f,f._reactInternals=s,zl(s,h,n,l),s=Ul(null,s,h,!0,g,l)):(s.tag=0,zt&&g&&fl(s),ge(null,s,f,l),s=s.child),s;case 16:h=s.elementType;t:{switch(wo(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=_x(h),n=Ke(h,n),f){case 0:s=Wl(null,s,h,n,l);break t;case 1:s=ef(null,s,h,n,l);break t;case 11:s=Kd(null,s,h,n,l);break t;case 14:s=Qd(null,s,h,Ke(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ke(h,f),Wl(n,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ke(h,f),ef(n,s,h,f,l);case 3:t:{if(nf(s),n===null)throw Error(e(387));h=s.pendingProps,g=s.memoizedState,f=g.element,yd(n,s),ho(s,h,null,l);var x=s.memoizedState;if(h=x.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Gi(Error(e(423)),s),s=rf(n,s,h,l,f);break t}else if(h!==f){f=Gi(Error(e(424)),s),s=rf(n,s,h,l,f);break t}else for(Fe=Nn(s.stateNode.containerInfo.firstChild),Ie=s,zt=!0,qe=null,l=md(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Di(),h===f){s=bn(n,s,l);break t}ge(n,s,h,l)}s=s.child}return s;case 5:return wd(s),n===null&&gl(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,x=f.children,al(h,f)?x=null:g!==null&&al(h,g)&&(s.flags|=32),tf(n,s),ge(n,s,x,l),s.child;case 6:return n===null&&gl(s),null;case 13:return sf(n,s,l);case 4:return Al(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Wi(s,null,h,l):ge(n,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ke(h,f),Kd(n,s,h,f,l);case 7:return ge(n,s,s.pendingProps,l),s.child;case 8:return ge(n,s,s.pendingProps.children,l),s.child;case 12:return ge(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,x=f.value,Lt(ao,h._currentValue),h._currentValue=x,g!==null)if(Xe(g.value,x)){if(g.children===f.children&&!Se.current){s=bn(n,s,l);break t}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var P=g.dependencies;if(P!==null){x=g.child;for(var T=P.firstContext;T!==null;){if(T.context===h){if(g.tag===1){T=kn(-1,l&-l),T.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var Y=W.pending;Y===null?T.next=T:(T.next=Y.next,Y.next=T),W.pending=T}}g.lanes|=l,T=g.alternate,T!==null&&(T.lanes|=l),_l(g.return,l,s),P.lanes|=l;break}T=T.next}}else if(g.tag===10)x=g.type===s.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(e(341));x.lanes|=l,P=x.alternate,P!==null&&(P.lanes|=l),_l(x,l,s),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}ge(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Hi(s,l),f=We(f),h=h(f),s.flags|=1,ge(n,s,h,l),s.child;case 14:return h=s.type,f=Ke(h,s.pendingProps),f=Ke(h.type,f),Qd(n,s,h,f,l);case 15:return Zd(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Ke(h,f),wo(n,s),s.tag=1,Ce(h)?(n=!0,eo(s)):n=!1,Hi(s,l),jd(s,h,f),zl(s,h,f,l),Ul(null,s,h,!0,n,l);case 19:return af(n,s,l);case 22:return Jd(n,s,l)}throw Error(e(156,s.tag))};function Rf(n,s){return uc(n,s)}function wx(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function je(n,s,l,h){return new wx(n,s,l,h)}function au(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _x(n){if(typeof n=="function")return au(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_t)return 11;if(n===qt)return 14}return 2}function qn(n,s){var l=n.alternate;return l===null?(l=je(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Ro(n,s,l,h,f,g){var x=2;if(h=n,typeof n=="function")au(n)&&(x=1);else if(typeof n=="string")x=5;else t:switch(n){case j:return di(l.children,f,g,s);case nt:x=8,f|=8;break;case dt:return n=je(12,l,s,f|2),n.elementType=dt,n.lanes=g,n;case xt:return n=je(13,l,s,f),n.elementType=xt,n.lanes=g,n;case Mt:return n=je(19,l,s,f),n.elementType=Mt,n.lanes=g,n;case E:return Io(l,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case J:x=10;break t;case tt:x=9;break t;case _t:x=11;break t;case qt:x=14;break t;case A:x=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=je(x,l,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function di(n,s,l,h){return n=je(7,n,h,s),n.lanes=l,n}function Io(n,s,l,h){return n=je(22,n,h,s),n.elementType=E,n.lanes=l,n.stateNode={isHidden:!1},n}function lu(n,s,l){return n=je(6,n,null,s),n.lanes=l,n}function uu(n,s,l){return s=je(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Sx(n,s,l,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function hu(n,s,l,h,f,g,x,P,T){return n=new Sx(n,s,l,P,T),s===1?(s=1,g===!0&&(s|=8)):s=0,g=je(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cl(g),n}function Cx(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function If(n){if(!n)return Wn;n=n._reactInternals;t:{if(ti(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Ce(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(Ce(l))return sd(n,l,s)}return s}function Ff(n,s,l,h,f,g,x,P,T){return n=hu(l,h,!0,n,f,g,x,P,T),n.context=If(null),l=n.current,h=ye(),f=Yn(l),g=kn(h,f),g.callback=s??null,jn(l,g,f),n.current.lanes=f,xr(n,f,h),be(n,h),n}function Fo(n,s,l,h){var f=s.current,g=ye(),x=Yn(f);return l=If(l),s.context===null?s.context=l:s.pendingContext=l,s=kn(g,x),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=jn(f,s,x),n!==null&&(Je(n,f,x,g),uo(n,f,x)),x}function Lo(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Lf(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function cu(n,s){Lf(n,s),(n=n.alternate)&&Lf(n,s)}var Of=typeof reportError=="function"?reportError:function(n){console.error(n)};function du(n){this._internalRoot=n}Oo.prototype.render=du.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));Fo(n,s,null,null)},Oo.prototype.unmount=du.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ui(function(){Fo(null,n,null,null)}),s[wn]=null}};function Oo(n){this._internalRoot=n}Oo.prototype.unstable_scheduleHydration=function(n){if(n){var s=yc();n={blockedOn:null,target:n,priority:s};for(var l=0;l<On.length&&s!==0&&s<On[l].priority;l++);On.splice(l,0,n),l===0&&wc(n)}};function fu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Bf(){}function Ax(n,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var W=Lo(x);g.call(W)}}var x=Ff(s,h,n,0,null,!1,!1,"",Bf);return n._reactRootContainer=x,n[wn]=x.current,Ir(n.nodeType===8?n.parentNode:n),ui(),x}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var P=h;h=function(){var W=Lo(T);P.call(W)}}var T=hu(n,0,!1,null,null,!1,!1,"",Bf);return n._reactRootContainer=T,n[wn]=T.current,Ir(n.nodeType===8?n.parentNode:n),ui(function(){Fo(s,T,l,h)}),T}function zo(n,s,l,h,f){var g=l._reactRootContainer;if(g){var x=g;if(typeof f=="function"){var P=f;f=function(){var T=Lo(x);P.call(T)}}Fo(s,x,n,f)}else x=Ax(l,s,n,f,h);return Lo(x)}mc=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=yr(s.pendingLanes);l!==0&&(za(s,l|1),be(s,$t()),!(kt&6)&&(Yi=$t()+500,Un()))}break;case 13:ui(function(){var h=An(n,1);if(h!==null){var f=ye();Je(h,n,1,f)}}),cu(n,1)}},Na=function(n){if(n.tag===13){var s=An(n,134217728);if(s!==null){var l=ye();Je(s,n,134217728,l)}cu(n,134217728)}},gc=function(n){if(n.tag===13){var s=Yn(n),l=An(n,s);if(l!==null){var h=ye();Je(l,n,s,h)}cu(n,s)}},yc=function(){return Rt},xc=function(n,s){var l=Rt;try{return Rt=n,s()}finally{Rt=l}},Ma=function(n,s,l){switch(s){case"input":if(Ci(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var f=Js(h);if(!f)throw Error(e(90));ue(h),Ci(h,f)}}}break;case"textarea":Yh(n,l);break;case"select":s=l.value,s!=null&&Ai(n,!!l.multiple,s,!1)}},nc=ru,ic=ui;var kx={usingClientEntryPoint:!1,Events:[Or,Li,Js,tc,ec,ru]},qr={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bx={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ac(n),n===null?null:n.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{Ls=No.inject(bx),on=No}catch{}}return Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx,Pe.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fu(s))throw Error(e(200));return Cx(n,s,null,l)},Pe.createRoot=function(n,s){if(!fu(n))throw Error(e(299));var l=!1,h="",f=Of;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=hu(n,1,!1,null,null,l,!1,h,f),n[wn]=s.current,Ir(n.nodeType===8?n.parentNode:n),new du(s)},Pe.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=ac(s),n=n===null?null:n.stateNode,n},Pe.flushSync=function(n){return ui(n)},Pe.hydrate=function(n,s,l){if(!Bo(s))throw Error(e(200));return zo(null,n,s,!0,l)},Pe.hydrateRoot=function(n,s,l){if(!fu(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",x=Of;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),s=Ff(s,null,n,1,l??null,f,!1,g,x),n[wn]=s.current,Ir(n),h)for(n=0;n<h.length;n++)l=h[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new Oo(s)},Pe.render=function(n,s,l){if(!Bo(s))throw Error(e(200));return zo(null,n,s,!1,l)},Pe.unmountComponentAtNode=function(n){if(!Bo(n))throw Error(e(40));return n._reactRootContainer?(ui(function(){zo(null,null,n,!1,function(){n._reactRootContainer=null,n[wn]=null})}),!0):!1},Pe.unstable_batchedUpdates=ru,Pe.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!Bo(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return zo(n,s,l,!1,h)},Pe.version="18.3.1-next-f1338f8080-20240426",Pe}var Gf;function Bx(){if(Gf)return gu.exports;Gf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),gu.exports=Ox(),gu.exports}var Vf;function zx(){if(Vf)return Do;Vf=1;var i=Bx();return Do.createRoot=i.createRoot,Do.hydrateRoot=i.hydrateRoot,Do}var Nx=zx();const Dx=ha(Nx);var mn=Ah();const Wx="modulepreload",Ux=function(i){return"/"+i},$f={},ra=function(t,e,r){let o=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(e.map(d=>{if(d=Ux(d),d in $f)return;$f[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Wx,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((w,v)=>{y.addEventListener("load",w),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var ct=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(ct||{});const Zu=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Wo=(i,t)=>Zu(i).priority??t,ve={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Zu).forEach(t=>{t.type.forEach(e=>{var r,o;return(o=(r=this._removeHandlers)[e])==null?void 0:o.call(r,t)})}),this},add(...i){return i.map(Zu).forEach(t=>{t.type.forEach(e=>{var a,u;const r=this._addHandlers,o=this._queue;r[e]?(u=r[e])==null||u.call(r,t):(o[e]=o[e]||[],(a=o[e])==null||a.push(t))})}),this},handle(i,t,e){var u;const r=this._addHandlers,o=this._removeHandlers;if(r[i]||o[i])throw new Error(`Extension type ${i} already has a handler`);r[i]=t,o[i]=e;const a=this._queue;return a[i]&&((u=a[i])==null||u.forEach(c=>t(c)),delete a[i]),this},handleByMap(i,t){return this.handle(i,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(i,t,e=-1){return this.handle(i,r=>{t.findIndex(a=>a.name===r.name)>=0||(t.push({name:r.name,value:r.ref}),t.sort((a,u)=>Wo(u.value,e)-Wo(a.value,e)))},r=>{const o=t.findIndex(a=>a.name===r.name);o!==-1&&t.splice(o,1)})},handleByList(i,t,e=-1){return this.handle(i,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((o,a)=>Wo(a,e)-Wo(o,e)))},r=>{const o=t.indexOf(r.ref);o!==-1&&t.splice(o,1)})}},Hx={extension:{type:ct.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ra(()=>import("./browserAll-5K1UbLpr.js"),__vite__mapDeps([0,1,2]))}},jx={extension:{type:ct.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ra(()=>import("./webworkerAll-DXy0NZYb.js"),__vite__mapDeps([1,2]))}};class Ee{constructor(t,e,r){this._x=e||0,this._y=r||0,this._observer=t}clone(t){return new Ee(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var vu={exports:{}},Yf;function Gx(){return Yf||(Yf=1,function(i){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function a(d,p,m,y,w){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||d,w),S=e?e+p:p;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],v]:d._events[S].push(v):(d._events[S]=v,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new r:delete d._events[p]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],m,y;if(this._eventsCount===0)return p;for(y in m=this._events)t.call(m,y)&&p.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},c.prototype.listeners=function(p){var m=e?e+p:p,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var w=0,v=y.length,S=new Array(v);w<v;w++)S[w]=y[w].fn;return S},c.prototype.listenerCount=function(p){var m=e?e+p:p,y=this._events[m];return y?y.fn?1:y.length:0},c.prototype.emit=function(p,m,y,w,v,S){var k=e?e+p:p;if(!this._events[k])return!1;var _=this._events[k],R=arguments.length,O,B;if(_.fn){switch(_.once&&this.removeListener(p,_.fn,void 0,!0),R){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,m),!0;case 3:return _.fn.call(_.context,m,y),!0;case 4:return _.fn.call(_.context,m,y,w),!0;case 5:return _.fn.call(_.context,m,y,w,v),!0;case 6:return _.fn.call(_.context,m,y,w,v,S),!0}for(B=1,O=new Array(R-1);B<R;B++)O[B-1]=arguments[B];_.fn.apply(_.context,O)}else{var D=_.length,G;for(B=0;B<D;B++)switch(_[B].once&&this.removeListener(p,_[B].fn,void 0,!0),R){case 1:_[B].fn.call(_[B].context);break;case 2:_[B].fn.call(_[B].context,m);break;case 3:_[B].fn.call(_[B].context,m,y);break;case 4:_[B].fn.call(_[B].context,m,y,w);break;default:if(!O)for(G=1,O=new Array(R-1);G<R;G++)O[G-1]=arguments[G];_[B].fn.apply(_[B].context,O)}}return!0},c.prototype.on=function(p,m,y){return a(this,p,m,y,!1)},c.prototype.once=function(p,m,y){return a(this,p,m,y,!0)},c.prototype.removeListener=function(p,m,y,w){var v=e?e+p:p;if(!this._events[v])return this;if(!m)return u(this,v),this;var S=this._events[v];if(S.fn)S.fn===m&&(!w||S.once)&&(!y||S.context===y)&&u(this,v);else{for(var k=0,_=[],R=S.length;k<R;k++)(S[k].fn!==m||w&&!S[k].once||y&&S[k].context!==y)&&_.push(S[k]);_.length?this._events[v]=_.length===1?_[0]:_:u(this,v)}return this},c.prototype.removeAllListeners=function(p){var m;return p?(m=e?e+p:p,this._events[m]&&u(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,i.exports=c}(vu)),vu.exports}var Vx=Gx();const nn=ha(Vx),$x=Math.PI*2,Yx=180/Math.PI,Xx=Math.PI/180;class At{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new At(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return wu.x=0,wu.y=0,wu}}const wu=new At;class Tt{constructor(t=1,e=0,r=0,o=1,a=0,u=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=o,this.tx=a,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,o,a,u){return this.a=t,this.b=e,this.c=r,this.d=o,this.tx=a,this.ty=u,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new At;const r=t.x,o=t.y;return e.x=this.a*r+this.c*o+this.tx,e.y=this.b*r+this.d*o+this.ty,e}applyInverse(t,e){e=e||new At;const r=this.a,o=this.b,a=this.c,u=this.d,c=this.tx,d=this.ty,p=1/(r*u+a*-o),m=t.x,y=t.y;return e.x=u*p*m+-a*p*y+(d*a-c*u)*p,e.y=r*p*y+-o*p*m+(-d*r+c*o)*p,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),o=this.a,a=this.c,u=this.tx;return this.a=o*e-this.b*r,this.b=o*r+this.b*e,this.c=a*e-this.d*r,this.d=a*r+this.d*e,this.tx=u*e-this.ty*r,this.ty=u*r+this.ty*e,this}append(t){const e=this.a,r=this.b,o=this.c,a=this.d;return this.a=t.a*e+t.b*o,this.b=t.a*r+t.b*a,this.c=t.c*e+t.d*o,this.d=t.c*r+t.d*a,this.tx=t.tx*e+t.ty*o+this.tx,this.ty=t.tx*r+t.ty*a+this.ty,this}appendFrom(t,e){const r=t.a,o=t.b,a=t.c,u=t.d,c=t.tx,d=t.ty,p=e.a,m=e.b,y=e.c,w=e.d;return this.a=r*p+o*y,this.b=r*m+o*w,this.c=a*p+u*y,this.d=a*m+u*w,this.tx=c*p+d*y+e.tx,this.ty=c*m+d*w+e.ty,this}setTransform(t,e,r,o,a,u,c,d,p){return this.a=Math.cos(c+p)*a,this.b=Math.sin(c+p)*a,this.c=-Math.sin(c-d)*u,this.d=Math.cos(c-d)*u,this.tx=t-(r*this.a+o*this.c),this.ty=e-(r*this.b+o*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,o=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,o=this.c,a=this.d,u=t.pivot,c=-Math.atan2(-o,a),d=Math.atan2(r,e),p=Math.abs(c+d);return p<1e-5||Math.abs($x-p)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=d),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(o*o+a*a),t.position.x=this.tx+(u.x*e+u.y*o),t.position.y=this.ty+(u.x*r+u.y*a),t}invert(){const t=this.a,e=this.b,r=this.c,o=this.d,a=this.tx,u=t*o-e*r;return this.a=o/u,this.b=-e/u,this.c=-r/u,this.d=t/u,this.tx=(r*this.ty-o*a)/u,this.ty=-(t*this.ty-e*a)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Tt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Kx.identity()}static get shared(){return qx.identity()}}const qx=new Tt,Kx=new Tt,pi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],gi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],yi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ju=[],Tm=[],Uo=Math.sign;function Qx(){for(let i=0;i<16;i++){const t=[];Ju.push(t);for(let e=0;e<16;e++){const r=Uo(pi[i]*pi[e]+gi[i]*mi[e]),o=Uo(mi[i]*pi[e]+yi[i]*mi[e]),a=Uo(pi[i]*gi[e]+gi[i]*yi[e]),u=Uo(mi[i]*gi[e]+yi[i]*yi[e]);for(let c=0;c<16;c++)if(pi[c]===r&&mi[c]===o&&gi[c]===a&&yi[c]===u){t.push(c);break}}}for(let i=0;i<16;i++){const t=new Tt;t.set(pi[i],mi[i],gi[i],yi[i],0,0),Tm.push(t)}}Qx();const Ut={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>pi[i],uY:i=>mi[i],vX:i=>gi[i],vY:i=>yi[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>Ju[i][t],sub:(i,t)=>Ju[i][Ut.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?Ut.S:Ut.N:Math.abs(t)*2<=Math.abs(i)?i>0?Ut.E:Ut.W:t>0?i>0?Ut.SE:Ut.SW:i>0?Ut.NE:Ut.NW,matrixAppendRotationInv:(i,t,e=0,r=0)=>{const o=Tm[Ut.inv(t)];o.tx=e,o.ty=r,i.append(o)}},Ho=[new At,new At,new At,new At];class Ht{constructor(t=0,e=0,r=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Ht(0,0,0,0)}clone(){return new Ht(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,r,o=.5){const{width:a,height:u}=this;if(a<=0||u<=0)return!1;const c=this.x,d=this.y,p=r*(1-o),m=r-p,y=c-p,w=c+a+p,v=d-p,S=d+u+p,k=c+m,_=c+a-m,R=d+m,O=d+u-m;return t>=y&&t<=w&&e>=v&&e<=S&&!(t>k&&t<_&&e>R&&e<O)}intersects(t,e){if(!e){const nt=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=nt)return!1;const J=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>J}const r=this.left,o=this.right,a=this.top,u=this.bottom;if(o<=r||u<=a)return!1;const c=Ho[0].set(t.left,t.top),d=Ho[1].set(t.left,t.bottom),p=Ho[2].set(t.right,t.top),m=Ho[3].set(t.right,t.bottom);if(p.x<=c.x||d.y<=c.y)return!1;const y=Math.sign(e.a*e.d-e.b*e.c);if(y===0||(e.apply(c,c),e.apply(d,d),e.apply(p,p),e.apply(m,m),Math.max(c.x,d.x,p.x,m.x)<=r||Math.min(c.x,d.x,p.x,m.x)>=o||Math.max(c.y,d.y,p.y,m.y)<=a||Math.min(c.y,d.y,p.y,m.y)>=u))return!1;const w=y*(d.y-c.y),v=y*(c.x-d.x),S=w*r+v*a,k=w*o+v*a,_=w*r+v*u,R=w*o+v*u;if(Math.max(S,k,_,R)<=w*c.x+v*c.y||Math.min(S,k,_,R)>=w*m.x+v*m.y)return!1;const O=y*(c.y-p.y),B=y*(p.x-c.x),D=O*r+B*a,G=O*o+B*a,H=O*r+B*u,j=O*o+B*u;return!(Math.max(D,G,H,j)<=O*c.x+B*c.y||Math.min(D,G,H,j)>=O*m.x+B*m.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=o,this.height=Math.max(a-o,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,o=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=o-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=o,this.height=a-o,this}getBounds(t){return t||(t=new Ht),t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const _u={default:-1};function ee(i="default"){return _u[i]===void 0&&(_u[i]=-1),++_u[i]}const Xf={},It="8.0.0",Zx="8.3.4";function Et(i,t,e=3){if(Xf[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(r))),Xf[t]=!0}const Mm=()=>{};function sa(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function qf(i){return!(i&i-1)&&!!i}function Jx(i){const t={};for(const e in i)i[e]!==void 0&&(t[e]=i[e]);return t}const Kf=Object.create(null);function tv(i){const t=Kf[i];return t===void 0&&(Kf[i]=ee("resource")),t}const Rm=class Im extends nn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Im.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Et(It,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=tv(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Rm.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let ev=Rm;const Fm=class Lm extends nn{constructor(t={}){super(),this.options=t,this.uid=ee("textureSource"),this._resourceType="textureSource",this._resourceId=ee("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Lm.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new ev(Jx(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,r;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(r=this._style)==null||r.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ee("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,r){r||(r=this._resolution),t||(t=this.width),e||(e=this.height);const o=Math.round(t*r),a=Math.round(e*r);return this.width=o/r,this.height=a/r,this._resolution=r,this.pixelWidth===o&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=a,this.emit("resize",this),this._resourceId=ee("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=qf(this.pixelWidth)&&qf(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Fm.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let vn=Fm;class kh extends vn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let r=t.format;r||(e instanceof Float32Array?r="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?r="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?r="rgba16uint":(e instanceof Int8Array,r="bgra8unorm")),super({...t,resource:e,format:r}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}kh.extension=ct.TextureSource;const Qf=new Tt;class nv{constructor(t,e){this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const r=this.mapCoord;for(let o=0;o<t.length;o+=2){const a=t[o],u=t[o+1];e[o]=a*r.a+u*r.c+r.tx,e[o+1]=a*r.b+u*r.d+r.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const r=t.orig,o=t.trim;o&&(Qf.set(r.width/o.width,0,0,r.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Qf));const a=t.source,u=this.uClampFrame,c=this.clampMargin/a._resolution,d=this.clampOffset/a._resolution;return u[0]=(t.frame.x+c+d)/a.width,u[1]=(t.frame.y+c+d)/a.height,u[2]=(t.frame.x+t.frame.width-c+d)/a.width,u[3]=(t.frame.y+t.frame.height-c+d)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=t.frame.width===a.width&&t.frame.height===a.height&&t.rotate===0,!0}}class bt extends nn{constructor({source:t,label:e,frame:r,orig:o,trim:a,defaultAnchor:u,defaultBorders:c,rotate:d,dynamic:p}={}){if(super(),this.uid=ee("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ht,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new vn,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=a,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=c,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new nv(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:r,height:o}=this._source,a=e.x/r,u=e.y/o,c=e.width/r,d=e.height/o;let p=this.rotate;if(p){const m=c/2,y=d/2,w=a+m,v=u+y;p=Ut.add(p,Ut.NW),t.x0=w+m*Ut.uX(p),t.y0=v+y*Ut.uY(p),p=Ut.add(p,2),t.x1=w+m*Ut.uX(p),t.y1=v+y*Ut.uY(p),p=Ut.add(p,2),t.x2=w+m*Ut.uX(p),t.y2=v+y*Ut.uY(p),p=Ut.add(p,2),t.x3=w+m*Ut.uX(p),t.y3=v+y*Ut.uY(p)}else t.x0=a,t.y0=u,t.x1=a+c,t.y1=u,t.x2=a+c,t.y2=u+d,t.x3=a,t.y3=u+d}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Et(It,"Texture.baseTexture is now Texture.source"),this._source}}bt.EMPTY=new bt({label:"EMPTY",source:new vn({label:"EMPTY"})});bt.EMPTY.destroy=Mm;bt.WHITE=new bt({source:new kh({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});bt.WHITE.destroy=Mm;function iv(i,t,e,r){const{width:o,height:a}=e.orig,u=e.trim;if(u){const c=u.width,d=u.height;i.minX=u.x-t._x*o-r,i.maxX=i.minX+c,i.minY=u.y-t._y*a-r,i.maxY=i.minY+d}else i.minX=-t._x*o-r,i.maxX=i.minX+o,i.minY=-t._y*a-r,i.maxY=i.minY+a}const Zf=new Tt;class yn{constructor(t=1/0,e=1/0,r=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zf,this.minX=t,this.minY=e,this.maxX=r,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ht);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zf,this}set(t,e,r,o){this.minX=t,this.minY=e,this.maxX=r,this.maxY=o}addFrame(t,e,r,o,a){a||(a=this.matrix);const u=a.a,c=a.b,d=a.c,p=a.d,m=a.tx,y=a.ty;let w=this.minX,v=this.minY,S=this.maxX,k=this.maxY,_=u*t+d*e+m,R=c*t+p*e+y;_<w&&(w=_),R<v&&(v=R),_>S&&(S=_),R>k&&(k=R),_=u*r+d*e+m,R=c*r+p*e+y,_<w&&(w=_),R<v&&(v=R),_>S&&(S=_),R>k&&(k=R),_=u*t+d*o+m,R=c*t+p*o+y,_<w&&(w=_),R<v&&(v=R),_>S&&(S=_),R>k&&(k=R),_=u*r+d*o+m,R=c*r+p*o+y,_<w&&(w=_),R<v&&(v=R),_>S&&(S=_),R>k&&(k=R),this.minX=w,this.minY=v,this.maxX=S,this.maxY=k}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,r=this.minY,o=this.maxX,a=this.maxY,{a:u,b:c,c:d,d:p,tx:m,ty:y}=t;let w=u*e+d*r+m,v=c*e+p*r+y;this.minX=w,this.minY=v,this.maxX=w,this.maxY=v,w=u*o+d*r+m,v=c*o+p*r+y,this.minX=w<this.minX?w:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=v>this.maxY?v:this.maxY,w=u*e+d*a+m,v=c*e+p*a+y,this.minX=w<this.minX?w:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=v>this.maxY?v:this.maxY,w=u*o+d*a+m,v=c*o+p*a+y,this.minX=w<this.minX?w:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=w>this.maxX?w:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,r,o){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<r&&(this.minY=r),this.maxY>o&&(this.maxY=o),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new yn(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,r,o){let a=this.minX,u=this.minY,c=this.maxX,d=this.maxY;o||(o=this.matrix);const p=o.a,m=o.b,y=o.c,w=o.d,v=o.tx,S=o.ty;for(let k=e;k<r;k+=2){const _=t[k],R=t[k+1],O=p*_+y*R+v,B=m*_+w*R+S;a=O<a?O:a,u=B<u?B:u,c=O>c?O:c,d=B>d?B:d}this.minX=a,this.minY=u,this.maxX=c,this.maxY=d}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var rv={grad:.9,turn:360,rad:360/(2*Math.PI)},En=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},oe=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*i)/e+0},Ve=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),i>e?e:i>t?i:t},Om=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},Jf=function(i){return{r:Ve(i.r,0,255),g:Ve(i.g,0,255),b:Ve(i.b,0,255),a:Ve(i.a)}},Su=function(i){return{r:oe(i.r),g:oe(i.g),b:oe(i.b),a:oe(i.a,3)}},sv=/^#([0-9a-f]{3,8})$/i,jo=function(i){var t=i.toString(16);return t.length<2?"0"+t:t},Bm=function(i){var t=i.r,e=i.g,r=i.b,o=i.a,a=Math.max(t,e,r),u=a-Math.min(t,e,r),c=u?a===t?(e-r)/u:a===e?2+(r-t)/u:4+(t-e)/u:0;return{h:60*(c<0?c+6:c),s:a?u/a*100:0,v:a/255*100,a:o}},zm=function(i){var t=i.h,e=i.s,r=i.v,o=i.a;t=t/360*6,e/=100,r/=100;var a=Math.floor(t),u=r*(1-e),c=r*(1-(t-a)*e),d=r*(1-(1-t+a)*e),p=a%6;return{r:255*[r,c,u,u,d,r][p],g:255*[d,r,r,c,u,u][p],b:255*[u,u,d,r,r,c][p],a:o}},tp=function(i){return{h:Om(i.h),s:Ve(i.s,0,100),l:Ve(i.l,0,100),a:Ve(i.a)}},ep=function(i){return{h:oe(i.h),s:oe(i.s),l:oe(i.l),a:oe(i.a,3)}},np=function(i){return zm((e=(t=i).s,{h:t.h,s:(e*=((r=t.l)<50?r:100-r)/100)>0?2*e/(r+e)*100:0,v:r+e,a:t.a}));var t,e,r},gs=function(i){return{h:(t=Bm(i)).h,s:(o=(200-(e=t.s))*(r=t.v)/100)>0&&o<200?e*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,e,r,o},ov=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,av=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,th={string:[[function(i){var t=sv.exec(i);return t?(i=t[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?oe(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?oe(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var t=lv.exec(i)||uv.exec(i);return t?t[2]!==t[4]||t[4]!==t[6]?null:Jf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(i){var t=ov.exec(i)||av.exec(i);if(!t)return null;var e,r,o=tp({h:(e=t[1],r=t[2],r===void 0&&(r="deg"),Number(e)*(rv[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return np(o)},"hsl"]],object:[[function(i){var t=i.r,e=i.g,r=i.b,o=i.a,a=o===void 0?1:o;return En(t)&&En(e)&&En(r)?Jf({r:Number(t),g:Number(e),b:Number(r),a:Number(a)}):null},"rgb"],[function(i){var t=i.h,e=i.s,r=i.l,o=i.a,a=o===void 0?1:o;if(!En(t)||!En(e)||!En(r))return null;var u=tp({h:Number(t),s:Number(e),l:Number(r),a:Number(a)});return np(u)},"hsl"],[function(i){var t=i.h,e=i.s,r=i.v,o=i.a,a=o===void 0?1:o;if(!En(t)||!En(e)||!En(r))return null;var u=function(c){return{h:Om(c.h),s:Ve(c.s,0,100),v:Ve(c.v,0,100),a:Ve(c.a)}}({h:Number(t),s:Number(e),v:Number(r),a:Number(a)});return zm(u)},"hsv"]]},ip=function(i,t){for(var e=0;e<t.length;e++){var r=t[e][0](i);if(r)return[r,t[e][1]]}return[null,void 0]},hv=function(i){return typeof i=="string"?ip(i.trim(),th.string):typeof i=="object"&&i!==null?ip(i,th.object):[null,void 0]},Cu=function(i,t){var e=gs(i);return{h:e.h,s:Ve(e.s+100*t,0,100),l:e.l,a:e.a}},Au=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},rp=function(i,t){var e=gs(i);return{h:e.h,s:e.s,l:Ve(e.l+100*t,0,100),a:e.a}},eh=function(){function i(t){this.parsed=hv(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return oe(Au(this.rgba),2)},i.prototype.isDark=function(){return Au(this.rgba)<.5},i.prototype.isLight=function(){return Au(this.rgba)>=.5},i.prototype.toHex=function(){return t=Su(this.rgba),e=t.r,r=t.g,o=t.b,u=(a=t.a)<1?jo(oe(255*a)):"","#"+jo(e)+jo(r)+jo(o)+u;var t,e,r,o,a,u},i.prototype.toRgb=function(){return Su(this.rgba)},i.prototype.toRgbString=function(){return t=Su(this.rgba),e=t.r,r=t.g,o=t.b,(a=t.a)<1?"rgba("+e+", "+r+", "+o+", "+a+")":"rgb("+e+", "+r+", "+o+")";var t,e,r,o,a},i.prototype.toHsl=function(){return ep(gs(this.rgba))},i.prototype.toHslString=function(){return t=ep(gs(this.rgba)),e=t.h,r=t.s,o=t.l,(a=t.a)<1?"hsla("+e+", "+r+"%, "+o+"%, "+a+")":"hsl("+e+", "+r+"%, "+o+"%)";var t,e,r,o,a},i.prototype.toHsv=function(){return t=Bm(this.rgba),{h:oe(t.h),s:oe(t.s),v:oe(t.v),a:oe(t.a,3)};var t},i.prototype.invert=function(){return dn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},i.prototype.saturate=function(t){return t===void 0&&(t=.1),dn(Cu(this.rgba,t))},i.prototype.desaturate=function(t){return t===void 0&&(t=.1),dn(Cu(this.rgba,-t))},i.prototype.grayscale=function(){return dn(Cu(this.rgba,-1))},i.prototype.lighten=function(t){return t===void 0&&(t=.1),dn(rp(this.rgba,t))},i.prototype.darken=function(t){return t===void 0&&(t=.1),dn(rp(this.rgba,-t))},i.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},i.prototype.alpha=function(t){return typeof t=="number"?dn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):oe(this.rgba.a,3);var e},i.prototype.hue=function(t){var e=gs(this.rgba);return typeof t=="number"?dn({h:t,s:e.s,l:e.l,a:e.a}):oe(e.h)},i.prototype.isEqual=function(t){return this.toHex()===dn(t).toHex()},i}(),dn=function(i){return i instanceof eh?i:new eh(i)},sp=[],cv=function(i){i.forEach(function(t){sp.indexOf(t)<0&&(t(eh,th),sp.push(t))})};function dv(i,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var o in e)r[e[o]]=o;var a={};i.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,p=r[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),y=1/0,w="black";if(!a.length)for(var v in e)a[v]=new i(e[v]).toRgb();for(var S in e){var k=(c=m,d=a[S],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));k<y&&(y=k,w=S)}return w}},t.string.push([function(u){var c=u.toLowerCase(),d=c==="transparent"?"#0000":e[c];return d?new i(d).toRgb():null},"name"])}cv([dv]);const er=class ds{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ds)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((a,u)=>a===e[u]);if(t!==null&&e!==null){const a=Object.keys(t),u=Object.keys(e);return a.length!==u.length?!1:a.every(c=>t[c]===e[c])}return t===e}toRgba(){const[t,e,r,o]=this._components;return{r:t,g:e,b:r,a:o}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,r,o,a]=this._components;return t[0]=e,t[1]=r,t[2]=o,t[3]=a,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,r,o]=this._components;return t[0]=e,t[1]=r,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,e,r]=this.toUint8RgbArray();return(r<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,o,a]=ds._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=o,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,o=this._int>>8&255,a=this._int&255;return e&&(r=r*t+.5|0,o=o*t+.5|0,a=a*t+.5|0),(t*255<<24)+(r<<16)+(o<<8)+a}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,r,o,a;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;e=(u>>16&255)/255,r=(u>>8&255)/255,o=(u&255)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,o,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,o,a=255]=t,e/=255,r/=255,o/=255,a/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const c=ds.HEX_PATTERN.exec(t);c&&(t=`#${c[2]}`)}const u=dn(t);u.isValid()&&({r:e,g:r,b:o,a}=u.rgba,e/=255,r/=255,o/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=o,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((o,a)=>{t[a]=Math.min(Math.max(o,e),r)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ds||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};er.shared=new er;er._temp=new er;er.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Qt=er;const fv={cullArea:null,cullable:!1,cullableChildren:!0};class bh{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var r;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(r=e.init)==null||r.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class pv{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new bh(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const r=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[r]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const Tn=new pv,mv={get isCachedAsTexture(){var i;return!!((i=this.renderGroup)!=null&&i.isCachedAsTexture)},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){var i;(i=this.renderGroup)==null||i.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){Et("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function gv(i,t,e){const r=i.length;let o;if(t>=r||e===0)return;e=t+e>r?r-t:e;const a=r-e;for(o=t;o<a;++o)i[o]=i[o+e];i.length=a}const yv={allowChildren:!0,removeChildren(i=0,t){const e=t??this.children.length,r=e-i,o=[];if(r>0&&r<=e){for(let u=e-1;u>=i;u--){const c=this.children[u];c&&(o.push(c),c.parent=null)}gv(this.children,i,e);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(o);for(let u=0;u<o.length;++u)this.emit("childRemoved",o[u],this,u),o[u].emit("removed",this);return o}else if(r===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const t=this.getChildAt(i);return this.removeChild(t)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,t)},getChildIndex(i){const t=this.children.indexOf(i);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(i,t){this.allowChildren||Et(It,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${i}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(i.parent){const o=i.parent.children.indexOf(i);if(i.parent===this&&o===t)return i;o!==-1&&i.parent.children.splice(o,1)}t===e.length?e.push(i):e.splice(t,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,t),i.emit("added",this),i},swapChildren(i,t){if(i===t)return;const e=this.getChildIndex(i),r=this.getChildIndex(t);this.children[e]=t,this.children[r]=i;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(t=>this.reparentChildAt(t,this.children.length)),i[0])},reparentChildAt(i,t){if(i.parent===this)return this.setChildIndex(i,t),i;const e=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,t);const r=this.worldTransform.clone();return r.invert(),e.prepend(r),i.setFromMatrix(e),i}};class op{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class xv{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const r=this._tests[e];if(r.test(t))return Tn.get(r.maskClass,t)}return t}returnMaskEffect(t){Tn.return(t)}}const nh=new xv;ve.handleByList(ct.MaskEffect,nh._effectClasses);const vv={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((e,r)=>e.priority-r.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const t=this.effects.indexOf(i);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const t=this._maskEffect;(t==null?void 0:t.mask)!==i&&(t&&(this.removeEffect(t),nh.returnMaskEffect(t),this._maskEffect=null),i!=null&&(this._maskEffect=nh.getMaskEffect(i),this.addEffect(this._maskEffect)))},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},set filters(i){var a;!Array.isArray(i)&&i&&(i=[i]);const t=this._filterEffect||(this._filterEffect=new op);i=i;const e=(i==null?void 0:i.length)>0,r=((a=t.filters)==null?void 0:a.length)>0,o=e!==r;i=Array.isArray(i)?i.slice(0):i,t.filters=Object.freeze(i),o&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new op),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},wv={label:null,get name(){return Et(It,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){Et(It,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,t=!1){return this.getChildByLabel(i,t)},getChildByLabel(i,t=!1){const e=this.children;for(let r=0;r<e.length;r++){const o=e[r];if(o.label===i||i instanceof RegExp&&i.test(o.label))return o}if(t)for(let r=0;r<e.length;r++){const a=e[r].getChildByLabel(i,!0);if(a)return a}return null},getChildrenByLabel(i,t=!1,e=[]){const r=this.children;for(let o=0;o<r.length;o++){const a=r[o];(a.label===i||i instanceof RegExp&&i.test(a.label))&&e.push(a)}if(t)for(let o=0;o<r.length;o++)r[o].getChildrenByLabel(i,!0,e);return e}},xe=new bh(Tt),nr=new bh(yn);function Nm(i,t,e){e.clear();let r,o;return i.parent?t?r=i.parent.worldTransform:(o=xe.get().identity(),r=Ph(i,o)):r=Tt.IDENTITY,Dm(i,e,r,t),o&&xe.return(o),e.isValid||e.set(0,0,0,0),e}function Dm(i,t,e,r){var c,d;if(!i.visible||!i.measurable)return;let o;r?o=i.worldTransform:(i.updateLocalTransform(),o=xe.get(),o.appendFrom(i.localTransform,e));const a=t,u=!!i.effects.length;if(u&&(t=nr.get().clear()),i.boundsArea)t.addRect(i.boundsArea,o);else{i.bounds&&(t.matrix=o,t.addBounds(i.bounds));for(let p=0;p<i.children.length;p++)Dm(i.children[p],t,o,r)}if(u){for(let p=0;p<i.effects.length;p++)(d=(c=i.effects[p]).addBounds)==null||d.call(c,t);a.addBounds(t,Tt.IDENTITY),nr.return(t)}r||xe.return(o)}function Ph(i,t){const e=i.parent;return e&&(Ph(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function Wm(i,t){if(i===16777215||!t)return t;if(t===16777215||!i)return i;const e=i>>16&255,r=i>>8&255,o=i&255,a=t>>16&255,u=t>>8&255,c=t&255,d=e*a/255|0,p=r*u/255|0,m=o*c/255|0;return(d<<16)+(p<<8)+m}const ap=16777215;function lp(i,t){return i===ap?t:t===ap?i:Wm(i,t)}function Qo(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const _v={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(i,t){if(t)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const e=Ph(this,xe.get().identity());return i.appendFrom(this.localTransform,e),xe.return(e),i},getGlobalTint(i){if(i)return this.renderGroup?Qo(this.renderGroup.worldColor):this.parentRenderGroup?Qo(lp(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=lp(t,e.localColor),e=e.parent;return Qo(t)}};let ku=0;const up=500;function Zt(...i){ku!==up&&(ku++,ku===up?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}function Um(i,t,e){return t.clear(),e||(e=Tt.IDENTITY),Hm(i,t,e,i,!0),t.isValid||t.set(0,0,0,0),t}function Hm(i,t,e,r,o){var d,p;let a;if(o)a=xe.get(),a=e.copyTo(a);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const m=i.localTransform;a=xe.get(),a.appendFrom(m,e)}const u=t,c=!!i.effects.length;if(c&&(t=nr.get().clear()),i.boundsArea)t.addRect(i.boundsArea,a);else{i.renderPipeId&&(t.matrix=a,t.addBounds(i.bounds));const m=i.children;for(let y=0;y<m.length;y++)Hm(m[y],t,a,r,!1)}if(c){for(let m=0;m<i.effects.length;m++)(p=(d=i.effects[m]).addLocalBounds)==null||p.call(d,t,r);u.addBounds(t,Tt.IDENTITY),nr.return(t)}xe.return(a)}function jm(i,t){const e=i.children;for(let r=0;r<e.length;r++){const o=e[r],a=o.uid,u=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,c=t.index;(t.data[c]!==a||t.data[c+1]!==u)&&(t.data[t.index]=a,t.data[t.index+1]=u,t.didChange=!0),t.index=c+2,o.children.length&&jm(o,t)}return t.didChange}const Sv=new Tt,Cv={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=i/t*e:this.scale.x=e},_setHeight(i,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=i/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new yn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),jm(this,i),i.didChange&&Um(this,i.localBounds,Sv),i.localBounds},getBounds(i,t){return Nm(this,i,t||new yn)}},Av={_onRender:null,set onRender(i){const t=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},kv={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(bv))}};function bv(i,t){return i._zIndex-t._zIndex}const Pv={getGlobalPosition(i=new At,t=!1){return this.parent?this.parent.toGlobal(this._position,i,t):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,t,e=!1){const r=this.getGlobalTransform(xe.get(),e);return t=r.apply(i,t),xe.return(r),t},toLocal(i,t,e,r){t&&(i=t.toGlobal(i,e,r));const o=this.getGlobalTransform(xe.get(),r);return e=o.applyInverse(i,e),xe.return(o),e}};class Gm{constructor(){this.uid=ee("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Ev=0;class Tv{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,r){const o=new vn({...this.textureOptions,width:t,height:e,resolution:1,antialias:r,autoGarbageCollect:!0});return new bt({source:o,label:`texturePool_${Ev++}`})}getOptimalTexture(t,e,r=1,o){let a=Math.ceil(t*r-1e-6),u=Math.ceil(e*r-1e-6);a=sa(a),u=sa(u);const c=(a<<17)+(u<<1)+(o?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let d=this._texturePool[c].pop();return d||(d=this.createTexture(a,u,o)),d.source._resolution=r,d.source.width=a/r,d.source.height=u/r,d.source.pixelWidth=a,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=e,d.updateUvs(),this._poolKeyHash[d.uid]=c,d}getSameSizeTexture(t,e=!1){const r=t.source;return this.getOptimalTexture(t.width,t.height,r._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const r=this._texturePool[e];if(r)for(let o=0;o<r.length;o++)r[o].destroy(!0)}this._texturePool={}}}const Mv=new Tv;class Rv{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Tt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Gm,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let r=0;r<e.length;r++){const o=e[r];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Mv.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let r=0;r<e.length;r++)this.addChild(e[r])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let r=0;r<e.length;r++)this.removeChild(e[r])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let r=0;r<e.length;r++)this._getChildren(e[r],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const r=t.children;for(let o=0;o<r.length;o++)this._getChildren(r[o],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Tt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Tt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Tt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Iv(i,t,e={}){for(const r in t)!e[r]&&t[r]!==void 0&&(i[r]=t[r])}const bu=new Ee(null),Pu=new Ee(null),Eu=new Ee(null,1,1),hp=1,Fv=2,Tu=4;class Nt extends nn{constructor(t={}){var e,r;super(),this.uid=ee("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Tt,this.relativeGroupTransform=new Tt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ee(this,0,0),this._scale=Eu,this._pivot=Pu,this._skew=bu,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Iv(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(o=>this.addChild(o)),(r=t.parent)==null||r.addChild(this)}static mixin(t){Object.defineProperties(Nt.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Et(It,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const e=t[0],r=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),r&&(r.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,r&&r.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const e=t[0],r=this.children.indexOf(e);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,r),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Tn.get(Rv,this),this.groupTransform=Tt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Tn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Tt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*Yx}set angle(t){this.rotation=t*Xx}get pivot(){return this._pivot===Pu&&(this._pivot=new Ee(this,0,0)),this._pivot}set pivot(t){this._pivot===Pu&&(this._pivot=new Ee(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===bu&&(this._skew=new Ee(this,0,0)),this._skew}set skew(t){this._skew===bu&&(this._skew=new Ee(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Eu&&(this._scale=new Ee(this,1,1)),this._scale}set scale(t){this._scale===Eu&&(this._scale=new Ee(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const r=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,r.width),e!==void 0&&this._setHeight(e,r.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,r=this._scale,o=this._pivot,a=this._position,u=r._x,c=r._y,d=o._x,p=o._y;e.a=this._cx*u,e.b=this._sx*u,e.c=this._cy*c,e.d=this._sy*c,e.tx=a._x-(d*e.a+p*e.c),e.ty=a._y-(d*e.b+p*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=hp,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const r=Qt.shared.setValue(t??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=hp,this._onUpdate())}get tint(){return Qo(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Fv,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Tu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Tu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Tu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var o;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let a=0;a<e.length;++a)e[a].destroy(t);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}Nt.mixin(yv);Nt.mixin(Pv);Nt.mixin(Av);Nt.mixin(Cv);Nt.mixin(vv);Nt.mixin(wv);Nt.mixin(kv);Nt.mixin(fv);Nt.mixin(mv);Nt.mixin(_v);class Eh extends Nt{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new yn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:r,y:o}=t;return r>=e.minX&&r<=e.maxX&&o>=e.minY&&o<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}}class xn extends Eh{constructor(t=bt.EMPTY){t instanceof bt&&(t={texture:t});const{texture:e=bt.EMPTY,anchor:r,roundPixels:o,width:a,height:u,...c}=t;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ee({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=o??!1,a!==void 0&&(this.width=a),u!==void 0&&(this.height=u)}static from(t,e=!1){return t instanceof bt?new xn(t):new xn(bt.from(t,e))}set texture(t){t||(t=bt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return iv(this._visualBounds,this._anchor,this._texture,0),this._visualBounds}get sourceBounds(){return Et("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,r=this._bounds,{width:o,height:a}=e.orig;r.minX=-t._x*o,r.maxX=r.minX+o,r.minY=-t._y*a,r.maxY=r.minY+a}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(r)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const Lv=new yn;function Vm(i,t,e){const r=Lv;i.measurable=!0,Nm(i,e,r),t.addBoundsMask(r),i.measurable=!1}function $m(i,t,e){const r=nr.get();i.measurable=!0;const o=xe.get().identity(),a=Ym(i,e,o);Um(i,r,a),i.measurable=!1,t.addBoundsMask(r),xe.return(o),nr.return(r)}function Ym(i,t,e){return i?(i!==t&&(Ym(i.parent,t,e),i.updateLocalTransform(),e.append(i.localTransform)),e):(Zt("Mask bounds, renderable is not inside the root container"),e)}class Xm{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof xn),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||Vm(this.mask,t,e)}addLocalBounds(t,e){$m(this.mask,t,e)}containsPoint(t,e){const r=this.mask;return e(r,t)}destroy(){this.reset()}static test(t){return t instanceof xn}}Xm.extension=ct.MaskEffect;class qm{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}qm.extension=ct.MaskEffect;class Km{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Vm(this.mask,t,e)}addLocalBounds(t,e){$m(this.mask,t,e)}containsPoint(t,e){const r=this.mask;return e(r,t)}destroy(){this.reset()}static test(t){return t instanceof Nt}}Km.extension=ct.MaskEffect;const Ov={createCanvas:(i,t)=>{const e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let cp=Ov;const Vt={get(){return cp},set(i){cp=i}};class Qm extends vn{constructor(t){t.resource||(t.resource=Vt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,r=this._resolution){const o=super.resize(t,e,r);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Qm.extension=ct.TextureSource;class sr extends vn{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Vt.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,Zt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}sr.extension=ct.TextureSource;var ih=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(ih||{});class Mu{constructor(t,e=null,r=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=r,this._once=o}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Zm=class Oe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Mu(null,null,1/0),this.deltaMS=1/Oe.targetFPMS,this.elapsedMS=1/Oe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=ih.NORMAL){return this._addListener(new Mu(t,e,r))}addOnce(t,e,r=ih.NORMAL){return this._addListener(new Mu(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const a=t-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=t-a%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Oe.targetFPMS;const r=this._head;let o=r.next;for(;o;)o=o.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Oe.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Oe._shared){const t=Oe._shared=new Oe;t.autoStart=!0,t._protected=!0}return Oe._shared}static get system(){if(!Oe._system){const t=Oe._system=new Oe;t.autoStart=!0,t._protected=!0}return Oe._system}};Zm.targetFPMS=.06;let fs=Zm,Ru;async function Jm(){return Ru??(Ru=(async()=>{var u;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(c=>{const d=document.createElement("video");d.onloadeddata=()=>c(d),d.onerror=()=>c(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!e)return"premultiply-alpha-on-upload";const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const a=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o),t.deleteTexture(r),(u=t.getExtension("WEBGL_lose_context"))==null||u.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ru}const ca=class tg extends vn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...tg.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=fs.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Jm(),this._load=new Promise((r,o)=>{this.isValid?r(this):(this._resolve=r,this._reject=o,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(fs.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(fs.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(fs.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};ca.extension=ct.TextureSource;ca.defaultOptions={...vn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};ca.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Zo=ca;const en=(i,t,e=!1)=>(Array.isArray(i)||(i=[i]),t?i.map(r=>typeof r=="string"||e?t(r):r):i);class Bv{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Zt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=en(t);let o;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(e)){o=p.getCacheableAssets(r,e);break}}const a=new Map(Object.entries(o||{}));o||r.forEach(d=>{a.set(d,e)});const u=[...a.keys()],c={cacheKeys:u,keys:r};r.forEach(d=>{this._cacheMap.set(d,c)}),u.forEach(d=>{const p=o?o[d]:e;this._cache.has(d)&&this._cache.get(d)!==p&&Zt("[Cache] already has key:",d),this._cache.set(d,a.get(d))})}remove(t){if(!this._cacheMap.has(t)){Zt(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(o=>{this._cache.delete(o)}),e.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Gt=new Bv,rh=[];ve.handleByList(ct.TextureSource,rh);function eg(i={}){const t=i&&i.resource,e=t?i.resource:i,r=t?i:{resource:i};for(let o=0;o<rh.length;o++){const a=rh[o];if(a.test(e))return new a(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function zv(i={},t=!1){const e=i&&i.resource,r=e?i.resource:i,o=e?i:{resource:i};if(!t&&Gt.has(r))return Gt.get(r);const a=new bt({source:eg(o)});return a.on("destroy",()=>{Gt.has(r)&&Gt.remove(r)}),t||Gt.set(r,a),a}function Nv(i,t=!1){return typeof i=="string"?Gt.get(i):i instanceof vn?new bt({source:i}):zv(i,t)}bt.from=Nv;vn.from=eg;ve.add(Xm,qm,Km,Zo,sr,Qm,kh);var Jn=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Jn||{});function tn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Qr(i){return i.split("?")[0].split("#")[0]}function Dv(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wv(i,t,e){return i.replace(new RegExp(Dv(t),"g"),e)}function Uv(i,t){let e="",r=0,o=-1,a=0,u=-1;for(let c=0;c<=i.length;++c){if(c<i.length)u=i.charCodeAt(c);else{if(u===47)break;u=47}if(u===47){if(!(o===c-1||a===1))if(o!==c-1&&a===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",r=0):(e=e.slice(0,d),r=e.length-1-e.lastIndexOf("/")),o=c,a=0;continue}}else if(e.length===2||e.length===1){e="",r=0,o=c,a=0;continue}}}else e.length>0?e+=`/${i.slice(o+1,c)}`:e=i.slice(o+1,c),r=c-o-1;o=c,a=0}else u===46&&a!==-1?++a:a=-1}return e}const Be={toPosix(i){return Wv(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){tn(i),i=this.toPosix(i);const t=/^file:\/\/\//.exec(i);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(i);return e?e[0]:""},toAbsolute(i,t,e){if(tn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const r=Qr(this.toPosix(t??Vt.get().getBaseUrl())),o=Qr(this.toPosix(e??this.rootname(r)));return i=this.toPosix(i),i.startsWith("/")?Be.join(o,i.slice(1)):this.isAbsolute(i)?i:this.join(r,i)},normalize(i){if(tn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let t="";const e=i.startsWith("/");this.hasProtocol(i)&&(t=this.rootname(i),i=i.slice(t.length));const r=i.endsWith("/");return i=Uv(i),i.length>0&&r&&(i+="/"),e?`/${i}`:t+i},isAbsolute(i){return tn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let t;for(let e=0;e<i.length;++e){const r=i[e];if(tn(r),r.length>0)if(t===void 0)t=r;else{const o=i[e-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(i){if(tn(i),i.length===0)return".";i=this.toPosix(i);let t=i.charCodeAt(0);const e=t===47;let r=-1,o=!0;const a=this.getProtocol(i),u=i;i=i.slice(a.length);for(let c=i.length-1;c>=1;--c)if(t=i.charCodeAt(c),t===47){if(!o){r=c;break}}else o=!1;return r===-1?e?"/":this.isUrl(u)?a+i:a:e&&r===1?"//":a+i.slice(0,r)},rootname(i){tn(i),i=this.toPosix(i);let t="";if(i.startsWith("/")?t="/":t=this.getProtocol(i),this.isUrl(i)){const e=i.indexOf("/",t.length);e!==-1?t=i.slice(0,e):t=i,t.endsWith("/")||(t+="/")}return t},basename(i,t){tn(i),t&&tn(t),i=Qr(this.toPosix(i));let e=0,r=-1,o=!0,a;if(t!==void 0&&t.length>0&&t.length<=i.length){if(t.length===i.length&&t===i)return"";let u=t.length-1,c=-1;for(a=i.length-1;a>=0;--a){const d=i.charCodeAt(a);if(d===47){if(!o){e=a+1;break}}else c===-1&&(o=!1,c=a+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(r=a):(u=-1,r=c))}return e===r?r=c:r===-1&&(r=i.length),i.slice(e,r)}for(a=i.length-1;a>=0;--a)if(i.charCodeAt(a)===47){if(!o){e=a+1;break}}else r===-1&&(o=!1,r=a+1);return r===-1?"":i.slice(e,r)},extname(i){tn(i),i=Qr(this.toPosix(i));let t=-1,e=0,r=-1,o=!0,a=0;for(let u=i.length-1;u>=0;--u){const c=i.charCodeAt(u);if(c===47){if(!o){e=u+1;break}continue}r===-1&&(o=!1,r=u+1),c===46?t===-1?t=u:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||r===-1||a===0||a===1&&t===r-1&&t===e+1?"":i.slice(t,r)},parse(i){tn(i);const t={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return t;i=Qr(this.toPosix(i));let e=i.charCodeAt(0);const r=this.isAbsolute(i);let o;t.root=this.rootname(i),r||this.hasProtocol(i)?o=1:o=0;let a=-1,u=0,c=-1,d=!0,p=i.length-1,m=0;for(;p>=o;--p){if(e=i.charCodeAt(p),e===47){if(!d){u=p+1;break}continue}c===-1&&(d=!1,c=p+1),e===46?a===-1?a=p:m!==1&&(m=1):a!==-1&&(m=-1)}return a===-1||c===-1||m===0||m===1&&a===c-1&&a===u+1?c!==-1&&(u===0&&r?t.base=t.name=i.slice(1,c):t.base=t.name=i.slice(u,c)):(u===0&&r?(t.name=i.slice(1,a),t.base=i.slice(1,c)):(t.name=i.slice(u,a),t.base=i.slice(u,c)),t.ext=i.slice(a,c)),t.dir=this.dirname(i),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function ng(i,t,e,r,o){const a=t[e];for(let u=0;u<a.length;u++){const c=a[u];e<t.length-1?ng(i.replace(r[e],c),t,e+1,r,o):o.push(i.replace(r[e],c))}}function Hv(i){const t=/\{(.*?)\}/g,e=i.match(t),r=[];if(e){const o=[];e.forEach(a=>{const u=a.substring(1,a.length-1).split(",");o.push(u)}),ng(i,o,0,e,r)}else r.push(i);return r}const oa=i=>!Array.isArray(i);class or{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`).join("&")}}getAlias(t){const{alias:e,src:r}=t;return en(e||r,a=>typeof a=="string"?a:Array.isArray(a)?a.map(u=>(u==null?void 0:u.src)??u):a!=null&&a.src?a.src:a,!0)}addManifest(t){this._manifest&&Zt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const r=[];let o=e;Array.isArray(e)||(o=Object.entries(e).map(([a,u])=>typeof u=="string"||Array.isArray(u)?{alias:a,src:u}:{alias:a,...u})),o.forEach(a=>{const u=a.src,c=a.alias;let d;if(typeof c=="string"){const p=this._createBundleAssetId(t,c);r.push(p),d=[c,p]}else{const p=c.map(m=>this._createBundleAssetId(t,m));r.push(...p),d=[...c,...p]}this.add({...a,alias:d,src:u})}),this._bundles[t]=r}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let r;r=a=>{this.hasKey(a)&&Zt(`[Resolver] already has key: ${a} overwriting`)},en(e).forEach(a=>{const{src:u}=a;let{data:c,format:d,loadParser:p}=a;const m=en(u).map(v=>typeof v=="string"?Hv(v):Array.isArray(v)?v:[v]),y=this.getAlias(a);Array.isArray(y)?y.forEach(r):r(y);const w=[];m.forEach(v=>{v.forEach(S=>{let k={};if(typeof S!="object"){k.src=S;for(let _=0;_<this._parsers.length;_++){const R=this._parsers[_];if(R.test(S)){k=R.parse(S);break}}}else c=S.data??c,d=S.format??d,p=S.loadParser??p,k={...k,...S};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${k.src}`);k=this._buildResolvedAsset(k,{aliases:y,data:c,format:d,loadParser:p}),w.push(k)})}),y.forEach(v=>{this._assetMap[v]=w})})}resolveBundle(t){const e=oa(t);t=en(t);const r={};return t.forEach(o=>{const a=this._bundles[o];if(a){const u=this.resolve(a),c={};for(const d in u){const p=u[d];c[this._extractAssetIdFromBundle(o,d)]=p}r[o]=c}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const r={};for(const o in e)r[o]=e[o].src;return r}return e.src}resolve(t){const e=oa(t);t=en(t);const r={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let a=this._assetMap[o];const u=this._getPreferredOrder(a);u==null||u.priority.forEach(c=>{u.params[c].forEach(d=>{const p=a.filter(m=>m[c]?m[c]===d:!1);p.length&&(a=p)})}),this._resolverHash[o]=a[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});r[o]=this._resolverHash[o]}),e?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const r=t[0],o=this._preferredOrder.find(a=>a.params.format.includes(r.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:r,data:o,loadParser:a,format:u}=e;return(this._basePath||this._rootPath)&&(t.src=Be.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=a??t.loadParser,t.format=u??t.format??jv(t.src),t}}or.RETINA_PREFIX=/@([0-9\.]+)x/;function jv(i){return i.split(".").pop().split("?").shift().split("#").shift()}const sh=(i,t)=>{const e=t.split("?")[1];return e&&(i+=`?${e}`),i},ig=class ps{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof bt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const r=parseFloat(e.meta.scale);r?(this.resolution=r,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ps.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=ps.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const o=this._frameKeys[e],a=this._frames[o],u=a.frame;if(u){let c=null,d=null;const p=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,m=new Ht(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);a.rotated?c=new Ht(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):c=new Ht(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(d=new Ht(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new bt({source:this.textureSource,frame:c,orig:m,trim:d,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:o.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const o=t[e][r];this.animations[e].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ps.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ps.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};ig.BATCH_SIZE=1e3;let dp=ig;const Gv=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function rg(i,t,e){const r={};if(i.forEach(o=>{r[o]=t}),Object.keys(t.textures).forEach(o=>{r[o]=t.textures[o]}),!e){const o=Be.dirname(i[0]);t.linkedSheets.forEach((a,u)=>{const c=rg([`${o}/${t.data.meta.related_multi_packs[u]}`],a,!0);Object.assign(r,c)})}return r}const Vv={extension:ct.Asset,cache:{test:i=>i instanceof dp,getCacheableAssets:(i,t)=>rg(i,t,!1)},resolver:{extension:{type:ct.ResolveParser,name:"resolveSpritesheet"},test:i=>{const e=i.split("?")[0].split("."),r=e.pop(),o=e.pop();return r==="json"&&Gv.includes(o)},parse:i=>{var e;const t=i.split(".");return{resolution:parseFloat(((e=or.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:t[t.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:ct.LoadParser,priority:Jn.Normal,name:"spritesheetLoader"},async testParse(i,t){return Be.extname(t.src).toLowerCase()===".json"&&!!i.frames},async parse(i,t,e){var p,m;const{texture:r,imageFilename:o}=(t==null?void 0:t.data)??{};let a=Be.dirname(t.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let u;if(r instanceof bt)u=r;else{const y=sh(a+(o??i.meta.image),t.src);u=(await e.load([y]))[y]}const c=new dp(u.source,i);await c.parse();const d=(p=i==null?void 0:i.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(d)){const y=[];for(const v of d){if(typeof v!="string")continue;let S=a+v;(m=t.data)!=null&&m.ignoreMultiPack||(S=sh(S,t.src),y.push(e.load({src:S,data:{ignoreMultiPack:!0}})))}const w=await Promise.all(y);c.linkedSheets=w,w.forEach(v=>{v.linkedSheets=[c].concat(c.linkedSheets.filter(S=>S!==v))})}return c},async unload(i,t,e){await e.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};ve.add(Vv);const Iu=Object.create(null),fp=Object.create(null);function Th(i,t){let e=fp[i];return e===void 0&&(Iu[t]===void 0&&(Iu[t]=1),fp[i]=e=Iu[t]++),e}let qi;function sg(){return(!qi||qi!=null&&qi.isContextLost())&&(qi=Vt.get().createCanvas().getContext("webgl",{})),qi}let Go;function $v(){if(!Go){Go="mediump";const i=sg();i&&i.getShaderPrecisionFormat&&(Go=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Go}function Yv(i,t,e){return t?i:e?(i=i.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function Xv(i,t,e){const r=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let o=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&r!=="highp"&&(o="mediump"),`precision ${o} float;
${i}`}else if(r!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function qv(i,t){return t?`#version 300 es
${i}`:i}const Kv={},Qv={};function Zv(i,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const r=e?Kv:Qv;return r[t]?(r[t]++,t+=`-${r[t]}`):r[t]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${t}`}
${i}`}function Jv(i,t){return t?i.replace("#version 300 es",""):i}const Fu={stripVersion:Jv,ensurePrecision:Xv,addProgramDefines:Yv,setProgramName:Zv,insertVersion:qv},Lu=Object.create(null),og=class oh{constructor(t){t={...oh.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:$v()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let o=t.fragment,a=t.vertex;Object.keys(Fu).forEach(u=>{const c=r[u];o=Fu[u](o,c,!0),a=Fu[u](a,c,!1)}),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Th(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Lu[e]||(Lu[e]=new oh(t)),Lu[e]}};og.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ag=og;const pp={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function t1(i){return pp[i]??pp.float32}const e1={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function n1({source:i,entryPoint:t}){const e={},r=i.indexOf(`fn ${t}`);if(r!==-1){const o=i.indexOf("->",r);if(o!==-1){const a=i.substring(r,o),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=u.exec(a))!==null;){const d=e1[c[3]]??"float32";e[c[2]]={location:parseInt(c[1],10),format:d,stride:t1(d).stride,offset:0,instance:!1,start:0}}}}return e}function Ou(i){var y,w;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=(y=i.match(t))==null?void 0:y.map(v=>({group:parseInt(v.match(e)[1],10),binding:parseInt(v.match(r)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(a)[1]}));if(!p)return{groups:[],structs:[]};const m=((w=i.match(u))==null?void 0:w.map(v=>{const S=v.match(d)[1],k=v.match(c).reduce((_,R)=>{const[O,B]=R.split(":");return _[O.trim()]=B.trim(),_},{});return k?{name:S,members:k}:null}).filter(({name:v})=>p.some(S=>S.type===v)))??[];return{groups:p,structs:m}}var ms=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(ms||{});function i1({groups:i}){const t=[];for(let e=0;e<i.length;e++){const r=i[e];t[r.group]||(t[r.group]=[]),r.isUniform?t[r.group].push({binding:r.binding,visibility:ms.VERTEX|ms.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?t[r.group].push({binding:r.binding,visibility:ms.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"&&t[r.group].push({binding:r.binding,visibility:ms.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function r1({groups:i}){const t=[];for(let e=0;e<i.length;e++){const r=i[e];t[r.group]||(t[r.group]={}),t[r.group][r.name]=r.binding}return t}function s1(i,t){const e=new Set,r=new Set,o=[...i.structs,...t.structs].filter(u=>e.has(u.name)?!1:(e.add(u.name),!0)),a=[...i.groups,...t.groups].filter(u=>{const c=`${u.name}-${u.binding}`;return r.has(c)?!1:(r.add(c),!0)});return{structs:o,groups:a}}const Bu=Object.create(null);class da{constructor(t){var c,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:r,layout:o,gpuLayout:a,name:u}=t;if(this.name=u,this.fragment=e,this.vertex=r,e.source===r.source){const p=Ou(e.source);this.structsAndGroups=p}else{const p=Ou(r.source),m=Ou(e.source);this.structsAndGroups=s1(p,m)}this.layout=o??r1(this.structsAndGroups),this.gpuLayout=a??i1(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,r=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=Th(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=n1(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Bu[e]||(Bu[e]=new da(t)),Bu[e]}}const lg=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],o1=lg.reduce((i,t)=>(i[t]=!0,i),{});function a1(i,t){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ug=class hg{constructor(t,e){this._touched=0,this.uid=ee("uniform"),this._resourceType="uniformGroup",this._resourceId=ee("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...hg.defaultOptions,...e},this.uniformStructures=t;const r={};for(const o in t){const a=t[o];if(a.name=o,a.size=a.size??1,!o1[a.type])throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${lg.join(", ")}`);a.value??(a.value=a1(a.type,a.size)),r[o]=a.value}this.uniforms=r,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=Th(Object.keys(r).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};ug.defaultOptions={ubo:!1,isStatic:!1};let cg=ug;class Jo{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const r in t){const o=t[r];this.setResource(o,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const r in this.resources)t[e++]=this.resources[r]._resourceId;this._key=t.join("|")}setResource(t,e){var o,a;const r=this.resources[e];t!==r&&(r&&((o=t.off)==null||o.call(t,"change",this.onResourceChange,this)),(a=t.on)==null||a.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const r in e)e[r]._touched=t}destroy(){var e;const t=this.resources;for(const r in t){const o=t[r];(e=o.off)==null||e.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const r in e)e[r]===t&&(e[r]=null)}else this._updateKey()}}var ah=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(ah||{});class Mh extends nn{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:r,groups:o,resources:a,compatibleRenderers:u,groupMap:c}=t;this.gpuProgram=e,this.glProgram=r,u===void 0&&(u=0,e&&(u|=ah.WEBGPU),r&&(u|=ah.WEBGL)),this.compatibleRenderers=u;const d={};if(!a&&!o&&(a={}),a&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&o&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&o&&c)for(const p in c)for(const m in c[p]){const y=c[p][m];d[y]={group:p,binding:m,name:y}}else if(e&&o&&!c){const p=e.structsAndGroups.groups;c={},p.forEach(m=>{c[m.group]=c[m.group]||{},c[m.group][m.binding]=m.name,d[m.name]=m})}else if(a){o={},c={},e&&e.structsAndGroups.groups.forEach(y=>{c[y.group]=c[y.group]||{},c[y.group][y.binding]=y.name,d[y.name]=y});let p=0;for(const m in a)d[m]||(o[99]||(o[99]=new Jo,this._ownedBindGroups.push(o[99])),d[m]={group:99,binding:p,name:m},c[99]=c[99]||{},c[99][p]=m,p++);for(const m in a){const y=m;let w=a[m];!w.source&&!w._resourceType&&(w=new cg(w));const v=d[y];v&&(o[v.group]||(o[v.group]=new Jo,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(w,v.binding))}}this.groups=o,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(o,d)}addResource(t,e,r){var o,a;(o=this._uniformBindMap)[e]||(o[e]={}),(a=this._uniformBindMap[e])[r]||(a[r]=t),this.groups[e]||(this.groups[e]=new Jo,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const r={};for(const o in e){const a=e[o];Object.defineProperty(r,a.name,{get(){return t[a.group].getResource(a.binding)},set(u){t[a.group].setResource(u,a.binding)}})}return r}destroy(t=!1){var e,r;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(r=this.glProgram)==null||r.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:r,...o}=t;let a,u;return e&&(a=da.from(e)),r&&(u=ag.from(r)),new Mh({gpuProgram:a,glProgram:u,...o})}}const lh=[];ve.handleByNamedList(ct.Environment,lh);async function l1(i){if(!i)for(let t=0;t<lh.length;t++){const e=lh[t];if(e.value.test()){await e.value.load();return}}}let Zr;function u1(){if(typeof Zr=="boolean")return Zr;try{Zr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Zr=!1}return Zr}var Vo={exports:{}},mp;function h1(){if(mp)return Vo.exports;mp=1,Vo.exports=i,Vo.exports.default=i;function i(A,E,b){b=b||2;var F=E&&E.length,L=F?E[0]*b:A.length,C=t(A,0,L,b,!0),M=[];if(!C||C.next===C.prev)return M;var V,K,Q,ot,ht,st,gt;if(F&&(C=d(A,E,C,b)),A.length>80*b){V=Q=A[0],K=ot=A[1];for(var yt=b;yt<L;yt+=b)ht=A[yt],st=A[yt+1],ht<V&&(V=ht),st<K&&(K=st),ht>Q&&(Q=ht),st>ot&&(ot=st);gt=Math.max(Q-V,ot-K),gt=gt!==0?32767/gt:0}return r(C,M,b,V,K,gt,0),M}function t(A,E,b,F,L){var C,M;if(L===qt(A,E,b,F)>0)for(C=E;C<b;C+=F)M=_t(C,A[C],A[C+1],M);else for(C=b-F;C>=E;C-=F)M=_t(C,A[C],A[C+1],M);return M&&D(M,M.next)&&(xt(M),M=M.next),M}function e(A,E){if(!A)return A;E||(E=A);var b=A,F;do if(F=!1,!b.steiner&&(D(b,b.next)||B(b.prev,b,b.next)===0)){if(xt(b),b=E=b.prev,b===b.next)break;F=!0}else b=b.next;while(F||b!==E);return E}function r(A,E,b,F,L,C,M){if(A){!M&&C&&v(A,F,L,C);for(var V=A,K,Q;A.prev!==A.next;){if(K=A.prev,Q=A.next,C?a(A,F,L,C):o(A)){E.push(K.i/b|0),E.push(A.i/b|0),E.push(Q.i/b|0),xt(A),A=Q.next,V=Q.next;continue}if(A=Q,A===V){M?M===1?(A=u(e(A),E,b),r(A,E,b,F,L,C,2)):M===2&&c(A,E,b,F,L,C):r(e(A),E,b,F,L,C,1);break}}}}function o(A){var E=A.prev,b=A,F=A.next;if(B(E,b,F)>=0)return!1;for(var L=E.x,C=b.x,M=F.x,V=E.y,K=b.y,Q=F.y,ot=L<C?L<M?L:M:C<M?C:M,ht=V<K?V<Q?V:Q:K<Q?K:Q,st=L>C?L>M?L:M:C>M?C:M,gt=V>K?V>Q?V:Q:K>Q?K:Q,yt=F.next;yt!==E;){if(yt.x>=ot&&yt.x<=st&&yt.y>=ht&&yt.y<=gt&&R(L,V,C,K,M,Q,yt.x,yt.y)&&B(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function a(A,E,b,F){var L=A.prev,C=A,M=A.next;if(B(L,C,M)>=0)return!1;for(var V=L.x,K=C.x,Q=M.x,ot=L.y,ht=C.y,st=M.y,gt=V<K?V<Q?V:Q:K<Q?K:Q,yt=ot<ht?ot<st?ot:st:ht<st?ht:st,we=V>K?V>Q?V:Q:K>Q?K:Q,ue=ot>ht?ot>st?ot:st:ht>st?ht:st,me=k(gt,yt,E,b,F),_e=k(we,ue,E,b,F),wt=A.prevZ,Ct=A.nextZ;wt&&wt.z>=me&&Ct&&Ct.z<=_e;){if(wt.x>=gt&&wt.x<=we&&wt.y>=yt&&wt.y<=ue&&wt!==L&&wt!==M&&R(V,ot,K,ht,Q,st,wt.x,wt.y)&&B(wt.prev,wt,wt.next)>=0||(wt=wt.prevZ,Ct.x>=gt&&Ct.x<=we&&Ct.y>=yt&&Ct.y<=ue&&Ct!==L&&Ct!==M&&R(V,ot,K,ht,Q,st,Ct.x,Ct.y)&&B(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;wt&&wt.z>=me;){if(wt.x>=gt&&wt.x<=we&&wt.y>=yt&&wt.y<=ue&&wt!==L&&wt!==M&&R(V,ot,K,ht,Q,st,wt.x,wt.y)&&B(wt.prev,wt,wt.next)>=0)return!1;wt=wt.prevZ}for(;Ct&&Ct.z<=_e;){if(Ct.x>=gt&&Ct.x<=we&&Ct.y>=yt&&Ct.y<=ue&&Ct!==L&&Ct!==M&&R(V,ot,K,ht,Q,st,Ct.x,Ct.y)&&B(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function u(A,E,b){var F=A;do{var L=F.prev,C=F.next.next;!D(L,C)&&G(L,F,F.next,C)&&dt(L,C)&&dt(C,L)&&(E.push(L.i/b|0),E.push(F.i/b|0),E.push(C.i/b|0),xt(F),xt(F.next),F=A=C),F=F.next}while(F!==A);return e(F)}function c(A,E,b,F,L,C){var M=A;do{for(var V=M.next.next;V!==M.prev;){if(M.i!==V.i&&O(M,V)){var K=tt(M,V);M=e(M,M.next),K=e(K,K.next),r(M,E,b,F,L,C,0),r(K,E,b,F,L,C,0);return}V=V.next}M=M.next}while(M!==A)}function d(A,E,b,F){var L=[],C,M,V,K,Q;for(C=0,M=E.length;C<M;C++)V=E[C]*F,K=C<M-1?E[C+1]*F:A.length,Q=t(A,V,K,F,!1),Q===Q.next&&(Q.steiner=!0),L.push(_(Q));for(L.sort(p),C=0;C<L.length;C++)b=m(L[C],b);return b}function p(A,E){return A.x-E.x}function m(A,E){var b=y(A,E);if(!b)return E;var F=tt(b,A);return e(F,F.next),e(b,b.next)}function y(A,E){var b=E,F=A.x,L=A.y,C=-1/0,M;do{if(L<=b.y&&L>=b.next.y&&b.next.y!==b.y){var V=b.x+(L-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(V<=F&&V>C&&(C=V,M=b.x<b.next.x?b:b.next,V===F))return M}b=b.next}while(b!==E);if(!M)return null;var K=M,Q=M.x,ot=M.y,ht=1/0,st;b=M;do F>=b.x&&b.x>=Q&&F!==b.x&&R(L<ot?F:C,L,Q,ot,L<ot?C:F,L,b.x,b.y)&&(st=Math.abs(L-b.y)/(F-b.x),dt(b,A)&&(st<ht||st===ht&&(b.x>M.x||b.x===M.x&&w(M,b)))&&(M=b,ht=st)),b=b.next;while(b!==K);return M}function w(A,E){return B(A.prev,A,E.prev)<0&&B(E.next,A,A.next)<0}function v(A,E,b,F){var L=A;do L.z===0&&(L.z=k(L.x,L.y,E,b,F)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==A);L.prevZ.nextZ=null,L.prevZ=null,S(L)}function S(A){var E,b,F,L,C,M,V,K,Q=1;do{for(b=A,A=null,C=null,M=0;b;){for(M++,F=b,V=0,E=0;E<Q&&(V++,F=F.nextZ,!!F);E++);for(K=Q;V>0||K>0&&F;)V!==0&&(K===0||!F||b.z<=F.z)?(L=b,b=b.nextZ,V--):(L=F,F=F.nextZ,K--),C?C.nextZ=L:A=L,L.prevZ=C,C=L;b=F}C.nextZ=null,Q*=2}while(M>1);return A}function k(A,E,b,F,L){return A=(A-b)*L|0,E=(E-F)*L|0,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,A|E<<1}function _(A){var E=A,b=A;do(E.x<b.x||E.x===b.x&&E.y<b.y)&&(b=E),E=E.next;while(E!==A);return b}function R(A,E,b,F,L,C,M,V){return(L-M)*(E-V)>=(A-M)*(C-V)&&(A-M)*(F-V)>=(b-M)*(E-V)&&(b-M)*(C-V)>=(L-M)*(F-V)}function O(A,E){return A.next.i!==E.i&&A.prev.i!==E.i&&!nt(A,E)&&(dt(A,E)&&dt(E,A)&&J(A,E)&&(B(A.prev,A,E.prev)||B(A,E.prev,E))||D(A,E)&&B(A.prev,A,A.next)>0&&B(E.prev,E,E.next)>0)}function B(A,E,b){return(E.y-A.y)*(b.x-E.x)-(E.x-A.x)*(b.y-E.y)}function D(A,E){return A.x===E.x&&A.y===E.y}function G(A,E,b,F){var L=j(B(A,E,b)),C=j(B(A,E,F)),M=j(B(b,F,A)),V=j(B(b,F,E));return!!(L!==C&&M!==V||L===0&&H(A,b,E)||C===0&&H(A,F,E)||M===0&&H(b,A,F)||V===0&&H(b,E,F))}function H(A,E,b){return E.x<=Math.max(A.x,b.x)&&E.x>=Math.min(A.x,b.x)&&E.y<=Math.max(A.y,b.y)&&E.y>=Math.min(A.y,b.y)}function j(A){return A>0?1:A<0?-1:0}function nt(A,E){var b=A;do{if(b.i!==A.i&&b.next.i!==A.i&&b.i!==E.i&&b.next.i!==E.i&&G(b,b.next,A,E))return!0;b=b.next}while(b!==A);return!1}function dt(A,E){return B(A.prev,A,A.next)<0?B(A,E,A.next)>=0&&B(A,A.prev,E)>=0:B(A,E,A.prev)<0||B(A,A.next,E)<0}function J(A,E){var b=A,F=!1,L=(A.x+E.x)/2,C=(A.y+E.y)/2;do b.y>C!=b.next.y>C&&b.next.y!==b.y&&L<(b.next.x-b.x)*(C-b.y)/(b.next.y-b.y)+b.x&&(F=!F),b=b.next;while(b!==A);return F}function tt(A,E){var b=new Mt(A.i,A.x,A.y),F=new Mt(E.i,E.x,E.y),L=A.next,C=E.prev;return A.next=E,E.prev=A,b.next=L,L.prev=b,F.next=b,b.prev=F,C.next=F,F.prev=C,F}function _t(A,E,b,F){var L=new Mt(A,E,b);return F?(L.next=F.next,L.prev=F,F.next.prev=L,F.next=L):(L.prev=L,L.next=L),L}function xt(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Mt(A,E,b){this.i=A,this.x=E,this.y=b,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(A,E,b,F){var L=E&&E.length,C=L?E[0]*b:A.length,M=Math.abs(qt(A,0,C,b));if(L)for(var V=0,K=E.length;V<K;V++){var Q=E[V]*b,ot=V<K-1?E[V+1]*b:A.length;M-=Math.abs(qt(A,Q,ot,b))}var ht=0;for(V=0;V<F.length;V+=3){var st=F[V]*b,gt=F[V+1]*b,yt=F[V+2]*b;ht+=Math.abs((A[st]-A[yt])*(A[gt+1]-A[st+1])-(A[st]-A[gt])*(A[yt+1]-A[st+1]))}return M===0&&ht===0?0:Math.abs((ht-M)/M)};function qt(A,E,b,F){for(var L=0,C=E,M=b-F;C<b;C+=F)L+=(A[M]-A[C])*(A[C+1]+A[M+1]),M=C;return L}return i.flatten=function(A){for(var E=A[0][0].length,b={vertices:[],holes:[],dimensions:E},F=0,L=0;L<A.length;L++){for(var C=0;C<A[L].length;C++)for(var M=0;M<E;M++)b.vertices.push(A[L][C][M]);L>0&&(F+=A[L-1].length,b.holes.push(F))}return b},Vo.exports}var c1=h1();const d1=ha(c1);var dg=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(dg||{});let f1=class{constructor(t){this.items=[],this._name=t}emit(t,e,r,o,a,u,c,d){const{name:p,items:m}=this;for(let y=0,w=m.length;y<w;y++)m[y][p](t,e,r,o,a,u,c,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}};const p1=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],fg=class pg extends nn{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...p1,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await l1(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const r in this._systemsHash)t={...this._systemsHash[r].constructor.defaultOptions,...t};t={...pg.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(t);this._initOptions=t}render(t,e){let r=t;if(r instanceof Nt&&(r={container:r},e&&(Et(It,"passing a second argument is deprecated, please use render options instead"),r.target=e.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor=this.background.colorRgba),r.clearColor){const o=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=o?r.clearColor:Qt.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(t,e,r){const o=this.view.resolution;this.view.resize(t,e,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==o&&this.runners.resolutionChange.emit(r)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=dg.ALL);const{clear:r,clearColor:o,target:a}=t;Qt.shared.setValue(o??this.background.colorRgba),e.renderTarget.clear(a,r,Qt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new f1(e)})}_addSystems(t){let e;for(e in t){const r=t[e];this._addSystem(r.value,r.name)}}_addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const o in this.runners)this.runners[o].add(r);return this}_addPipes(t,e){const r=e.reduce((o,a)=>(o[a.name]=a.value,o),{});t.forEach(o=>{const a=o.value,u=o.name,c=r[u];this.renderPipes[u]=new a(this,c?new c:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!u1())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};fg.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let mg=fg,$o;function m1(i){return $o!==void 0||($o=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:i??mg.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Vt.get().getWebGLRenderingContext())return!1;let o=Vt.get().createCanvas().getContext("webgl",t);const a=!!((e=o==null?void 0:o.getContextAttributes())!=null&&e.stencil);if(o){const u=o.getExtension("WEBGL_lose_context");u&&u.loseContext()}return o=null,a}catch{return!1}})()),$o}let Yo;async function g1(i={}){return Yo!==void 0||(Yo=await(async()=>{const t=Vt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Yo}const gp=["webgl","webgpu","canvas"];async function y1(i){let t=[];i.preference?(t.push(i.preference),gp.forEach(a=>{a!==i.preference&&t.push(a)})):t=gp.slice();let e,r={};for(let a=0;a<t.length;a++){const u=t[a];if(u==="webgpu"&&await g1()){const{WebGPURenderer:c}=await ra(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-CrH4V9S6.js");return{WebGPURenderer:d}},__vite__mapDeps([3,2,4]));e=c,r={...i,...i.webgpu};break}else if(u==="webgl"&&m1(i.failIfMajorPerformanceCaveat??mg.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await ra(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BL_rBpH0.js");return{WebGLRenderer:d}},__vite__mapDeps([5,2,4]));e=c,r={...i,...i.webgl};break}else if(u==="canvas")throw r={...i},new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!e)throw new Error("No available renderer for the current environment");const o=new e;return await o.init(r),o}const gg="8.6.6";class yg{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,gg)}static destroy(){}}yg.extension=ct.Application;class x1{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,gg)}destroy(){this._renderer=null}}x1.extension={type:[ct.WebGLSystem,ct.WebGPUSystem],name:"initHook",priority:-10};const xg=class uh{constructor(...t){this.stage=new Nt,t[0]!==void 0&&Et(It,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await y1(t),uh._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Et(It,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const r=uh._plugins.slice(0);r.reverse(),r.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};xg._plugins=[];let vg=xg;ve.handleByList(ct.Application,vg._plugins);ve.add(yg);class wg extends nn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Et(It,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Et(It,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Et(It,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Et(It,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Et(It,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const r in this.chars)(e=this.chars[r].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(r=>r.texture.destroy(!0)),this.pages=null)}}const _g=class hh{constructor(t,e,r,o){this.uid=ee("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=r,this.y1=o}addColorStop(t,e){return this.gradientStops.push({offset:t,color:Qt.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const t=hh.defaultTextureSize,{gradientStops:e}=this,r=Vt.get().createCanvas();r.width=t,r.height=t;const o=r.getContext("2d"),a=o.createLinearGradient(0,0,hh.defaultTextureSize,1);for(let k=0;k<e.length;k++){const _=e[k];a.addColorStop(_.offset,_.color)}o.fillStyle=a,o.fillRect(0,0,t,t),this.texture=new bt({source:new sr({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:u,y0:c,x1:d,y1:p}=this,m=new Tt,y=d-u,w=p-c,v=Math.sqrt(y*y+w*w),S=Math.atan2(w,y);m.translate(-u,-c),m.scale(1/t,1/t),m.rotate(-S),m.scale(256/v,1),this.transform=m,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(o=>`${o.offset}-${o.color}`).join("-"),e=this.texture.uid,r=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${r}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};_g.defaultTextureSize=256;let ws=_g;const yp={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class fa{constructor(t,e){this.uid=ee("fillPattern"),this.transform=new Tt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=yp[e].addressModeU,t.source.style.addressModeV=yp[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var zu,xp;function v1(){if(xp)return zu;xp=1,zu=e;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(a){var u=[];return a.replace(t,function(c,d,p){var m=d.toLowerCase();for(p=o(p),m=="m"&&p.length>2&&(u.push([d].concat(p.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(p.length==i[m])return p.unshift(d),u.push(p);if(p.length<i[m])throw new Error("malformed path data");u.push([d].concat(p.splice(0,i[m])))}}),u}var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(a){var u=a.match(r);return u?u.map(Number):[]}return zu}var w1=v1();const _1=ha(w1);function S1(i,t){const e=_1(i),r=[];let o=null,a=0,u=0;for(let c=0;c<e.length;c++){const d=e[c],p=d[0],m=d;switch(p){case"M":a=m[1],u=m[2],t.moveTo(a,u);break;case"m":a+=m[1],u+=m[2],t.moveTo(a,u);break;case"H":a=m[1],t.lineTo(a,u);break;case"h":a+=m[1],t.lineTo(a,u);break;case"V":u=m[1],t.lineTo(a,u);break;case"v":u+=m[1],t.lineTo(a,u);break;case"L":a=m[1],u=m[2],t.lineTo(a,u);break;case"l":a+=m[1],u+=m[2],t.lineTo(a,u);break;case"C":a=m[5],u=m[6],t.bezierCurveTo(m[1],m[2],m[3],m[4],a,u);break;case"c":t.bezierCurveTo(a+m[1],u+m[2],a+m[3],u+m[4],a+m[5],u+m[6]),a+=m[5],u+=m[6];break;case"S":a=m[3],u=m[4],t.bezierCurveToShort(m[1],m[2],a,u);break;case"s":t.bezierCurveToShort(a+m[1],u+m[2],a+m[3],u+m[4]),a+=m[3],u+=m[4];break;case"Q":a=m[3],u=m[4],t.quadraticCurveTo(m[1],m[2],a,u);break;case"q":t.quadraticCurveTo(a+m[1],u+m[2],a+m[3],u+m[4]),a+=m[3],u+=m[4];break;case"T":a=m[1],u=m[2],t.quadraticCurveToShort(a,u);break;case"t":a+=m[1],u+=m[2],t.quadraticCurveToShort(a,u);break;case"A":a=m[6],u=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],a,u);break;case"a":a+=m[6],u+=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],a,u);break;case"Z":case"z":t.closePath(),r.length>0&&(o=r.pop(),o?(a=o.startX,u=o.startY):(a=0,u=0)),o=null;break;default:Zt(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&o===null&&(o={startX:a,startY:u},r.push(o))}return t}class Rh{constructor(t=0,e=0,r=0){this.type="circle",this.x=t,this.y=e,this.radius=r}clone(){return new Rh(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let o=this.x-t,a=this.y-e;return o*=o,a*=a,o+a<=r}strokeContains(t,e,r,o=.5){if(this.radius===0)return!1;const a=this.x-t,u=this.y-e,c=this.radius,d=(1-o)*r,p=Math.sqrt(a*a+u*u);return p<=c+d&&p>c-(r-d)}getBounds(t){return t||(t=new Ht),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ih{constructor(t=0,e=0,r=0,o=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=r,this.halfHeight=o}clone(){return new Ih(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(t-this.x)/this.halfWidth,o=(e-this.y)/this.halfHeight;return r*=r,o*=o,r+o<=1}strokeContains(t,e,r,o=.5){const{halfWidth:a,halfHeight:u}=this;if(a<=0||u<=0)return!1;const c=r*(1-o),d=r-c,p=a-d,m=u-d,y=a+c,w=u+c,v=t-this.x,S=e-this.y,k=v*v/(p*p)+S*S/(m*m),_=v*v/(y*y)+S*S/(w*w);return k>1&&_<=1}getBounds(t){return t||(t=new Ht),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function C1(i,t,e,r,o,a){const u=i-e,c=t-r,d=o-e,p=a-r,m=u*d+c*p,y=d*d+p*p;let w=-1;y!==0&&(w=m/y);let v,S;w<0?(v=e,S=r):w>1?(v=o,S=a):(v=e+w*d,S=r+w*p);const k=i-v,_=t-S;return k*k+_*_}class ys{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const r=[];for(let o=0,a=e.length;o<a;o++)r.push(e[o].x,e[o].y);e=r}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new ys(t);return e.closePath=this.closePath,e}contains(t,e){let r=!1;const o=this.points.length/2;for(let a=0,u=o-1;a<o;u=a++){const c=this.points[a*2],d=this.points[a*2+1],p=this.points[u*2],m=this.points[u*2+1];d>e!=m>e&&t<(p-c)*((e-d)/(m-d))+c&&(r=!r)}return r}strokeContains(t,e,r,o=.5){const a=r*r,u=a*(1-o),c=a-u,{points:d}=this,p=d.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const y=d[m],w=d[m+1],v=d[(m+2)%d.length],S=d[(m+3)%d.length],k=C1(t,e,y,w,v,S),_=Math.sign((v-y)*(e-w)-(S-w)*(t-y));if(k<=(_<0?c:u))return!0}return!1}getBounds(t){t||(t=new Ht);const e=this.points;let r=1/0,o=-1/0,a=1/0,u=-1/0;for(let c=0,d=e.length;c<d;c+=2){const p=e[c],m=e[c+1];r=p<r?p:r,o=p>o?p:o,a=m<a?m:a,u=m>u?m:u}return t.x=r,t.width=o-r,t.y=a,t.height=u-a,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Xo=(i,t,e,r,o,a,u)=>{const c=i-e,d=t-r,p=Math.sqrt(c*c+d*d);return p>=o-a&&p<=o+u};class Fh{constructor(t=0,e=0,r=0,o=0,a=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=r,this.height=o,this.radius=a}getBounds(t){return t||(t=new Ht),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Fh(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let o=t-(this.x+r),a=e-(this.y+r);const u=r*r;if(o*o+a*a<=u||(o=t-(this.x+this.width-r),o*o+a*a<=u)||(a=e-(this.y+this.height-r),o*o+a*a<=u)||(o=t-(this.x+r),o*o+a*a<=u))return!0}return!1}strokeContains(t,e,r,o=.5){const{x:a,y:u,width:c,height:d,radius:p}=this,m=r*(1-o),y=r-m,w=a+p,v=u+p,S=c-p*2,k=d-p*2,_=a+c,R=u+d;return(t>=a-m&&t<=a+y||t>=_-y&&t<=_+m)&&e>=v&&e<=v+k||(e>=u-m&&e<=u+y||e>=R-y&&e<=R+m)&&t>=w&&t<=w+S?!0:t<w&&e<v&&Xo(t,e,w,v,p,y,m)||t>_-p&&e<v&&Xo(t,e,_-p,v,p,y,m)||t>_-p&&e>R-p&&Xo(t,e,_-p,R-p,p,y,m)||t<w&&e>R-p&&Xo(t,e,w,R-p,p,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const A1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function k1(i){let t="";for(let e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+=`if(test == ${e}.0){}`);return t}function b1(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const r=A1.replace(/%forloop%/gi,k1(i));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}}finally{t.deleteShader(e)}return i}let Ki=null;function Sg(){var t;if(Ki)return Ki;const i=sg();return Ki=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Ki=b1(Ki,i),(t=i.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Ki}const Cg={};function P1(i,t){let e=2166136261;for(let r=0;r<t;r++)e^=i[r].uid,e=Math.imul(e,16777619),e>>>=0;return Cg[e]||E1(i,t,e)}let Nu=0;function E1(i,t,e){const r={};let o=0;Nu||(Nu=Sg());for(let u=0;u<Nu;u++){const c=u<t?i[u]:bt.EMPTY.source;r[o++]=c.source,r[o++]=c.style}const a=new Jo(r);return Cg[e]=a,a}class vp{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function wp(i,t){const e=i.byteLength/8|0,r=new Float64Array(i,0,e);new Float64Array(t,0,e).set(r);const a=i.byteLength-e*8;if(a>0){const u=new Uint8Array(i,e*8,a);new Uint8Array(t,e*8,a).set(u)}}const T1={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var M1=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(M1||{});function _p(i,t){return t.alphaMode==="no-premultiply-alpha"&&T1[i]||i}class R1{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class I1{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new R1,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Ag=[];let ch=0;function Sp(){return ch>0?Ag[--ch]:new I1}function Cp(i){Ag[ch++]=i}let Jr=0;const kg=class ta{constructor(t={}){this.uid=ee("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],ta.defaultOptions.maxTextures=ta.defaultOptions.maxTextures??Sg(),t={...ta.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:r,indicesInitialSize:o}=t;this.attributeBuffer=new vp(r*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Cp(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const r=t._batch.textures.ids[e._source.uid];return!r&&r!==0?!1:(t._textureId=r,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let r=Sp(),o=r.textures;o.clear();const a=e[this.elementStart];let u=_p(a.blendMode,a.texture._source),c=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,w=this._batchIndexStart,v="startBatch";const S=this.maxTextures;for(let k=this.elementStart;k<this.elementSize;++k){const _=e[k];e[k]=null;const O=_.texture._source,B=_p(_.blendMode,O),D=u!==B||c!==_.topology;if(O._batchTick===Jr&&!D){_._textureId=O._textureBindLocation,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,p,_._attributeStart,_._textureId),this.packQuadIndex(m,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,p,_._attributeStart,_._textureId),this.packIndex(_,m,_._indexStart,_._attributeStart/this.vertexSize)),_._batch=r;continue}O._batchTick=Jr,(o.count>=S||D)&&(this._finishBatch(r,w,y-w,o,u,c,t,v),v="renderBatch",w=y,u=B,c=_.topology,r=Sp(),o=r.textures,o.clear(),++Jr),_._textureId=O._textureBindLocation=o.count,o.ids[O.uid]=o.count,o.textures[o.count++]=O,_._batch=r,y+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,d,p,_._attributeStart,_._textureId),this.packQuadIndex(m,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,d,p,_._attributeStart,_._textureId),this.packIndex(_,m,_._indexStart,_._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(r,w,y-w,o,u,c,t,v),w=y,++Jr),this.elementStart=this.elementSize,this._batchIndexStart=w,this._batchIndexSize=y}_finishBatch(t,e,r,o,a,u,c,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=o,t.blendMode=a,t.topology=u,t.start=e,t.size=r,++Jr,this.batches[this.batchIndex++]=t,c.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),r=new vp(e);wp(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(t){const e=this.indexBuffer;let r=Math.max(t,e.length*1.5);r+=r%2;const o=r>65535?new Uint32Array(r):new Uint16Array(r);if(o.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let a=0;a<e.length;a++)o[a]=e[a];else wp(e.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,e,r){t[e]=r+0,t[e+1]=r+1,t[e+2]=r+2,t[e+3]=r+0,t[e+4]=r+2,t[e+5]=r+3}packIndex(t,e,r,o){const a=t.indices,u=t.indexSize,c=t.indexOffset,d=t.attributeOffset;for(let p=0;p<u;p++)e[r++]=o+a[p+c]-d}destroy(){for(let t=0;t<this.batches.length;t++)Cp(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};kg.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let F1=kg;var Te=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Te||{});let _s=class extends nn{constructor(t){let{data:e,size:r}=t;const{usage:o,label:a,shrinkToFit:u}=t;super(),this.uid=ee("buffer"),this._resourceType="buffer",this._resourceId=ee("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,r??(r=e==null?void 0:e.byteLength);const c=!!e;this.descriptor={size:r,usage:o,mappedAtCreation:c,label:a},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Te.STATIC)}set static(t){t?this.descriptor.usage|=Te.STATIC:this.descriptor.usage&=~Te.STATIC}setDataWithSize(t,e,r){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){r&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?r&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ee("resource"),this.emit("change",this));return}r&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function bg(i,t){if(!(i instanceof _s)){let e=t?Te.INDEX:Te.VERTEX;i instanceof Array&&(t?(i=new Uint32Array(i),e=Te.INDEX|Te.COPY_DST):(i=new Float32Array(i),e=Te.VERTEX|Te.COPY_DST)),i=new _s({data:i,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return i}function L1(i,t,e){const r=i.getAttribute(t);if(!r)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const o=r.buffer.data;let a=1/0,u=1/0,c=-1/0,d=-1/0;const p=o.BYTES_PER_ELEMENT,m=(r.offset||0)/p,y=(r.stride||2*4)/p;for(let w=m;w<o.length;w+=y){const v=o[w],S=o[w+1];v>c&&(c=v),S>d&&(d=S),v<a&&(a=v),S<u&&(u=S)}return e.minX=a,e.minY=u,e.maxX=c,e.maxY=d,e}function O1(i){return(i instanceof _s||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=bg(i.buffer,!1),i}class B1 extends nn{constructor(t={}){super(),this.uid=ee("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new yn,this._boundsDirty=!0;const{attributes:e,indexBuffer:r,topology:o}=t;if(this.buffers=[],this.attributes={},e)for(const a in e)this.addAttribute(a,e[a]);this.instanceCount=t.instanceCount??1,r&&this.addIndex(r),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const r=O1(e);this.buffers.indexOf(r.buffer)===-1&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=r}addIndex(t){this.indexBuffer=bg(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,L1(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const z1=new Float32Array(1),N1=new Uint32Array(1);class D1 extends B1{constructor(){const e=new _s({data:z1,label:"attribute-batch-buffer",usage:Te.VERTEX|Te.COPY_DST,shrinkToFit:!1}),r=new _s({data:N1,label:"index-batch-buffer",usage:Te.INDEX|Te.COPY_DST,shrinkToFit:!1}),o=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:o,offset:0},aUV:{buffer:e,format:"float32x2",stride:o,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:o,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:o,offset:5*4}},indexBuffer:r})}}function Ap(i,t,e){if(i)for(const r in i){const o=r.toLocaleLowerCase(),a=t[o];if(a){let u=i[r];r==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&a.push(`//----${e}----//`),a.push(u)}else Zt(`${r} placement hook does not exist in shader`)}}const W1=/\{\{(.*?)\}\}/g;function kp(i){var r;const t={};return(((r=i.match(W1))==null?void 0:r.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{t[o]=[]}),t}function bp(i,t){let e;const r=/@in\s+([^;]+);/g;for(;(e=r.exec(i))!==null;)t.push(e[1])}function Pp(i,t,e=!1){const r=[];bp(t,r),i.forEach(c=>{c.header&&bp(c.header,r)});const o=r;e&&o.sort();const a=o.map((c,d)=>`       @location(${d}) ${c},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${a}
`),u}function Ep(i,t){let e;const r=/@out\s+([^;]+);/g;for(;(e=r.exec(i))!==null;)t.push(e[1])}function U1(i){const e=/\b(\w+)\s*:/g.exec(i);return e?e[1]:""}function H1(i){const t=/@.*?\s+/g;return i.replace(t,"")}function j1(i,t){const e=[];Ep(t,e),i.forEach(d=>{d.header&&Ep(d.header,e)});let r=0;const o=e.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${r++}) ${d}`).join(`,
`),a=e.sort().map(d=>`       var ${H1(d)};`).join(`
`),u=`return VSOutput(
            ${e.sort().map(d=>` ${U1(d)}`).join(`,
`)});`;let c=t.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${o}
`),c=c.replace("{{start}}",`
${a}
`),c=c.replace("{{return}}",`
${u}
`),c}function Tp(i,t){let e=i;for(const r in t){const o=t[r];o.join(`
`).length?e=e.replace(`{{${r}}}`,`//-----${r} START-----//
${o.join(`
`)}
//----${r} FINISH----//`):e=e.replace(`{{${r}}}`,"")}return e}const Zn=Object.create(null),Du=new Map;let G1=0;function V1({template:i,bits:t}){const e=Pg(i,t);if(Zn[e])return Zn[e];const{vertex:r,fragment:o}=Y1(i,t);return Zn[e]=Eg(r,o,t),Zn[e]}function $1({template:i,bits:t}){const e=Pg(i,t);return Zn[e]||(Zn[e]=Eg(i.vertex,i.fragment,t)),Zn[e]}function Y1(i,t){const e=t.map(u=>u.vertex).filter(u=>!!u),r=t.map(u=>u.fragment).filter(u=>!!u);let o=Pp(e,i.vertex,!0);o=j1(e,o);const a=Pp(r,i.fragment,!0);return{vertex:o,fragment:a}}function Pg(i,t){return t.map(e=>(Du.has(e)||Du.set(e,G1++),Du.get(e))).sort((e,r)=>e-r).join("-")+i.vertex+i.fragment}function Eg(i,t,e){const r=kp(i),o=kp(t);return e.forEach(a=>{Ap(a.vertex,r,a.name),Ap(a.fragment,o,a.name)}),{vertex:Tp(i,r),fragment:Tp(t,o)}}const X1=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,q1=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,K1=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Q1=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,Z1={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},J1={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function tw({bits:i,name:t}){const e=V1({template:{fragment:q1,vertex:X1},bits:[Z1,...i]});return da.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function ew({bits:i,name:t}){return new ag({name:t,...$1({template:{vertex:K1,fragment:Q1},bits:[J1,...i]})})}const nw={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},iw={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Wu={};function rw(i){const t=[];if(i===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let r=0;r<i;r++)t.push(`@group(1) @binding(${e++}) var textureSource${r+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${r+1}: sampler;`)}return t.join(`
`)}function sw(i){const t=[];if(i===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<i;e++)e===i-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function ow(i){return Wu[i]||(Wu[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${rw(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${sw(i)}
            `}}),Wu[i]}const Uu={};function aw(i){const t=[];for(let e=0;e<i;e++)e>0&&t.push("else"),e<i-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function lw(i){return Uu[i]||(Uu[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${aw(i)}
            `}}),Uu[i]}const uw={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},hw={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Mp={};function cw(i){let t=Mp[i];if(t)return t;const e=new Int32Array(i);for(let r=0;r<i;r++)e[r]=r;return t=Mp[i]=new cg({uTextures:{value:e,type:"i32",size:i}},{isStatic:!0}),t}class dw extends Mh{constructor(t){const e=ew({name:"batch",bits:[iw,lw(t),hw]}),r=tw({name:"batch",bits:[nw,ow(t),uw]});super({glProgram:e,gpuProgram:r,resources:{batchSamplers:cw(t)}})}}let Rp=null;const Tg=class Mg extends F1{constructor(){super(...arguments),this.geometry=new D1,this.shader=Rp||(Rp=new dw(this.maxTextures)),this.name=Mg.extension.name,this.vertexSize=6}packAttributes(t,e,r,o,a){const u=a<<16|t.roundPixels&65535,c=t.transform,d=c.a,p=c.b,m=c.c,y=c.d,w=c.tx,v=c.ty,{positions:S,uvs:k}=t,_=t.color,R=t.attributeOffset,O=R+t.attributeSize;for(let B=R;B<O;B++){const D=B*2,G=S[D],H=S[D+1];e[o++]=d*G+m*H+w,e[o++]=y*H+p*G+v,e[o++]=k[D],e[o++]=k[D+1],r[o++]=_,r[o++]=u}}packQuadAttributes(t,e,r,o,a){const u=t.texture,c=t.transform,d=c.a,p=c.b,m=c.c,y=c.d,w=c.tx,v=c.ty,S=t.bounds,k=S.maxX,_=S.minX,R=S.maxY,O=S.minY,B=u.uvs,D=t.color,G=a<<16|t.roundPixels&65535;e[o+0]=d*_+m*O+w,e[o+1]=y*O+p*_+v,e[o+2]=B.x0,e[o+3]=B.y0,r[o+4]=D,r[o+5]=G,e[o+6]=d*k+m*O+w,e[o+7]=y*O+p*k+v,e[o+8]=B.x1,e[o+9]=B.y1,r[o+10]=D,r[o+11]=G,e[o+12]=d*k+m*R+w,e[o+13]=y*R+p*k+v,e[o+14]=B.x2,e[o+15]=B.y2,r[o+16]=D,r[o+17]=G,e[o+18]=d*_+m*R+w,e[o+19]=y*R+p*_+v,e[o+20]=B.x3,e[o+21]=B.y3,r[o+22]=D,r[o+23]=G}};Tg.extension={type:[ct.Batcher],name:"default"};let fw=Tg;function pw(i,t,e,r,o,a,u,c=null){let d=0;e*=t,o*=a;const p=c.a,m=c.b,y=c.c,w=c.d,v=c.tx,S=c.ty;for(;d<u;){const k=i[e],_=i[e+1];r[o]=p*k+y*_+v,r[o+1]=m*k+w*_+S,o+=a,e+=t,d++}}function mw(i,t,e,r){let o=0;for(t*=e;o<r;)i[t]=0,i[t+1]=0,t+=e,o++}function Rg(i,t,e,r,o){const a=t.a,u=t.b,c=t.c,d=t.d,p=t.tx,m=t.ty;e||(e=0),r||(r=2),o||(o=i.length/r-e);let y=e*r;for(let w=0;w<o;w++){const v=i[y],S=i[y+1];i[y]=a*v+c*S+p,i[y+1]=u*v+d*S+m,y+=r}}const gw=new Tt;class Ig{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,r=this.renderable;return r?Wm(e,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||gw}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Ss={extension:{type:ct.ShapeBuilder,name:"circle"},build(i,t){let e,r,o,a,u,c;if(i.type==="circle"){const D=i;e=D.x,r=D.y,u=c=D.radius,o=a=0}else if(i.type==="ellipse"){const D=i;e=D.x,r=D.y,u=D.halfWidth,c=D.halfHeight,o=a=0}else{const D=i,G=D.width/2,H=D.height/2;e=D.x+G,r=D.y+H,u=c=Math.max(0,Math.min(D.radius,Math.min(G,H))),o=G-u,a=H-c}if(!(u>=0&&c>=0&&o>=0&&a>=0))return t;const d=Math.ceil(2.3*Math.sqrt(u+c)),p=d*8+(o?4:0)+(a?4:0);if(p===0)return t;if(d===0)return t[0]=t[6]=e+o,t[1]=t[3]=r+a,t[2]=t[4]=e-o,t[5]=t[7]=r-a,t;let m=0,y=d*4+(o?2:0)+2,w=y,v=p,S=o+u,k=a,_=e+S,R=e-S,O=r+k;if(t[m++]=_,t[m++]=O,t[--y]=O,t[--y]=R,a){const D=r-k;t[w++]=R,t[w++]=D,t[--v]=D,t[--v]=_}for(let D=1;D<d;D++){const G=Math.PI/2*(D/d),H=o+Math.cos(G)*u,j=a+Math.sin(G)*c,nt=e+H,dt=e-H,J=r+j,tt=r-j;t[m++]=nt,t[m++]=J,t[--y]=J,t[--y]=dt,t[w++]=dt,t[w++]=tt,t[--v]=tt,t[--v]=nt}S=o,k=a+c,_=e+S,R=e-S,O=r+k;const B=r-k;return t[m++]=_,t[m++]=O,t[--v]=B,t[--v]=_,o&&(t[m++]=R,t[m++]=O,t[--v]=B,t[--v]=R),t},triangulate(i,t,e,r,o,a){if(i.length===0)return;let u=0,c=0;for(let m=0;m<i.length;m+=2)u+=i[m],c+=i[m+1];u/=i.length/2,c/=i.length/2;let d=r;t[d*e]=u,t[d*e+1]=c;const p=d++;for(let m=0;m<i.length;m+=2)t[d*e]=i[m],t[d*e+1]=i[m+1],m>0&&(o[a++]=d,o[a++]=p,o[a++]=d-1),d++;o[a++]=p+1,o[a++]=p,o[a++]=d-1}},yw={...Ss,extension:{...Ss.extension,name:"ellipse"}},xw={...Ss,extension:{...Ss.extension,name:"roundedRectangle"}},Fg=1e-4,Ip=1e-4;function vw(i){const t=i.length;if(t<6)return 1;let e=0;for(let r=0,o=i[t-2],a=i[t-1];r<t;r+=2){const u=i[r],c=i[r+1];e+=(u-o)*(c+a),o=u,a=c}return e<0?-1:1}function Fp(i,t,e,r,o,a,u,c){const d=i-e*o,p=t-r*o,m=i+e*a,y=t+r*a;let w,v;u?(w=r,v=-e):(w=-r,v=e);const S=d+w,k=p+v,_=m+w,R=y+v;return c.push(S,k),c.push(_,R),2}function fi(i,t,e,r,o,a,u,c){const d=e-i,p=r-t;let m=Math.atan2(d,p),y=Math.atan2(o-i,a-t);c&&m<y?m+=Math.PI*2:!c&&m>y&&(y+=Math.PI*2);let w=m;const v=y-m,S=Math.abs(v),k=Math.sqrt(d*d+p*p),_=(15*S*Math.sqrt(k)/Math.PI>>0)+1,R=v/_;if(w+=R,c){u.push(i,t),u.push(e,r);for(let O=1,B=w;O<_;O++,B+=R)u.push(i,t),u.push(i+Math.sin(B)*k,t+Math.cos(B)*k);u.push(i,t),u.push(o,a)}else{u.push(e,r),u.push(i,t);for(let O=1,B=w;O<_;O++,B+=R)u.push(i+Math.sin(B)*k,t+Math.cos(B)*k),u.push(i,t);u.push(o,a),u.push(i,t)}return _*2}function ww(i,t,e,r,o,a){const u=Fg;if(i.length===0)return;const c=t;let d=c.alignment;if(t.alignment!==.5){let F=vw(i);d=(d-.5)*F+.5}const p=new At(i[0],i[1]),m=new At(i[i.length-2],i[i.length-1]),y=r,w=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(y){i=i.slice(),w&&(i.pop(),i.pop(),m.set(i[i.length-2],i[i.length-1]));const F=(p.x+m.x)*.5,L=(m.y+p.y)*.5;i.unshift(F,L),i.push(F,L)}const v=o,S=i.length/2;let k=i.length;const _=v.length/2,R=c.width/2,O=R*R,B=c.miterLimit*c.miterLimit;let D=i[0],G=i[1],H=i[2],j=i[3],nt=0,dt=0,J=-(G-j),tt=D-H,_t=0,xt=0,Mt=Math.sqrt(J*J+tt*tt);J/=Mt,tt/=Mt,J*=R,tt*=R;const qt=d,A=(1-qt)*2,E=qt*2;y||(c.cap==="round"?k+=fi(D-J*(A-E)*.5,G-tt*(A-E)*.5,D-J*A,G-tt*A,D+J*E,G+tt*E,v,!0)+2:c.cap==="square"&&(k+=Fp(D,G,J,tt,A,E,!0,v))),v.push(D-J*A,G-tt*A),v.push(D+J*E,G+tt*E);for(let F=1;F<S-1;++F){D=i[(F-1)*2],G=i[(F-1)*2+1],H=i[F*2],j=i[F*2+1],nt=i[(F+1)*2],dt=i[(F+1)*2+1],J=-(G-j),tt=D-H,Mt=Math.sqrt(J*J+tt*tt),J/=Mt,tt/=Mt,J*=R,tt*=R,_t=-(j-dt),xt=H-nt,Mt=Math.sqrt(_t*_t+xt*xt),_t/=Mt,xt/=Mt,_t*=R,xt*=R;const L=H-D,C=G-j,M=H-nt,V=dt-j,K=L*M+C*V,Q=C*M-V*L,ot=Q<0;if(Math.abs(Q)<.001*Math.abs(K)){v.push(H-J*A,j-tt*A),v.push(H+J*E,j+tt*E),K>=0&&(c.join==="round"?k+=fi(H,j,H-J*A,j-tt*A,H-_t*A,j-xt*A,v,!1)+4:k+=2,v.push(H-_t*E,j-xt*E),v.push(H+_t*A,j+xt*A));continue}const ht=(-J+D)*(-tt+j)-(-J+H)*(-tt+G),st=(-_t+nt)*(-xt+j)-(-_t+H)*(-xt+dt),gt=(L*st-M*ht)/Q,yt=(V*ht-C*st)/Q,we=(gt-H)*(gt-H)+(yt-j)*(yt-j),ue=H+(gt-H)*A,me=j+(yt-j)*A,_e=H-(gt-H)*E,wt=j-(yt-j)*E,Ct=Math.min(L*L+C*C,M*M+V*V),Ci=ot?A:E,Es=Ct+Ci*Ci*O;we<=Es?c.join==="bevel"||we/O>B?(ot?(v.push(ue,me),v.push(H+J*E,j+tt*E),v.push(ue,me),v.push(H+_t*E,j+xt*E)):(v.push(H-J*A,j-tt*A),v.push(_e,wt),v.push(H-_t*A,j-xt*A),v.push(_e,wt)),k+=2):c.join==="round"?ot?(v.push(ue,me),v.push(H+J*E,j+tt*E),k+=fi(H,j,H+J*E,j+tt*E,H+_t*E,j+xt*E,v,!0)+4,v.push(ue,me),v.push(H+_t*E,j+xt*E)):(v.push(H-J*A,j-tt*A),v.push(_e,wt),k+=fi(H,j,H-J*A,j-tt*A,H-_t*A,j-xt*A,v,!1)+4,v.push(H-_t*A,j-xt*A),v.push(_e,wt)):(v.push(ue,me),v.push(_e,wt)):(v.push(H-J*A,j-tt*A),v.push(H+J*E,j+tt*E),c.join==="round"?ot?k+=fi(H,j,H+J*E,j+tt*E,H+_t*E,j+xt*E,v,!0)+2:k+=fi(H,j,H-J*A,j-tt*A,H-_t*A,j-xt*A,v,!1)+2:c.join==="miter"&&we/O<=B&&(ot?(v.push(_e,wt),v.push(_e,wt)):(v.push(ue,me),v.push(ue,me)),k+=2),v.push(H-_t*A,j-xt*A),v.push(H+_t*E,j+xt*E),k+=2)}D=i[(S-2)*2],G=i[(S-2)*2+1],H=i[(S-1)*2],j=i[(S-1)*2+1],J=-(G-j),tt=D-H,Mt=Math.sqrt(J*J+tt*tt),J/=Mt,tt/=Mt,J*=R,tt*=R,v.push(H-J*A,j-tt*A),v.push(H+J*E,j+tt*E),y||(c.cap==="round"?k+=fi(H-J*(A-E)*.5,j-tt*(A-E)*.5,H-J*A,j-tt*A,H+J*E,j+tt*E,v,!1)+2:c.cap==="square"&&(k+=Fp(H,j,J,tt,A,E,!1,v)));const b=Ip*Ip;for(let F=_;F<k+_-2;++F)D=v[F*2],G=v[F*2+1],H=v[(F+1)*2],j=v[(F+1)*2+1],nt=v[(F+2)*2],dt=v[(F+2)*2+1],!(Math.abs(D*(j-dt)+H*(dt-G)+nt*(G-j))<b)&&a.push(F,F+1,F+2)}function _w(i,t,e,r){const o=Fg;if(i.length===0)return;const a=i[0],u=i[1],c=i[i.length-2],d=i[i.length-1],p=t||Math.abs(a-c)<o&&Math.abs(u-d)<o,m=e,y=i.length/2,w=m.length/2;for(let v=0;v<y;v++)m.push(i[v*2]),m.push(i[v*2+1]);for(let v=0;v<y-1;v++)r.push(w+v,w+v+1);p&&r.push(w+y-1,w)}function Lg(i,t,e,r,o,a,u){const c=d1(i,t,2);if(!c)return;for(let p=0;p<c.length;p+=3)a[u++]=c[p]+o,a[u++]=c[p+1]+o,a[u++]=c[p+2]+o;let d=o*r;for(let p=0;p<i.length;p+=2)e[d]=i[p],e[d+1]=i[p+1],d+=r}const Sw=[],Cw={extension:{type:ct.ShapeBuilder,name:"polygon"},build(i,t){for(let e=0;e<i.points.length;e++)t[e]=i.points[e];return t},triangulate(i,t,e,r,o,a){Lg(i,Sw,t,e,r,o,a)}},Aw={extension:{type:ct.ShapeBuilder,name:"rectangle"},build(i,t){const e=i,r=e.x,o=e.y,a=e.width,u=e.height;return a>=0&&u>=0&&(t[0]=r,t[1]=o,t[2]=r+a,t[3]=o,t[4]=r+a,t[5]=o+u,t[6]=r,t[7]=o+u),t},triangulate(i,t,e,r,o,a){let u=0;r*=e,t[r+u]=i[0],t[r+u+1]=i[1],u+=e,t[r+u]=i[2],t[r+u+1]=i[3],u+=e,t[r+u]=i[6],t[r+u+1]=i[7],u+=e,t[r+u]=i[4],t[r+u+1]=i[5],u+=e;const c=r/e;o[a++]=c,o[a++]=c+1,o[a++]=c+2,o[a++]=c+1,o[a++]=c+3,o[a++]=c+2}},kw={extension:{type:ct.ShapeBuilder,name:"triangle"},build(i,t){return t[0]=i.x,t[1]=i.y,t[2]=i.x2,t[3]=i.y2,t[4]=i.x3,t[5]=i.y3,t},triangulate(i,t,e,r,o,a){let u=0;r*=e,t[r+u]=i[0],t[r+u+1]=i[1],u+=e,t[r+u]=i[2],t[r+u+1]=i[3],u+=e,t[r+u]=i[4],t[r+u+1]=i[5];const c=r/e;o[a++]=c,o[a++]=c+1,o[a++]=c+2}},pa={};ve.handleByMap(ct.ShapeBuilder,pa);ve.add(Aw,Cw,kw,Ss,yw,xw);const bw=new Ht;function Pw(i,t){const{geometryData:e,batches:r}=t;r.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let o=0;o<i.instructions.length;o++){const a=i.instructions[o];if(a.action==="texture")Ew(a.data,r,e);else if(a.action==="fill"||a.action==="stroke"){const u=a.action==="stroke",c=a.data.path.shapePath,d=a.data.style,p=a.data.hole;u&&p&&Lp(p.shapePath,d,null,!0,r,e),Lp(c,d,p,u,r,e)}}}function Ew(i,t,e){const{vertices:r,uvs:o,indices:a}=e,u=a.length,c=r.length/2,d=[],p=pa.rectangle,m=bw,y=i.image;m.x=i.dx,m.y=i.dy,m.width=i.dw,m.height=i.dh;const w=i.transform;p.build(m,d),w&&Rg(d,w),p.triangulate(d,r,2,c,a,u);const v=y.uvs;o.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const S=Tn.get(Ig);S.indexOffset=u,S.indexSize=a.length-u,S.attributeOffset=c,S.attributeSize=r.length/2-c,S.baseColor=i.style,S.alpha=i.alpha,S.texture=y,S.geometryData=e,t.push(S)}function Lp(i,t,e,r,o,a){const{vertices:u,uvs:c,indices:d}=a,p=i.shapePrimitives.length-1;i.shapePrimitives.forEach(({shape:m,transform:y},w)=>{const v=d.length,S=u.length/2,k=[],_=pa[m.type];let R="triangle-list";if(_.build(m,k),y&&Rg(k,y),r){const G=m.closePath??!0,H=t;H.pixelLine?(_w(k,G,u,d),R="line-list"):ww(k,H,!1,G,u,d)}else if(e&&p===w){p!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const G=[],H=k.slice();Tw(e.shapePath).forEach(nt=>{G.push(H.length/2),H.push(...nt)}),Lg(H,G,u,2,S,d,v)}else _.triangulate(k,u,2,S,d,v);const O=c.length/2,B=t.texture;if(B!==bt.WHITE){const G=t.matrix;G&&(y&&G.append(y.clone().invert()),pw(u,2,S,c,O,2,u.length/2-S,G))}else mw(c,O,2,u.length/2-S);const D=Tn.get(Ig);D.indexOffset=v,D.indexSize=d.length-v,D.attributeOffset=S,D.attributeSize=u.length/2-S,D.baseColor=t.color,D.alpha=t.alpha,D.texture=B,D.geometryData=a,D.topology=R,o.push(D)})}function Tw(i){if(!i)return[];const t=i.shapePrimitives,e=[];for(let r=0;r<t.length;r++){const o=t[r].shape,a=[];pa[o.type].build(o,a),e.push(a)}return e}class Mw{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Rw{constructor(){this.batcher=new fw,this.instructions=new Gm}init(){this.instructions.reset()}get geometry(){return Et(Zx,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Lh=class dh{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){dh.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??dh.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),Pw(t,e);const r=t.batchMode;t.customShader||r==="no-batch"?e.isBatchable=!1:r==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Tn.get(Rw),{batches:r,geometryData:o}=this._gpuContextHash[t.uid],a=o.vertices.length,u=o.indices.length;for(let m=0;m<r.length;m++)r[m].applyTransform=!1;const c=e.batcher;c.ensureAttributeBuffer(a),c.ensureIndexBuffer(u),c.begin();for(let m=0;m<r.length;m++){const y=r[m];c.add(y)}c.finish(e.instructions);const d=c.geometry;d.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),d.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const p=c.batches;for(let m=0;m<p.length;m++){const y=p[m];y.bindGroup=P1(y.textures.textures,y.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new Mw;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Tn.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(r=>{Tn.return(r)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Lh.extension={type:[ct.WebGLSystem,ct.WebGPUSystem,ct.CanvasSystem],name:"graphicsContext"};Lh.defaultOptions={bezierSmoothness:.5};let Og=Lh;const Iw=8,qo=11920929e-14,Fw=1;function Bg(i,t,e,r,o,a,u,c,d,p){const y=Math.min(.99,Math.max(0,p??Og.defaultOptions.bezierSmoothness));let w=(Fw-y)/1;return w*=w,Lw(t,e,r,o,a,u,c,d,i,w),i}function Lw(i,t,e,r,o,a,u,c,d,p){fh(i,t,e,r,o,a,u,c,d,p,0),d.push(u,c)}function fh(i,t,e,r,o,a,u,c,d,p,m){if(m>Iw)return;const y=(i+e)/2,w=(t+r)/2,v=(e+o)/2,S=(r+a)/2,k=(o+u)/2,_=(a+c)/2,R=(y+v)/2,O=(w+S)/2,B=(v+k)/2,D=(S+_)/2,G=(R+B)/2,H=(O+D)/2;if(m>0){let j=u-i,nt=c-t;const dt=Math.abs((e-u)*nt-(r-c)*j),J=Math.abs((o-u)*nt-(a-c)*j);if(dt>qo&&J>qo){if((dt+J)*(dt+J)<=p*(j*j+nt*nt)){d.push(G,H);return}}else if(dt>qo){if(dt*dt<=p*(j*j+nt*nt)){d.push(G,H);return}}else if(J>qo){if(J*J<=p*(j*j+nt*nt)){d.push(G,H);return}}else if(j=G-(i+u)/2,nt=H-(t+c)/2,j*j+nt*nt<=p){d.push(G,H);return}}fh(i,t,y,w,R,O,G,H,d,p,m+1),fh(G,H,B,D,k,_,u,c,d,p,m+1)}const Ow=8,Bw=11920929e-14,zw=1;function Nw(i,t,e,r,o,a,u,c){const p=Math.min(.99,Math.max(0,c??Og.defaultOptions.bezierSmoothness));let m=(zw-p)/1;return m*=m,Dw(t,e,r,o,a,u,i,m),i}function Dw(i,t,e,r,o,a,u,c){ph(u,i,t,e,r,o,a,c,0),u.push(o,a)}function ph(i,t,e,r,o,a,u,c,d){if(d>Ow)return;const p=(t+r)/2,m=(e+o)/2,y=(r+a)/2,w=(o+u)/2,v=(p+y)/2,S=(m+w)/2;let k=a-t,_=u-e;const R=Math.abs((r-a)*_-(o-u)*k);if(R>Bw){if(R*R<=c*(k*k+_*_)){i.push(v,S);return}}else if(k=v-(t+a)/2,_=S-(e+u)/2,k*k+_*_<=c){i.push(v,S);return}ph(i,t,e,p,m,v,S,c,d+1),ph(i,v,S,y,w,a,u,c,d+1)}function zg(i,t,e,r,o,a,u,c){let d=Math.abs(o-a);(!u&&o>a||u&&a>o)&&(d=2*Math.PI-d),c||(c=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(d/Math.PI)))),c=Math.max(c,3);let p=d/c,m=o;p*=u?-1:1;for(let y=0;y<c+1;y++){const w=Math.cos(m),v=Math.sin(m),S=t+w*r,k=e+v*r;i.push(S,k),m+=p}}function Ww(i,t,e,r,o,a){const u=i[i.length-2],d=i[i.length-1]-e,p=u-t,m=o-e,y=r-t,w=Math.abs(d*y-p*m);if(w<1e-8||a===0){(i[i.length-2]!==t||i[i.length-1]!==e)&&i.push(t,e);return}const v=d*d+p*p,S=m*m+y*y,k=d*m+p*y,_=a*Math.sqrt(v)/w,R=a*Math.sqrt(S)/w,O=_*k/v,B=R*k/S,D=_*y+R*p,G=_*m+R*d,H=p*(R+O),j=d*(R+O),nt=y*(_+B),dt=m*(_+B),J=Math.atan2(j-G,H-D),tt=Math.atan2(dt-G,nt-D);zg(i,D+t,G+e,a,J,tt,p*m>y*d)}const xs=Math.PI*2,Hu={centerX:0,centerY:0,ang1:0,ang2:0},ju=({x:i,y:t},e,r,o,a,u,c,d)=>{i*=e,t*=r;const p=o*i-a*t,m=a*i+o*t;return d.x=p+u,d.y=m+c,d};function Uw(i,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=t===1.5707963267948966?.551915024494:e,o=Math.cos(i),a=Math.sin(i),u=Math.cos(i+t),c=Math.sin(i+t);return[{x:o-a*r,y:a+o*r},{x:u+c*r,y:c-u*r},{x:u,y:c}]}const Op=(i,t,e,r)=>{const o=i*r-t*e<0?-1:1;let a=i*e+t*r;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},Hw=(i,t,e,r,o,a,u,c,d,p,m,y,w)=>{const v=Math.pow(o,2),S=Math.pow(a,2),k=Math.pow(m,2),_=Math.pow(y,2);let R=v*S-v*_-S*k;R<0&&(R=0),R/=v*_+S*k,R=Math.sqrt(R)*(u===c?-1:1);const O=R*o/a*y,B=R*-a/o*m,D=p*O-d*B+(i+e)/2,G=d*O+p*B+(t+r)/2,H=(m-O)/o,j=(y-B)/a,nt=(-m-O)/o,dt=(-y-B)/a,J=Op(1,0,H,j);let tt=Op(H,j,nt,dt);c===0&&tt>0&&(tt-=xs),c===1&&tt<0&&(tt+=xs),w.centerX=D,w.centerY=G,w.ang1=J,w.ang2=tt};function jw(i,t,e,r,o,a,u,c=0,d=0,p=0){if(a===0||u===0)return;const m=Math.sin(c*xs/360),y=Math.cos(c*xs/360),w=y*(t-r)/2+m*(e-o)/2,v=-m*(t-r)/2+y*(e-o)/2;if(w===0&&v===0)return;a=Math.abs(a),u=Math.abs(u);const S=Math.pow(w,2)/Math.pow(a,2)+Math.pow(v,2)/Math.pow(u,2);S>1&&(a*=Math.sqrt(S),u*=Math.sqrt(S)),Hw(t,e,r,o,a,u,d,p,m,y,w,v,Hu);let{ang1:k,ang2:_}=Hu;const{centerX:R,centerY:O}=Hu;let B=Math.abs(_)/(xs/4);Math.abs(1-B)<1e-7&&(B=1);const D=Math.max(Math.ceil(B),1);_/=D;let G=i[i.length-2],H=i[i.length-1];const j={x:0,y:0};for(let nt=0;nt<D;nt++){const dt=Uw(k,_),{x:J,y:tt}=ju(dt[0],a,u,y,m,R,O,j),{x:_t,y:xt}=ju(dt[1],a,u,y,m,R,O,j),{x:Mt,y:qt}=ju(dt[2],a,u,y,m,R,O,j);Bg(i,G,H,J,tt,_t,xt,Mt,qt),G=Mt,H=qt,k+=_}}function Gw(i,t,e){const r=(u,c)=>{const d=c.x-u.x,p=c.y-u.y,m=Math.sqrt(d*d+p*p),y=d/m,w=p/m;return{len:m,nx:y,ny:w}},o=(u,c)=>{u===0?i.moveTo(c.x,c.y):i.lineTo(c.x,c.y)};let a=t[t.length-1];for(let u=0;u<t.length;u++){const c=t[u%t.length],d=c.radius??e;if(d<=0){o(u,c),a=c;continue}const p=t[(u+1)%t.length],m=r(c,a),y=r(c,p);if(m.len<1e-4||y.len<1e-4){o(u,c),a=c;continue}let w=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,S=!1;m.nx*y.nx-m.ny*-y.ny<0?w<0?w=Math.PI+w:(w=Math.PI-w,v=-1,S=!0):w>0&&(v=-1,S=!0);const k=w/2;let _,R=Math.abs(Math.cos(k)*d/Math.sin(k));R>Math.min(m.len/2,y.len/2)?(R=Math.min(m.len/2,y.len/2),_=Math.abs(R*Math.sin(k)/Math.cos(k))):_=d;const O=c.x+y.nx*R+-y.ny*_*v,B=c.y+y.ny*R+y.nx*_*v,D=Math.atan2(m.ny,m.nx)+Math.PI/2*v,G=Math.atan2(y.ny,y.nx)-Math.PI/2*v;u===0&&i.moveTo(O+Math.cos(D)*_,B+Math.sin(D)*_),i.arc(O,B,_,D,G,S),a=c}}function Vw(i,t,e,r){const o=(c,d)=>Math.sqrt((c.x-d.x)**2+(c.y-d.y)**2),a=(c,d,p)=>({x:c.x+(d.x-c.x)*p,y:c.y+(d.y-c.y)*p}),u=t.length;for(let c=0;c<u;c++){const d=t[(c+1)%u],p=d.radius??e;if(p<=0){c===0?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y);continue}const m=t[c],y=t[(c+2)%u],w=o(m,d);let v;if(w<1e-4)v=d;else{const _=Math.min(w/2,p);v=a(d,m,_/w)}const S=o(y,d);let k;if(S<1e-4)k=d;else{const _=Math.min(S/2,p);k=a(d,y,_/S)}c===0?i.moveTo(v.x,v.y):i.lineTo(v.x,v.y),i.quadraticCurveTo(d.x,d.y,k.x,k.y,r)}}const $w=new Ht;class Yw{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new yn,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const r=this._currentPoly.points,o=r[r.length-2],a=r[r.length-1];return(o!==t||a!==e)&&r.push(t,e),this}arc(t,e,r,o,a,u){this._ensurePoly(!1);const c=this._currentPoly.points;return zg(c,t,e,r,o,a,u),this}arcTo(t,e,r,o,a){this._ensurePoly();const u=this._currentPoly.points;return Ww(u,t,e,r,o,a),this}arcToSvg(t,e,r,o,a,u,c){const d=this._currentPoly.points;return jw(d,this._currentPoly.lastX,this._currentPoly.lastY,u,c,t,e,r,o,a),this}bezierCurveTo(t,e,r,o,a,u,c){this._ensurePoly();const d=this._currentPoly;return Bg(this._currentPoly.points,d.lastX,d.lastY,t,e,r,o,a,u,c),this}quadraticCurveTo(t,e,r,o,a){this._ensurePoly();const u=this._currentPoly;return Nw(this._currentPoly.points,u.lastX,u.lastY,t,e,r,o,a),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let r=0;r<t.instructions.length;r++){const o=t.instructions[r];this[o.action](...o.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,r,o,a){return this.drawShape(new Ht(t,e,r,o),a),this}circle(t,e,r,o){return this.drawShape(new Rh(t,e,r),o),this}poly(t,e,r){const o=new ys(t);return o.closePath=e,this.drawShape(o,r),this}regularPoly(t,e,r,o,a=0,u){o=Math.max(o|0,3);const c=-1*Math.PI/2+a,d=Math.PI*2/o,p=[];for(let m=0;m<o;m++){const y=c-m*d;p.push(t+r*Math.cos(y),e+r*Math.sin(y))}return this.poly(p,!0,u),this}roundPoly(t,e,r,o,a,u=0,c){if(o=Math.max(o|0,3),a<=0)return this.regularPoly(t,e,r,o,u);const d=r*Math.sin(Math.PI/o)-.001;a=Math.min(a,d);const p=-1*Math.PI/2+u,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let w=0;w<o;w++){const v=w*m+p,S=t+r*Math.cos(v),k=e+r*Math.sin(v),_=v+Math.PI+y,R=v-Math.PI-y,O=S+a*Math.cos(_),B=k+a*Math.sin(_),D=S+a*Math.cos(R),G=k+a*Math.sin(R);w===0?this.moveTo(O,B):this.lineTo(O,B),this.quadraticCurveTo(S,k,D,G,c)}return this.closePath()}roundShape(t,e,r=!1,o){return t.length<3?this:(r?Vw(this,t,e,o):Gw(this,t,e),this.closePath())}filletRect(t,e,r,o,a){if(a===0)return this.rect(t,e,r,o);const u=Math.min(r,o)/2,c=Math.min(u,Math.max(-u,a)),d=t+r,p=e+o,m=c<0?-c:0,y=Math.abs(c);return this.moveTo(t,e+y).arcTo(t+m,e+m,t+y,e,y).lineTo(d-y,e).arcTo(d-m,e+m,d,e+y,y).lineTo(d,p-y).arcTo(d-m,p-m,t+r-y,p,y).lineTo(t+y,p).arcTo(t+m,p-m,t,p-y,y).closePath()}chamferRect(t,e,r,o,a,u){if(a<=0)return this.rect(t,e,r,o);const c=Math.min(a,Math.min(r,o)/2),d=t+r,p=e+o,m=[t+c,e,d-c,e,d,e+c,d,p-c,d-c,p,t+c,p,t,p-c,t,e+c];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,u)}ellipse(t,e,r,o,a){return this.drawShape(new Ih(t,e,r,o),a),this}roundRect(t,e,r,o,a,u){return this.drawShape(new Fh(t,e,r,o,a),u),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let r=this._currentPoly;return r&&this.endPoly(),r=new ys,r.points.push(t,e),this._currentPoly=r,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new ys,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let r=e.shape.x,o=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const a=e.transform,u=r;r=a.a*r+a.c*o+a.tx,o=a.b*u+a.d*o+a.ty}this._currentPoly.points.push(r,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const r=t.instructions[e];this[r.action](...r.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let r=0;r<e.length;r++){const o=e[r],a=o.shape.getBounds($w);o.transform?t.addRect(a,o.transform):t.addRect(a)}return t}}class ir{constructor(t){this.instructions=[],this.uid=ee("graphicsPath"),this._dirty=!0,typeof t=="string"?S1(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new Yw(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,r,o,a){const u=this.instructions[this.instructions.length-1],c=this.getLastPoint(At.shared);let d=0,p=0;if(!u||u.action!=="bezierCurveTo")d=c.x,p=c.y;else{d=u.data[2],p=u.data[3];const m=c.x,y=c.y;d=m+(m-d),p=y+(y-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,t,e,r,o,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,r){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(At.shared);let u=0,c=0;if(!o||o.action!=="quadraticCurveTo")u=a.x,c=a.y;else{u=o.data[0],c=o.data[1];const d=a.x,p=a.y;u=d+(d-u),c=p+(p-c)}return this.instructions.push({action:"quadraticCurveTo",data:[u,c,t,e,r]}),this._dirty=!0,this}rect(t,e,r,o,a){return this.instructions.push({action:"rect",data:[t,e,r,o,a]}),this._dirty=!0,this}circle(t,e,r,o){return this.instructions.push({action:"circle",data:[t,e,r,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,r,o,a,u,c){a||(a=o/2);const d=-1*Math.PI/2+u,p=r*2,m=Math.PI*2/p,y=[];for(let w=0;w<p;w++){const v=w%2?a:o,S=w*m+d;y.push(t+v*Math.cos(S),e+v*Math.sin(S))}return this.poly(y,!0,c),this}clone(t=!1){const e=new ir;if(!t)e.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const o=this.instructions[r];e.instructions.push({action:o.action,data:o.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,r=t.b,o=t.c,a=t.d,u=t.tx,c=t.ty;let d=0,p=0,m=0,y=0,w=0,v=0,S=0,k=0;for(let _=0;_<this.instructions.length;_++){const R=this.instructions[_],O=R.data;switch(R.action){case"moveTo":case"lineTo":d=O[0],p=O[1],O[0]=e*d+o*p+u,O[1]=r*d+a*p+c;break;case"bezierCurveTo":m=O[0],y=O[1],w=O[2],v=O[3],d=O[4],p=O[5],O[0]=e*m+o*y+u,O[1]=r*m+a*y+c,O[2]=e*w+o*v+u,O[3]=r*w+a*v+c,O[4]=e*d+o*p+u,O[5]=r*d+a*p+c;break;case"quadraticCurveTo":m=O[0],y=O[1],d=O[2],p=O[3],O[0]=e*m+o*y+u,O[1]=r*m+a*y+c,O[2]=e*d+o*p+u,O[3]=r*d+a*p+c;break;case"arcToSvg":d=O[5],p=O[6],S=O[0],k=O[1],O[0]=e*S+o*k,O[1]=r*S+a*k,O[5]=e*d+o*p+u,O[6]=r*d+a*p+c;break;case"circle":O[4]=ts(O[3],t);break;case"rect":O[4]=ts(O[4],t);break;case"ellipse":O[8]=ts(O[8],t);break;case"roundRect":O[5]=ts(O[5],t);break;case"addPath":O[0].transform(t);break;case"poly":O[2]=ts(O[2],t);break;default:Zt("unknown transform action",R.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,r=this.instructions[e];if(!r)return t.x=0,t.y=0,t;for(;r.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;r=this.instructions[e]}switch(r.action){case"moveTo":case"lineTo":t.x=r.data[0],t.y=r.data[1];break;case"quadraticCurveTo":t.x=r.data[2],t.y=r.data[3];break;case"bezierCurveTo":t.x=r.data[4],t.y=r.data[5];break;case"arc":case"arcToSvg":t.x=r.data[5],t.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(t);break}return t}}function ts(i,t){return i?i.prepend(t):t.clone()}function Xw(i,t){if(typeof i=="string"){const r=document.createElement("div");r.innerHTML=i.trim(),i=r.querySelector("svg")}const e={context:t,path:new ir};return Ng(i,e,null,null),t}function Ng(i,t,e,r){const o=i.children,{fillStyle:a,strokeStyle:u}=qw(i);a&&e?e={...e,...a}:a&&(e=a),u&&r?r={...r,...u}:u&&(r=u),t.context.fillStyle=e,t.context.strokeStyle=r;let c,d,p,m,y,w,v,S,k,_,R,O,B,D,G,H,j;switch(i.nodeName.toLowerCase()){case"path":D=i.getAttribute("d"),G=new ir(D),t.context.path(G),e&&t.context.fill(),r&&t.context.stroke();break;case"circle":v=se(i,"cx",0),S=se(i,"cy",0),k=se(i,"r",0),t.context.ellipse(v,S,k,k),e&&t.context.fill(),r&&t.context.stroke();break;case"rect":c=se(i,"x",0),d=se(i,"y",0),H=se(i,"width",0),j=se(i,"height",0),_=se(i,"rx",0),R=se(i,"ry",0),_||R?t.context.roundRect(c,d,H,j,_||R):t.context.rect(c,d,H,j),e&&t.context.fill(),r&&t.context.stroke();break;case"ellipse":v=se(i,"cx",0),S=se(i,"cy",0),_=se(i,"rx",0),R=se(i,"ry",0),t.context.beginPath(),t.context.ellipse(v,S,_,R),e&&t.context.fill(),r&&t.context.stroke();break;case"line":p=se(i,"x1",0),m=se(i,"y1",0),y=se(i,"x2",0),w=se(i,"y2",0),t.context.beginPath(),t.context.moveTo(p,m),t.context.lineTo(y,w),r&&t.context.stroke();break;case"polygon":B=i.getAttribute("points"),O=B.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(O,!0),e&&t.context.fill(),r&&t.context.stroke();break;case"polyline":B=i.getAttribute("points"),O=B.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(O,!1),r&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}for(let nt=0;nt<o.length;nt++)Ng(o[nt],t,e,r)}function se(i,t,e){const r=i.getAttribute(t);return r?Number(r):e}function qw(i){const t=i.getAttribute("style"),e={},r={};let o=!1,a=!1;if(t){const u=t.split(";");for(let c=0;c<u.length;c++){const d=u[c],[p,m]=d.split(":");switch(p){case"stroke":m!=="none"&&(e.color=Qt.shared.setValue(m).toNumber(),a=!0);break;case"stroke-width":e.width=Number(m);break;case"fill":m!=="none"&&(o=!0,r.color=Qt.shared.setValue(m).toNumber());break;case"fill-opacity":r.alpha=Number(m);break;case"stroke-opacity":e.alpha=Number(m);break;case"opacity":r.alpha=Number(m),e.alpha=Number(m);break}}}else{const u=i.getAttribute("stroke");u&&u!=="none"&&(a=!0,e.color=Qt.shared.setValue(u).toNumber(),e.width=se(i,"stroke-width",1));const c=i.getAttribute("fill");c&&c!=="none"&&(o=!0,r.color=Qt.shared.setValue(c).toNumber())}return{strokeStyle:a?e:null,fillStyle:o?r:null}}function Kw(i){return Qt.isColorLike(i)}function Bp(i){return i instanceof fa}function zp(i){return i instanceof ws}function Qw(i,t,e){const r=Qt.shared.setValue(t??0);return i.color=r.toNumber(),i.alpha=r.alpha===1?e.alpha:r.alpha,i.texture=bt.WHITE,{...e,...i}}function Np(i,t,e){return i.fill=t,i.color=16777215,i.texture=t.texture,i.matrix=t.transform,{...e,...i}}function Dp(i,t,e){return t.buildLinearGradient(),i.fill=t,i.color=16777215,i.texture=t.texture,i.matrix=t.transform,{...e,...i}}function Zw(i,t){var o;const e={...t,...i};if(e.texture){if(e.texture!==bt.WHITE){const u=((o=e.matrix)==null?void 0:o.clone().invert())||new Tt;u.translate(e.texture.frame.x,e.texture.frame.y),u.scale(1/e.texture.source.width,1/e.texture.source.height),e.matrix=u}const a=e.texture.source.style;a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update())}const r=Qt.shared.setValue(e.color);return e.alpha*=r.alpha,e.color=r.toNumber(),e.matrix=e.matrix?e.matrix.clone():null,e}function xi(i,t){if(i==null)return null;const e={},r=i;return Kw(i)?Qw(e,i,t):Bp(i)?Np(e,i,t):zp(i)?Dp(e,i,t):r.fill&&Bp(r.fill)?Np(r,r.fill,t):r.fill&&zp(r.fill)?Dp(r,r.fill,t):Zw(r,t)}function aa(i,t){const{width:e,alignment:r,miterLimit:o,cap:a,join:u,pixelLine:c,...d}=t,p=xi(i,d);return p?{width:e,alignment:r,miterLimit:o,cap:a,join:u,pixelLine:c,...p}:null}const Jw=new At,Wp=new Tt,Oh=class fn extends nn{constructor(){super(...arguments),this.uid=ee("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ir,this._transform=new Tt,this._fillStyle={...fn.defaultFillStyle},this._strokeStyle={...fn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new yn,this._boundsDirty=!0}clone(){const t=new fn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=xi(t,fn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=aa(t,fn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=xi(t,fn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=xi(t,fn.defaultStrokeStyle),this}texture(t,e,r,o,a,u){return this.instructions.push({action:"texture",data:{image:t,dx:r||0,dy:o||0,dw:a||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Qt.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ir,this}fill(t,e){let r;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o&&o.action==="stroke"?r=o.data.path:r=this._activePath.clone(),r?(t!=null&&(e!==void 0&&typeof t=="number"&&(Et(It,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=xi(t,fn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(At.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="fill"?e=r.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=aa(t,fn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],r=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(r);else{e.data.hole=r;break}}return this._initNextPathLocation(),this}arc(t,e,r,o,a,u){this._tick++;const c=this._transform;return this._activePath.arc(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,r,o,a,u),this}arcTo(t,e,r,o,a){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*r+u.c*o+u.tx,u.b*r+u.d*o+u.ty,a),this}arcToSvg(t,e,r,o,a,u,c){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,e,r,o,a,d.a*u+d.c*c+d.tx,d.b*u+d.d*c+d.ty),this}bezierCurveTo(t,e,r,o,a,u,c){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*e+d.tx,d.b*t+d.d*e+d.ty,d.a*r+d.c*o+d.tx,d.b*r+d.d*o+d.ty,d.a*a+d.c*u+d.tx,d.b*a+d.d*u+d.ty,c),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,r,o){return this._tick++,this._activePath.ellipse(t,e,r,o,this._transform.clone()),this}circle(t,e,r){return this._tick++,this._activePath.circle(t,e,r,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty),this}moveTo(t,e){this._tick++;const r=this._transform,o=this._activePath.instructions,a=r.a*t+r.c*e+r.tx,u=r.b*t+r.d*e+r.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=a,o[0].data[1]=u,this):(this._activePath.moveTo(a,u),this)}quadraticCurveTo(t,e,r,o,a){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*r+u.c*o+u.tx,u.b*r+u.d*o+u.ty,a),this}rect(t,e,r,o){return this._tick++,this._activePath.rect(t,e,r,o,this._transform.clone()),this}roundRect(t,e,r,o,a){return this._tick++,this._activePath.roundRect(t,e,r,o,a,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,r,o,a=0,u){return this._tick++,this._activePath.regularPoly(t,e,r,o,a,u),this}roundPoly(t,e,r,o,a,u){return this._tick++,this._activePath.roundPoly(t,e,r,o,a,u),this}roundShape(t,e,r,o){return this._tick++,this._activePath.roundShape(t,e,r,o),this}filletRect(t,e,r,o,a){return this._tick++,this._activePath.filletRect(t,e,r,o,a),this}chamferRect(t,e,r,o,a,u){return this._tick++,this._activePath.chamferRect(t,e,r,o,a,u),this}star(t,e,r,o,a=0,u=0){return this._tick++,this._activePath.star(t,e,r,o,a,u,this._transform.clone()),this}svg(t){return this._tick++,Xw(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,r,o,a,u){return t instanceof Tt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,r,o,a,u),this)}transform(t,e,r,o,a,u){return t instanceof Tt?(this._transform.append(t),this):(Wp.set(t,e,r,o,a,u),this._transform.append(Wp),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const r=this.instructions[e],o=r.action;if(o==="fill"){const a=r.data;t.addBounds(a.path.bounds)}else if(o==="texture"){const a=r.data;t.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(o==="stroke"){const a=r.data,u=a.style.alignment,c=a.style.width*(1-u),d=a.path.bounds;t.addFrame(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c)}}return t}containsPoint(t){var o;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let r=!1;for(let a=0;a<e.length;a++){const u=e[a],c=u.data,d=c.path;if(!u.action||!d)continue;const p=c.style,m=d.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const w=m[y].shape;if(!p||!w)continue;const v=m[y].transform,S=v?v.applyInverse(t,Jw):t;if(u.action==="fill")r=w.contains(S.x,S.y);else{const _=p;r=w.strokeContains(S.x,S.y,_.width,_.alignment)}const k=c.hole;if(k){const _=(o=k.shapePath)==null?void 0:o.shapePrimitives;if(_)for(let R=0;R<_.length;R++)_[R].shape.contains(S.x,S.y)&&(r=!1)}if(r)return!0}}return r}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(r),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(r)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Oh.defaultFillStyle={color:16777215,alpha:1,texture:bt.WHITE,matrix:null,fill:null};Oh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:bt.WHITE,matrix:null,fill:null,pixelLine:!1};let Ge=Oh;const Up=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function t_(i){const t=[];let e=0;for(let r=0;r<Up.length;r++){const o=`_${Up[r]}`;t[e++]=i[o]}return e=Dg(i._fill,t,e),e=e_(i._stroke,t,e),e=n_(i.dropShadow,t,e),t.join("-")}function Dg(i,t,e){var r;return i&&(t[e++]=i.color,t[e++]=i.alpha,t[e++]=(r=i.fill)==null?void 0:r.styleKey),e}function e_(i,t,e){return i&&(e=Dg(i,t,e),t[e++]=i.width,t[e++]=i.alignment,t[e++]=i.cap,t[e++]=i.join,t[e++]=i.miterLimit),e}function n_(i,t,e){return i&&(t[e++]=i.alpha,t[e++]=i.angle,t[e++]=i.blur,t[e++]=i.distance,t[e++]=Qt.shared.setValue(i.color).toNumber()),e}const Bh=class Qi extends nn{constructor(t={}){super(),i_(t);const e={...Qi.defaultTextStyle,...t};for(const r in e){const o=r;this[o]=e[r]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Qi.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Qi.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Ge.defaultFillStyle,...t},()=>{this._fill=xi({...this._originalFill},Ge.defaultFillStyle)})),this._fill=xi(t===0?"black":t,Ge.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Ge.defaultStrokeStyle,...t},()=>{this._stroke=aa({...this._originalStroke},Ge.defaultStrokeStyle)})),this._stroke=aa(t,Ge.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=t_(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=Qi.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Qi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var r,o,a,u;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const c=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(r=this._fill)!=null&&r.texture&&this._fill.texture.destroy(c),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(c),(a=this._stroke)!=null&&a.texture&&this._stroke.texture.destroy(c),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(c)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(r,o,a)=>(r[o]=a,e==null||e(o,a),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Qt.isColorLike(t)||t instanceof ws||t instanceof fa)}};Bh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Bh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let rr=Bh;function i_(i){const t=i;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=rr.defaultDropShadow;i.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Et(It,"strokeThickness is now a part of stroke");const e=t.stroke;let r={};if(Qt.isColorLike(e))r.color=e;else if(e instanceof ws||e instanceof fa)r.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))r=e;else throw new Error("Invalid stroke value.");i.stroke={...r,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Et(It,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;i.fontSize==null?i.fontSize=rr.defaultTextStyle.fontSize:typeof i.fontSize=="string"?e=parseInt(i.fontSize,10):e=i.fontSize;const r=new ws(0,0,0,e*1.7),o=t.fillGradientStops.map(a=>Qt.shared.setValue(a).toNumber());o.forEach((a,u)=>{const c=u/(o.length-1);r.addColorStop(c,a)}),i.fill={fill:r}}}class r_{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const r=Vt.get().createCanvas();r.width=t,r.height=e;const o=r.getContext("2d");return{canvas:r,context:o}}getOptimalCanvasAndContext(t,e,r=1){t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),t=sa(t),e=sa(e);const o=(t<<17)+(e<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let a=this._canvasPool[o].pop();return a||(a=this._createCanvasAndContext(t,e)),a}returnCanvasAndContext(t){const e=t.canvas,{width:r,height:o}=e,a=(r<<17)+(o<<1);t.context.clearRect(0,0,r,o),this._canvasPool[a].push(t)}clear(){this._canvasPool={}}}const Hp=new r_,s_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function mh(i){const t=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let e=i.fontFamily;Array.isArray(i.fontFamily)||(e=i.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let o=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!s_.includes(o)&&(o=`"${o}"`),e[r]=o}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${t} ${e.join(",")}`}const Gu={willReadFrequently:!0},rn=class ut{static get experimentalLetterSpacingSupported(){let t=ut._experimentalLetterSpacingSupported;if(t!==void 0){const e=Vt.get().getCanvasRenderingContext2D().prototype;t=ut._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,o,a,u,c,d,p){this.text=t,this.style=e,this.width=r,this.height=o,this.lines=a,this.lineWidths=u,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=p}static measureText(t=" ",e,r=ut._canvas,o=e.wordWrap){var O;const a=`${t}:${e.styleKey}`;if(ut._measurementCache[a])return ut._measurementCache[a];const u=mh(e),c=ut.measureFont(u);c.fontSize===0&&(c.fontSize=e.fontSize,c.ascent=e.fontSize);const d=ut.__context;d.font=u;const m=(o?ut._wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let w=0;for(let B=0;B<m.length;B++){const D=ut._measureText(m[B],e.letterSpacing,d);y[B]=D,w=Math.max(w,D)}const v=((O=e._stroke)==null?void 0:O.width)||0;let S=w+v;e.dropShadow&&(S+=e.dropShadow.distance);const k=e.lineHeight||c.fontSize;let _=Math.max(k,c.fontSize+v)+(m.length-1)*(k+e.leading);return e.dropShadow&&(_+=e.dropShadow.distance),new ut(t,e,S,_,m,y,k+e.leading,w,c)}static _measureText(t,e,r){let o=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,o=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const a=r.measureText(t);let u=a.width;const c=-a.actualBoundingBoxLeft;let p=a.actualBoundingBoxRight-c;if(u>0)if(o)u-=e,p-=e;else{const m=(ut.graphemeSegmenter(t).length-1)*e;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(t,e,r=ut._canvas){const o=r.getContext("2d",Gu);let a=0,u="",c="";const d=Object.create(null),{letterSpacing:p,whiteSpace:m}=e,y=ut._collapseSpaces(m),w=ut._collapseNewlines(m);let v=!y;const S=e.wordWrapWidth+p,k=ut._tokenize(t);for(let _=0;_<k.length;_++){let R=k[_];if(ut._isNewline(R)){if(!w){c+=ut._addLine(u),v=!y,u="",a=0;continue}R=" "}if(y){const B=ut.isBreakingSpace(R),D=ut.isBreakingSpace(u[u.length-1]);if(B&&D)continue}const O=ut._getFromCache(R,p,d,o);if(O>S)if(u!==""&&(c+=ut._addLine(u),u="",a=0),ut.canBreakWords(R,e.breakWords)){const B=ut.wordWrapSplit(R);for(let D=0;D<B.length;D++){let G=B[D],H=G,j=1;for(;B[D+j];){const dt=B[D+j];if(!ut.canBreakChars(H,dt,R,D,e.breakWords))G+=dt;else break;H=dt,j++}D+=j-1;const nt=ut._getFromCache(G,p,d,o);nt+a>S&&(c+=ut._addLine(u),v=!1,u="",a=0),u+=G,a+=nt}}else{u.length>0&&(c+=ut._addLine(u),u="",a=0);const B=_===k.length-1;c+=ut._addLine(R,!B),v=!1,u="",a=0}else O+a>S&&(v=!1,c+=ut._addLine(u),u="",a=0),(u.length>0||!ut.isBreakingSpace(R)||v)&&(u+=R,a+=O)}return c+=ut._addLine(u,!1),c}static _addLine(t,e=!0){return t=ut._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,r,o){let a=r[t];return typeof a!="number"&&(a=ut._measureText(t,e,o)+e,r[t]=a),a}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!ut.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:ut._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ut._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let r="";if(typeof t!="string")return e;for(let o=0;o<t.length;o++){const a=t[o],u=t[o+1];if(ut.isBreakingSpace(a,u)||ut._isNewline(a)){r!==""&&(e.push(r),r=""),e.push(a);continue}r+=a}return r!==""&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,o,a){return!0}static wordWrapSplit(t){return ut.graphemeSegmenter(t)}static measureFont(t){if(ut._fonts[t])return ut._fonts[t];const e=ut._context;e.font=t;const r=e.measureText(ut.METRICS_STRING+ut.BASELINE_SYMBOL),o={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return ut._fonts[t]=o,o}static clearMetrics(t=""){t?delete ut._fonts[t]:ut._fonts={}}static get _canvas(){if(!ut.__canvas){let t;try{const e=new OffscreenCanvas(0,0),r=e.getContext("2d",Gu);if(r!=null&&r.measureText)return ut.__canvas=e,e;t=Vt.get().createCanvas()}catch{t=Vt.get().createCanvas()}t.width=t.height=10,ut.__canvas=t}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",Gu)),ut.__context}};rn.METRICS_STRING="|q";rn.BASELINE_SYMBOL="M";rn.BASELINE_MULTIPLIER=1.4;rn.HEIGHT_MULTIPLIER=2;rn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return t=>[...i.segment(t)].map(e=>e.segment)}return i=>[...i]})();rn.experimentalLetterSpacing=!1;rn._fonts={};rn._newlines=[10,13];rn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];rn._measurementCache={};let gh=rn;function jp(i,t){if(i.texture===bt.WHITE&&!i.fill)return Qt.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof fa){const e=i.fill,r=t.createPattern(e.texture.source.resource,"repeat"),o=e.transform.copyTo(Tt.shared);return o.scale(e.texture.frame.width,e.texture.frame.height),r.setTransform(o),r}else if(i.fill instanceof ws){const e=i.fill;if(e.type==="linear"){const r=t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);return e.gradientStops.forEach(o=>{r.addColorStop(o.offset,Qt.shared.setValue(o.color).toHex())}),r}}}else{const e=t.createPattern(i.texture.source.resource,"repeat"),r=i.matrix.copyTo(Tt.shared);return r.scale(i.texture.frame.width,i.texture.frame.height),e.setTransform(r),e}return Zt("FillStyle not recognised",i),"red"}function Wg(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const t=[];for(let e=0,r=i.length;e<r;e++){const o=i[e];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const a=o[0].charCodeAt(0),u=o[1].charCodeAt(0);if(u<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,d=u;c<=d;c++)t.push(String.fromCharCode(c))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Ug=class Hg extends wg{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...Hg.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const r=e.style.clone();e.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=bt.WHITE,r._fill.fill=null),this.applyFillAsTint=e.overrideFill;const o=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const a=mh(r);e.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/o):r.fontSize=this.baseRenderedFontSize=o,this._style=r,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=gh.measureFont(a),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(t){var _,R;const e=Wg(t).filter(O=>!this._currentChars.includes(O)).filter((O,B,D)=>D.indexOf(O)===B);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:o,context:a}=r.canvasAndContext,u=r.texture.source;const c=this._style;let d=this._currentX,p=this._currentY;const m=this.baseRenderedFontSize/this.baseMeasurementFontSize,y=this._padding*m;let w=0,v=!1;const S=o.width/this.resolution,k=o.height/this.resolution;for(let O=0;O<e.length;O++){const B=e[O],D=gh.measureText(B,c,o,!1);D.lineHeight=D.height;const G=D.width*m,H=Math.ceil((c.fontStyle==="italic"?2:1)*G),j=D.height*m,nt=H+y*2,dt=j+y*2;if(v=!1,B!==`
`&&B!=="\r"&&B!=="	"&&B!==" "&&(v=!0,w=Math.ceil(Math.max(dt,w))),d+nt>S&&(p+=w,w=dt,d=0,p+w>k)){u.update();const tt=this._nextPage();o=tt.canvasAndContext.canvas,a=tt.canvasAndContext.context,u=tt.texture.source,p=0}const J=G/m-(((_=c.dropShadow)==null?void 0:_.distance)??0)-(((R=c._stroke)==null?void 0:R.width)??0);if(this.chars[B]={id:B.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:J,kerning:{}},v){this._drawGlyph(a,D,d+y,p+y,m,c);const tt=u.width*m,_t=u.height*m,xt=new Ht(d/tt*u.width,p/_t*u.height,nt/tt*u.width,dt/_t*u.height);this.chars[B].texture=new bt({source:u,frame:xt}),d+=Math.ceil(nt)}}u.update(),this._currentX=d,this._currentY=p,this._skipKerning&&this._applyKerning(e,a)}get pageTextures(){return Et(It,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const r=this._measureCache;for(let o=0;o<t.length;o++){const a=t[o];for(let u=0;u<this._currentChars.length;u++){const c=this._currentChars[u];let d=r[a];d||(d=r[a]=e.measureText(a).width);let p=r[c];p||(p=r[c]=e.measureText(c).width);let m=e.measureText(a+c).width,y=m-(d+p);y&&(this.chars[a].kerning[c]=y),m=e.measureText(a+c).width,y=m-(d+p),y&&(this.chars[c].kerning[a]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Hp.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const r=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new bt({source:new sr({resource:e.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),a={canvasAndContext:e,texture:o};return this.pages[this._currentPageIndex]=a,a}_setupContext(t,e,r){e.fontSize=this.baseRenderedFontSize,t.scale(r,r),t.font=mh(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const o=e._stroke,a=(o==null?void 0:o.width)??0;if(o&&(t.lineWidth=a,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=jp(o,t)),e._fill&&(t.fillStyle=jp(e._fill,t)),e.dropShadow){const u=e.dropShadow,c=Qt.shared.setValue(u.color).toArray(),d=u.blur*r,p=u.distance*r;t.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${u.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(u.angle)*p,t.shadowOffsetY=Math.sin(u.angle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,r,o,a,u){const c=e.text,d=e.fontProperties,p=u._stroke,m=((p==null?void 0:p.width)??0)*a,y=r+m/2,w=o-m/2,v=d.descent*a,S=e.lineHeight*a;u.stroke&&m&&t.strokeText(c,y,w+S-v),u._fill&&t.fillText(c,y,w+S-v)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:r}=this.pages[t];Hp.returnCanvasAndContext(e),r.destroy(!0)}this.pages=null}};Ug.defaultOptions={textureSize:512,style:new rr,mipmap:!0};let Gp=Ug;function o_(i,t,e,r){const o={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=e.baseLineOffset;let a=o.lines[0],u=null,c=!0;const d={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},p=S=>{const k=a.width;for(let _=0;_<d.index;_++){const R=S.positions[_];a.chars.push(S.chars[_]),a.charPositions.push(R+k)}a.width+=S.width,c=!1,d.width=0,d.index=0,d.chars.length=0},m=()=>{let S=a.chars.length-1;if(r){let k=a.chars[S];for(;k===" ";)a.width-=e.chars[k].xAdvance,k=a.chars[--S]}o.width=Math.max(o.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,o.lines.push(a),o.height+=e.lineHeight},y=e.baseMeasurementFontSize/t.fontSize,w=t.letterSpacing*y,v=t.wordWrapWidth*y;for(let S=0;S<i.length+1;S++){let k;const _=S===i.length;_||(k=i[S]);const R=e.chars[k]||e.chars[" "];if(/(?:\s)/.test(k)||k==="\r"||k===`
`||_){if(!c&&t.wordWrap&&a.width+d.width-w>v?(m(),p(d),_||a.charPositions.push(0)):(d.start=a.width,p(d),_||a.charPositions.push(0)),k==="\r"||k===`
`)a.width!==0&&m();else if(!_){const G=R.xAdvance+(R.kerning[u]||0)+w;a.width+=G,a.spaceWidth=G,a.spacesIndex.push(a.charPositions.length),a.chars.push(k)}}else{const D=R.kerning[u]||0,G=R.xAdvance+D+w;d.positions[d.index++]=d.width+D,d.chars.push(k),d.width+=G}u=k}return m(),t.align==="center"?a_(o):t.align==="right"?l_(o):t.align==="justify"&&u_(o),o}function a_(i){for(let t=0;t<i.lines.length;t++){const e=i.lines[t],r=i.width/2-e.width/2;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=r}}function l_(i){for(let t=0;t<i.lines.length;t++){const e=i.lines[t],r=i.width-e.width;for(let o=0;o<e.charPositions.length;o++)e.charPositions[o]+=r}}function u_(i){const t=i.width;for(let e=0;e<i.lines.length;e++){const r=i.lines[e];let o=0,a=r.spacesIndex[o++],u=0;const c=r.spacesIndex.length,p=(t-r.width)/c;for(let m=0;m<r.charPositions.length;m++)m===a&&(a=r.spacesIndex[o++],u+=p),r.charPositions[m]+=u}}let Ko=0;class h_{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var u;let r=`${e.fontFamily}-bitmap`,o=!0;if(e._fill.fill&&!e._stroke)r+=e._fill.fill.styleKey,o=!1;else if(e._stroke||e.dropShadow){let c=e.styleKey;c=c.substring(0,c.lastIndexOf("-")),r=`${c}-bitmap`,o=!1}if(!Gt.has(r)){const c=new Gp({style:e,overrideFill:o,overrideSize:!0,...this.defaultOptions});Ko++,Ko>50&&Zt("BitmapText",`You have dynamically created ${Ko} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),c.once("destroy",()=>{Ko--,Gt.remove(r)}),Gt.set(r,c)}const a=Gt.get(r);return(u=a.ensureCharacters)==null||u.call(a,t),a}getLayout(t,e,r=!0){const o=this.getFont(t,e);return o_([...t],e,o,r)}measureText(t,e,r=!0){return this.getLayout(t,e,r)}install(...t){var p,m,y,w;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(p=t[2])==null?void 0:p.chars,resolution:(m=t[2])==null?void 0:m.resolution,padding:(y=t[2])==null?void 0:y.padding,skipKerning:(w=t[2])==null?void 0:w.skipKerning},Et(It,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const r=e==null?void 0:e.name;if(!r)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const o=e.style,a=o instanceof rr?o:new rr(o),u=a._fill.fill!==null&&a._fill.fill!==void 0,c=new Gp({style:a,overrideFill:u,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),d=Wg(e.chars);return c.ensureCharacters(d.join("")),Gt.set(`${r}-bitmap`,c),c.once("destroy",()=>Gt.remove(`${r}-bitmap`)),c}uninstall(t){const e=`${t}-bitmap`,r=Gt.get(e);r&&r.destroy()}}const Vp=new h_;class jg extends wg{constructor(t,e){super();const{textures:r,data:o}=t;Object.keys(o.pages).forEach(a=>{const u=o.pages[parseInt(a,10)],c=r[u.id];this.pages.push({texture:c})}),Object.keys(o.chars).forEach(a=>{const u=o.chars[a],{frame:c,source:d}=r[u.page],p=new Ht(u.x+c.x,u.y+c.y,u.width,u.height),m=new bt({source:d,frame:p});this.chars[a]={id:a.codePointAt(0),xOffset:u.xOffset,yOffset:u.yOffset,xAdvance:u.xAdvance,kerning:u.kerning??{},texture:m}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Vp.install(t)}static uninstall(t){Vp.uninstall(t)}}const Vu={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const t=i.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const w=t[y].match(/^[a-z]+/gm)[0],v=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),S={};for(const k in v){const _=v[k].split("="),R=_[0],O=_[1].replace(/"/gm,""),B=parseFloat(O),D=isNaN(B)?O:B;S[R]=D}e[w].push(S)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=e.info,[a]=e.common,[u]=e.distanceField;u&&(r.distanceField={range:parseInt(u.distanceRange,10),type:u.fieldType}),r.fontSize=parseInt(o.size,10),r.fontFamily=o.face,r.lineHeight=parseInt(a.lineHeight,10);const c=e.page;for(let y=0;y<c.length;y++)r.pages.push({id:parseInt(c[y].id,10)||0,file:c[y].file});const d={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);const p=e.char;for(let y=0;y<p.length;y++){const w=p[y],v=parseInt(w.id,10);let S=w.letter??w.char??String.fromCharCode(v);S==="space"&&(S=" "),d[v]=S,r.chars[S]={id:v,page:parseInt(w.page,10)||0,x:parseInt(w.x,10),y:parseInt(w.y,10),width:parseInt(w.width,10),height:parseInt(w.height,10),xOffset:parseInt(w.xoffset,10),yOffset:parseInt(w.yoffset,10),xAdvance:parseInt(w.xadvance,10),kerning:{}}}const m=e.kerning;for(let y=0;y<m.length;y++){const w=parseInt(m[y].first,10),v=parseInt(m[y].second,10),S=parseInt(m[y].amount,10);r.chars[d[v]].kerning[d[w]]=S}return r}},$p={test(i){const t=i;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=i.getElementsByTagName("info")[0],r=i.getElementsByTagName("common")[0],o=i.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const a=i.getElementsByTagName("page"),u=i.getElementsByTagName("char"),c=i.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let p=0;p<a.length;p++)t.pages.push({id:parseInt(a[p].getAttribute("id"),10)||0,file:a[p].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute("base"),10);for(let p=0;p<u.length;p++){const m=u[p],y=parseInt(m.getAttribute("id"),10);let w=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);w==="space"&&(w=" "),d[y]=w,t.chars[w]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<c.length;p++){const m=parseInt(c[p].getAttribute("first"),10),y=parseInt(c[p].getAttribute("second"),10),w=parseInt(c[p].getAttribute("amount"),10);t.chars[d[y]].kerning[d[m]]=w}return t}},Yp={test(i){return typeof i=="string"&&i.includes("<font>")?$p.test(Vt.get().parseXML(i)):!1},parse(i){return $p.parse(Vt.get().parseXML(i))}},c_=[".xml",".fnt"],d_={extension:{type:ct.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof jg,getCacheableAssets(i,t){const e={};return i.forEach(r=>{e[r]=t,e[`${r}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},f_={extension:{type:ct.LoadParser,priority:Jn.Normal},name:"loadBitmapFont",test(i){return c_.includes(Be.extname(i).toLowerCase())},async testParse(i){return Vu.test(i)||Yp.test(i)},async parse(i,t,e){const r=Vu.test(i)?Vu.parse(i):Yp.parse(i),{src:o}=t,{pages:a}=r,u=[],c=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<a.length;++y){const w=a[y].file;let v=Be.join(Be.dirname(o),w);v=sh(v,o),u.push({src:v,data:c})}const d=await e.load(u),p=u.map(y=>d[y.src]);return new jg({data:r,textures:p},o)},async load(i,t){return await(await Vt.get().fetch(i)).text()},async unload(i,t,e){await Promise.all(i.pages.map(r=>e.unload(r.texture.source._sourceOrigin))),i.destroy()}};class p_{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const m_={extension:{type:ct.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(t=>t instanceof bt),getCacheableAssets:(i,t)=>{const e={};return i.forEach(r=>{t.forEach((o,a)=>{e[r+(a===0?"":a+1)]=o})}),e}};async function Gg(i){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(i)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const g_={extension:{type:ct.DetectionParser,priority:1},test:async()=>Gg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(t=>t!=="avif")},Xp=["png","jpg","jpeg"],y_={extension:{type:ct.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Xp],remove:async i=>i.filter(t=>!Xp.includes(t))},x_="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function zh(i){return x_?!1:document.createElement("video").canPlayType(i)!==""}const v_={extension:{type:ct.DetectionParser,priority:0},test:async()=>zh("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(t=>t!=="mp4"&&t!=="m4v")},w_={extension:{type:ct.DetectionParser,priority:0},test:async()=>zh("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(t=>t!=="ogv")},__={extension:{type:ct.DetectionParser,priority:0},test:async()=>zh("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(t=>t!=="webm")},S_={extension:{type:ct.DetectionParser,priority:0},test:async()=>Gg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(t=>t!=="webp")};class C_{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,r)=>(this._parsersValidated=!1,t[e]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{var u,c;let o=null,a=null;if(e.loadParser&&(a=this._parserHash[e.loadParser],a||Zt(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!a){for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.load&&((u=p.test)!=null&&u.call(p,t,e,this))){a=p;break}}if(!a)return Zt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await a.load(t,e,this),r.parser=a;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];p.parse&&p.parse&&await((c=p.testParse)==null?void 0:c.call(p,o,e,this))&&(o=await p.parse(o,e,this)||o,r.parser=p)}return o})(),r}async load(t,e){this._parsersValidated||this._validateParsers();let r=0;const o={},a=oa(t),u=en(t,p=>({alias:[p],src:p,data:{}})),c=u.length,d=u.map(async p=>{const m=Be.toAbsolute(p.src);if(!o[p.src])try{this.promiseCache[m]||(this.promiseCache[m]=this._getLoadPromiseAndParser(m,p)),o[p.src]=await this.promiseCache[m].promise,e&&e(++r/c)}catch(y){throw delete this.promiseCache[m],delete o[p.src],new Error(`[Loader.load] Failed to load ${m}.
${y}`)}});return await Promise.all(d),a?o[u[0].src]:o}async unload(t){const r=en(t,o=>({alias:[o],src:o})).map(async o=>{var c,d;const a=Be.toAbsolute(o.src),u=this.promiseCache[a];if(u){const p=await u.promise;delete this.promiseCache[a],await((d=(c=u.parser)==null?void 0:c.unload)==null?void 0:d.call(c,p,o,this))}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&Zt(`[Assets] loadParser name conflict "${e.name}"`):Zt("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function ar(i,t){if(Array.isArray(t)){for(const e of t)if(i.startsWith(`data:${e}`))return!0;return!1}return i.startsWith(`data:${t}`)}function lr(i,t){const e=i.split("?")[0],r=Be.extname(e).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const A_=".json",k_="application/json",b_={extension:{type:ct.LoadParser,priority:Jn.Low},name:"loadJson",test(i){return ar(i,k_)||lr(i,A_)},async load(i){return await(await Vt.get().fetch(i)).json()}},P_=".txt",E_="text/plain",T_={name:"loadTxt",extension:{type:ct.LoadParser,priority:Jn.Low,name:"loadTxt"},test(i){return ar(i,E_)||lr(i,P_)},async load(i){return await(await Vt.get().fetch(i)).text()}},M_=["normal","bold","100","200","300","400","500","600","700","800","900"],R_=[".ttf",".otf",".woff",".woff2"],I_=["font/ttf","font/otf","font/woff","font/woff2"],F_=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function L_(i){const t=Be.extname(i),o=Be.basename(i,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let a=o.length>0;for(const c of o)if(!c.match(F_)){a=!1;break}let u=o.join(" ");return a||(u=`"${u.replace(/[\\"]/g,"\\$&")}"`),u}const O_=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function B_(i){return O_.test(i)?i:encodeURI(i)}const z_={extension:{type:ct.LoadParser,priority:Jn.Low},name:"loadWebFont",test(i){return ar(i,I_)||lr(i,R_)},async load(i,t){var r,o,a;const e=Vt.get().getFontFaceSet();if(e){const u=[],c=((r=t.data)==null?void 0:r.family)??L_(i),d=((a=(o=t.data)==null?void 0:o.weights)==null?void 0:a.filter(m=>M_.includes(m)))??["normal"],p=t.data??{};for(let m=0;m<d.length;m++){const y=d[m],w=new FontFace(c,`url(${B_(i)})`,{...p,weight:y});await w.load(),e.add(w),u.push(w)}return Gt.set(`${c}-and-url`,{url:i,fontFaces:u}),u.length===1?u[0]:u}return Zt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(t=>{Gt.remove(`${t.family}-and-url`),Vt.get().getFontFaceSet().delete(t)})}};function Nh(i,t=1){var r;const e=(r=or.RETINA_PREFIX)==null?void 0:r.exec(i);return e?parseFloat(e[1]):t}function Dh(i,t,e){i.label=e,i._sourceOrigin=e;const r=new bt({source:i,label:e}),o=()=>{delete t.promiseCache[e],Gt.has(e)&&Gt.remove(e)};return r.source.once("destroy",()=>{t.promiseCache[e]&&(Zt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),r.once("destroy",()=>{i.destroyed||(Zt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),r}const N_=".svg",D_="image/svg+xml",W_={extension:{type:ct.LoadParser,priority:Jn.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return ar(i,D_)||lr(i,N_)},async load(i,t,e){return t.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?H_(i):U_(i,t,e,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function U_(i,t,e,r){var _,R,O;const a=await(await Vt.get().fetch(i)).blob(),u=URL.createObjectURL(a),c=new Image;c.src=u,c.crossOrigin=r,await c.decode(),URL.revokeObjectURL(u);const d=document.createElement("canvas"),p=d.getContext("2d"),m=((_=t.data)==null?void 0:_.resolution)||Nh(i),y=((R=t.data)==null?void 0:R.width)??c.width,w=((O=t.data)==null?void 0:O.height)??c.height;d.width=y*m,d.height=w*m,p.drawImage(c,0,0,y*m,w*m);const{parseAsGraphicsContext:v,...S}=t.data,k=new sr({resource:d,alphaMode:"premultiply-alpha-on-upload",resolution:m,...S});return Dh(k,e,i)}async function H_(i){const e=await(await Vt.get().fetch(i)).text(),r=new Ge;return r.svg(e),r}const j_=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Zi=null,yh=class{constructor(){Zi||(Zi=URL.createObjectURL(new Blob([j_],{type:"application/javascript"}))),this.worker=new Worker(Zi)}};yh.revokeObjectURL=function(){Zi&&(URL.revokeObjectURL(Zi),Zi=null)};const G_=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ji=null;class Vg{constructor(){Ji||(Ji=URL.createObjectURL(new Blob([G_],{type:"application/javascript"}))),this.worker=new Worker(Ji)}}Vg.revokeObjectURL=function(){Ji&&(URL.revokeObjectURL(Ji),Ji=null)};let qp=0,$u;class V_{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new yh;e.addEventListener("message",r=>{e.terminate(),yh.revokeObjectURL(),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var r;return this._run("loadImageBitmap",[t,(r=e==null?void 0:e.data)==null?void 0:r.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){$u===void 0&&($u=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<$u&&(this._createdWorkers++,t=new Vg().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((o,a)=>{this._queue.push({id:t,arguments:e,resolve:o,reject:a})});return this._next(),r}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),r=e.id;this._resolveHash[qp]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:qp++,id:r})}}const Kp=new V_,$_=[".jpeg",".jpg",".png",".webp",".avif"],Y_=["image/jpeg","image/png","image/webp","image/avif"];async function X_(i,t){var o;const e=await Vt.get().fetch(i);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${e.status} ${e.statusText}`);const r=await e.blob();return((o=t==null?void 0:t.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const $g={name:"loadTextures",extension:{type:ct.LoadParser,priority:Jn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return ar(i,Y_)||lr(i,$_)},async load(i,t,e){var a;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Kp.isImageBitmapSupported()?r=await Kp.loadImageBitmap(i,t):r=await X_(i,t):r=await new Promise(u=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=i,r.complete?u(r):r.onload=()=>{u(r)}});const o=new sr({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((a=t.data)==null?void 0:a.resolution)||Nh(i),...t.data});return Dh(o,e,i)},unload(i){i.destroy(!0)}},Yg=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],q_=Yg.map(i=>`video/${i.substring(1)}`);function K_(i,t,e){e===void 0&&!t.startsWith("data:")?i.crossOrigin=Z_(t):e!==!1&&(i.crossOrigin=typeof e=="string"?e:"anonymous")}function Q_(i){return new Promise((t,e)=>{i.addEventListener("canplaythrough",r),i.addEventListener("error",o),i.load();function r(){a(),t()}function o(u){a(),e(u)}function a(){i.removeEventListener("canplaythrough",r),i.removeEventListener("error",o)}})}function Z_(i,t=globalThis.location){if(i.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(i,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const J_={name:"loadVideo",extension:{type:ct.LoadParser,name:"loadVideo"},test(i){const t=ar(i,q_),e=lr(i,Yg);return t||e},async load(i,t,e){var d,p;const r={...Zo.defaultOptions,resolution:((d=t.data)==null?void 0:d.resolution)||Nh(i),alphaMode:((p=t.data)==null?void 0:p.alphaMode)||await Jm(),...t.data},o=document.createElement("video"),a={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(a).forEach(m=>{const y=a[m];y!==void 0&&o.setAttribute(m,y)}),r.muted===!0&&(o.muted=!0),K_(o,i,r.crossorigin);const u=document.createElement("source");let c;if(i.startsWith("data:"))c=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const m=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();c=Zo.MIME_TYPES[m]||`video/${m}`}return u.src=i,c&&(u.type=c),new Promise(m=>{const y=async()=>{const w=new Zo({...r,resource:o});o.removeEventListener("canplay",y),t.data.preload&&await Q_(o),m(Dh(w,e,i))};o.addEventListener("canplay",y),o.appendChild(u)})},unload(i){i.destroy(!0)}},Xg={extension:{type:ct.ResolveParser,name:"resolveTexture"},test:$g.test,parse:i=>{var t;return{resolution:parseFloat(((t=or.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:i.split(".").pop(),src:i}}},tS={extension:{type:ct.ResolveParser,priority:-2,name:"resolveJson"},test:i=>or.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:Xg.parse};class eS{constructor(){this._detections=[],this._initialized=!1,this.resolver=new or,this.loader=new C_,this.cache=Gt,this._backgroundLoader=new p_(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var a,u;if(this._initialized){Zt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let c=t.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const e=((a=t.texturePreference)==null?void 0:a.resolution)??1,r=typeof e=="number"?[e]:e,o=await this._detectFormats({preferredFormats:(u=t.texturePreference)==null?void 0:u.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const r=oa(t),o=en(t).map(c=>{if(typeof c!="string"){const d=this.resolver.getAlias(c);return d.some(p=>!this.resolver.hasKey(p))&&this.add(c),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),a=this.resolver.resolve(o),u=await this._mapLoadToResolve(a,e);return r?u[o[0]]:u}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;typeof t=="string"&&(r=!0,t=[t]);const o=this.resolver.resolveBundle(t),a={},u=Object.keys(o);let c=0,d=0;const p=()=>{e==null||e(++c/d)},m=u.map(y=>{const w=o[y];return d+=Object.keys(w).length,this._mapLoadToResolve(w,p).then(v=>{a[y]=v})});return await Promise.all(m),r?a[t[0]]:a}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Gt.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=Gt.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(r,e);this._backgroundLoader.active=!0;const a={};return r.forEach(u=>{const c=o[u.src],d=[u.src];u.alias&&d.push(...u.alias),d.forEach(p=>{a[p]=c}),Gt.set(d,c)}),a}async unload(t){this._initialized||await this.init();const e=en(t).map(o=>typeof o!="string"?o.src:o),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=en(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(o=>this._unloadFromResolved(e[o]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(r=>{Gt.remove(r.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const r of t.detections)t.skipDetections||await r.test()?e=await r.add(e):t.skipDetections||(e=await r.remove(e));return e=e.filter((r,o)=>e.indexOf(r)===o),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(r=>r in t).forEach(r=>{e.config[r]=t[r]})})}}const pn=new eS;ve.handleByList(ct.LoadParser,pn.loader.parsers).handleByList(ct.ResolveParser,pn.resolver.parsers).handleByList(ct.CacheParser,pn.cache.parsers).handleByList(ct.DetectionParser,pn.detections);ve.add(m_,y_,g_,S_,v_,w_,__,b_,T_,z_,W_,$g,J_,f_,d_,Xg,tS);const Qp={loader:ct.LoadParser,resolver:ct.ResolveParser,cache:ct.CacheParser,detection:ct.DetectionParser};ve.handle(ct.Asset,i=>{const t=i.ref;Object.entries(Qp).filter(([e])=>!!t[e]).forEach(([e,r])=>ve.add(Object.assign(t[e],{extension:t[e].extension??r})))},i=>{const t=i.ref;Object.keys(Qp).filter(e=>!!t[e]).forEach(e=>ve.remove(t[e]))});class Rn extends Eh{constructor(t){t instanceof Ge&&(t={context:t});const{context:e,roundPixels:r,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new Ge,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Rn(this._context.clone()):(this._ownedContext=null,new Rn(this._context))}lineStyle(t,e,r){Et(It,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),e&&(o.color=e),r&&(o.alpha=r),this.context.strokeStyle=o,this}beginFill(t,e){Et(It,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const r={};return t!==void 0&&(r.color=t),e!==void 0&&(r.alpha=e),this.context.fillStyle=r,this}endFill(){Et(It,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Ge.defaultStrokeStyle.width||t.color!==Ge.defaultStrokeStyle.color||t.alpha!==Ge.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Et(It,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Et(It,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Et(It,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Et(It,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Et(It,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Et(It,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class nS extends Eh{constructor(t,e){const{text:r,resolution:o,style:a,anchor:u,width:c,height:d,roundPixels:p,...m}=t;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=r??"",this.style=a,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Ee({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=p??!1,c!==void 0&&(this.width=c),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,r=this.bounds.height,o=-e*this.anchor.x;let a=0;return t.x>=o&&t.x<=o+e&&(a=-r*this.anchor.y,t.y>=a&&t.y<=a+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function iS(i,t){let e=i[0]??{};return(typeof e=="string"||i[1])&&(Et(It,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:i[1]}),e}class qg extends nS{constructor(...t){const e=iS(t,"Text");super(e,rr),this.renderPipeId="text"}updateBounds(){const t=this._bounds,e=this._anchor,r=gh.measureText(this._text,this._style),{width:o,height:a}=r;t.minX=-e._x*o,t.maxX=t.minX+o,t.minY=-e._y*a,t.maxY=t.minY+a}}ve.add(Hx,jx);var Yu={},es={},Zp;function ks(){if(Zp)return es;Zp=1,Object.defineProperty(es,"__esModule",{value:!0}),es.Collector=void 0;let i=class{constructor(e){this.emit=(...r)=>{e.emitCollecting(this,r)}}};return es.Collector=i,es}var ns={},Jp;function rS(){if(Jp)return ns;Jp=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.CollectorArray=void 0;const i=ks();let t=class extends i.Collector{constructor(){super(...arguments),this.result=[]}handleResult(r){return this.result.push(r),!0}getResult(){return this.result}reset(){this.result.length=0}};return ns.CollectorArray=t,ns}var is={},tm;function sS(){if(tm)return is;tm=1,Object.defineProperty(is,"__esModule",{value:!0}),is.CollectorLast=void 0;const i=ks();let t=class extends i.Collector{handleResult(r){return this.result=r,!0}getResult(){return this.result}reset(){delete this.result}};return is.CollectorLast=t,is}var rs={},em;function oS(){if(em)return rs;em=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.CollectorUntil0=void 0;const i=ks();let t=class extends i.Collector{constructor(){super(...arguments),this.result=!1}handleResult(r){return this.result=r,this.result}getResult(){return this.result}reset(){this.result=!1}};return rs.CollectorUntil0=t,rs}var ss={},nm;function aS(){if(nm)return ss;nm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.CollectorWhile0=void 0;const i=ks();let t=class extends i.Collector{constructor(){super(...arguments),this.result=!1}handleResult(r){return this.result=r,!this.result}getResult(){return this.result}reset(){this.result=!1}};return ss.CollectorWhile0=t,ss}var os={},as={},im;function lS(){if(im)return as;im=1,Object.defineProperty(as,"__esModule",{value:!0}),as.SignalConnectionImpl=void 0;class i{constructor(e){this.link=e}disconnect(){return this.link.unlink()}set enabled(e){this.link.setEnabled(e)}get enabled(){return this.link.isEnabled()}}return as.SignalConnectionImpl=i,as}var ls={},rm;function uS(){if(rm)return ls;rm=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SignalLink=void 0;let i=class Kg{constructor(e,r,o){this.enabled=!0,this.newLink=!1,this.prev=e??this,this.next=r??this,this.order=o.order,this.isPublic=o.isPublic,this.callback=o.callback,this.onUnlink=o.onUnlink}isEnabled(){return this.enabled&&!this.newLink}setEnabled(e){this.enabled=e}unlink(){return this.callback?(delete this.callback,this.next.prev=this.prev,this.prev.next=this.next,this.onUnlink(),!0):!1}insert(e){const{order:r}=e;let o=this.prev;for(;o!==this&&!(o.order<=r);)o=o.prev;const a=new Kg(o,o.next,e);return o.next=a,a.next.prev=a,a}};return ls.SignalLink=i,ls}var sm;function hS(){if(sm)return os;sm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.Signal=void 0;const i=lS(),t=uS(),e={order:0,isPublic:!0,onUnlink(){}};let r=class{constructor(){this.head=new t.SignalLink(null,null,e),this.hasNewLinks=!1,this.emitDepth=0,this.connectionsCount=0,this.onUnlink=()=>{this.connectionsCount--}}getConnectionsCount(){return this.connectionsCount}hasConnections(){return this.connectionsCount>0}connect(a,{order:u=0,isPublic:c=!0}={}){this.connectionsCount++;const d=this.head.insert({callback:a,order:u,isPublic:c,onUnlink:this.onUnlink});return this.emitDepth>0&&(this.hasNewLinks=!0,d.newLink=!0),new i.SignalConnectionImpl(d)}disconnect(a){for(let u=this.head.next;u!==this.head;u=u.next)if(u.callback===a)return u.unlink(),!0;return!1}disconnectAll(){let{next:a}=this.head;for(;a!==this.head;)a.isPublic&&a.unlink(),a=a.next}emit(...a){this.emitDepth++;for(let u=this.head.next;u!==this.head;u=u.next)u.isEnabled()&&u.callback&&u.callback.apply(null,a);this.emitDepth--,this.unsetNewLink()}emitCollecting(a,u){this.emitDepth++;for(let c=this.head.next;c!==this.head;c=c.next)if(c.isEnabled()&&c.callback){const d=c.callback.apply(null,u);if(!a.handleResult(d))break}this.emitDepth--,this.unsetNewLink()}unsetNewLink(){if(this.hasNewLinks&&this.emitDepth===0){for(let a=this.head.next;a!==this.head;a=a.next)a.newLink=!1;this.hasNewLinks=!1}}};return os.Signal=r,os}var us={},om;function cS(){if(om)return us;om=1,Object.defineProperty(us,"__esModule",{value:!0}),us.SignalConnections=void 0;let i=class{constructor(){this.list=[]}add(e){this.list.push(e)}disconnectAll(){for(const e of this.list)e.disconnect();this.list=[]}getCount(){return this.list.length}isEmpty(){return this.list.length===0}};return us.SignalConnections=i,us}var am;function dS(){return am||(am=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SignalConnections=i.Signal=i.CollectorWhile0=i.CollectorUntil0=i.CollectorLast=i.CollectorArray=i.Collector=void 0;var t=ks();Object.defineProperty(i,"Collector",{enumerable:!0,get:function(){return t.Collector}});var e=rS();Object.defineProperty(i,"CollectorArray",{enumerable:!0,get:function(){return e.CollectorArray}});var r=sS();Object.defineProperty(i,"CollectorLast",{enumerable:!0,get:function(){return r.CollectorLast}});var o=oS();Object.defineProperty(i,"CollectorUntil0",{enumerable:!0,get:function(){return o.CollectorUntil0}});var a=aS();Object.defineProperty(i,"CollectorWhile0",{enumerable:!0,get:function(){return a.CollectorWhile0}});var u=hS();Object.defineProperty(i,"Signal",{enumerable:!0,get:function(){return u.Signal}});var c=cS();Object.defineProperty(i,"SignalConnections",{enumerable:!0,get:function(){return c.SignalConnections}})}(Yu)),Yu}var wi=dS();function Qg(i,t){return function(){return i.apply(t,arguments)}}const{toString:fS}=Object.prototype,{getPrototypeOf:Wh}=Object,ma=(i=>t=>{const e=fS.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),sn=i=>(i=i.toLowerCase(),t=>ma(t)===i),ga=i=>t=>typeof t===i,{isArray:ur}=Array,Cs=ga("undefined");function pS(i){return i!==null&&!Cs(i)&&i.constructor!==null&&!Cs(i.constructor)&&ze(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Zg=sn("ArrayBuffer");function mS(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&Zg(i.buffer),t}const gS=ga("string"),ze=ga("function"),Jg=ga("number"),ya=i=>i!==null&&typeof i=="object",yS=i=>i===!0||i===!1,ea=i=>{if(ma(i)!=="object")return!1;const t=Wh(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},xS=sn("Date"),vS=sn("File"),wS=sn("Blob"),_S=sn("FileList"),SS=i=>ya(i)&&ze(i.pipe),CS=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||ze(i.append)&&((t=ma(i))==="formdata"||t==="object"&&ze(i.toString)&&i.toString()==="[object FormData]"))},AS=sn("URLSearchParams"),[kS,bS,PS,ES]=["ReadableStream","Request","Response","Headers"].map(sn),TS=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bs(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let r,o;if(typeof i!="object"&&(i=[i]),ur(i))for(r=0,o=i.length;r<o;r++)t.call(null,i[r],r,i);else{const a=e?Object.getOwnPropertyNames(i):Object.keys(i),u=a.length;let c;for(r=0;r<u;r++)c=a[r],t.call(null,i[c],c,i)}}function ty(i,t){t=t.toLowerCase();const e=Object.keys(i);let r=e.length,o;for(;r-- >0;)if(o=e[r],t===o.toLowerCase())return o;return null}const vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ey=i=>!Cs(i)&&i!==vi;function xh(){const{caseless:i}=ey(this)&&this||{},t={},e=(r,o)=>{const a=i&&ty(t,o)||o;ea(t[a])&&ea(r)?t[a]=xh(t[a],r):ea(r)?t[a]=xh({},r):ur(r)?t[a]=r.slice():t[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&bs(arguments[r],e);return t}const MS=(i,t,e,{allOwnKeys:r}={})=>(bs(t,(o,a)=>{e&&ze(o)?i[a]=Qg(o,e):i[a]=o},{allOwnKeys:r}),i),RS=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),IS=(i,t,e,r)=>{i.prototype=Object.create(t.prototype,r),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},FS=(i,t,e,r)=>{let o,a,u;const c={};if(t=t||{},i==null)return t;do{for(o=Object.getOwnPropertyNames(i),a=o.length;a-- >0;)u=o[a],(!r||r(u,i,t))&&!c[u]&&(t[u]=i[u],c[u]=!0);i=e!==!1&&Wh(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},LS=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const r=i.indexOf(t,e);return r!==-1&&r===e},OS=i=>{if(!i)return null;if(ur(i))return i;let t=i.length;if(!Jg(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},BS=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Wh(Uint8Array)),zS=(i,t)=>{const r=(i&&i[Symbol.iterator]).call(i);let o;for(;(o=r.next())&&!o.done;){const a=o.value;t.call(i,a[0],a[1])}},NS=(i,t)=>{let e;const r=[];for(;(e=i.exec(t))!==null;)r.push(e);return r},DS=sn("HTMLFormElement"),WS=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,o){return r.toUpperCase()+o}),lm=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),US=sn("RegExp"),ny=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),r={};bs(e,(o,a)=>{let u;(u=t(o,a,i))!==!1&&(r[a]=u||o)}),Object.defineProperties(i,r)},HS=i=>{ny(i,(t,e)=>{if(ze(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const r=i[e];if(ze(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},jS=(i,t)=>{const e={},r=o=>{o.forEach(a=>{e[a]=!0})};return ur(i)?r(i):r(String(i).split(t)),e},GS=()=>{},VS=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t,Xu="abcdefghijklmnopqrstuvwxyz",um="0123456789",iy={DIGIT:um,ALPHA:Xu,ALPHA_DIGIT:Xu+Xu.toUpperCase()+um},$S=(i=16,t=iy.ALPHA_DIGIT)=>{let e="";const{length:r}=t;for(;i--;)e+=t[Math.random()*r|0];return e};function YS(i){return!!(i&&ze(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const XS=i=>{const t=new Array(10),e=(r,o)=>{if(ya(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const a=ur(r)?[]:{};return bs(r,(u,c)=>{const d=e(u,o+1);!Cs(d)&&(a[c]=d)}),t[o]=void 0,a}}return r};return e(i,0)},qS=sn("AsyncFunction"),KS=i=>i&&(ya(i)||ze(i))&&ze(i.then)&&ze(i.catch),ry=((i,t)=>i?setImmediate:t?((e,r)=>(vi.addEventListener("message",({source:o,data:a})=>{o===vi&&a===e&&r.length&&r.shift()()},!1),o=>{r.push(o),vi.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",ze(vi.postMessage)),QS=typeof queueMicrotask<"u"?queueMicrotask.bind(vi):typeof process<"u"&&process.nextTick||ry,U={isArray:ur,isArrayBuffer:Zg,isBuffer:pS,isFormData:CS,isArrayBufferView:mS,isString:gS,isNumber:Jg,isBoolean:yS,isObject:ya,isPlainObject:ea,isReadableStream:kS,isRequest:bS,isResponse:PS,isHeaders:ES,isUndefined:Cs,isDate:xS,isFile:vS,isBlob:wS,isRegExp:US,isFunction:ze,isStream:SS,isURLSearchParams:AS,isTypedArray:BS,isFileList:_S,forEach:bs,merge:xh,extend:MS,trim:TS,stripBOM:RS,inherits:IS,toFlatObject:FS,kindOf:ma,kindOfTest:sn,endsWith:LS,toArray:OS,forEachEntry:zS,matchAll:NS,isHTMLForm:DS,hasOwnProperty:lm,hasOwnProp:lm,reduceDescriptors:ny,freezeMethods:HS,toObjectSet:jS,toCamelCase:WS,noop:GS,toFiniteNumber:VS,findKey:ty,global:vi,isContextDefined:ey,ALPHABET:iy,generateString:$S,isSpecCompliantForm:YS,toJSONObject:XS,isAsyncFn:qS,isThenable:KS,setImmediate:ry,asap:QS};function vt(i,t,e,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}U.inherits(vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const sy=vt.prototype,oy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{oy[i]={value:i}});Object.defineProperties(vt,oy);Object.defineProperty(sy,"isAxiosError",{value:!0});vt.from=(i,t,e,r,o,a)=>{const u=Object.create(sy);return U.toFlatObject(i,u,function(d){return d!==Error.prototype},c=>c!=="isAxiosError"),vt.call(u,i.message,t,e,r,o),u.cause=i,u.name=i.name,a&&Object.assign(u,a),u};const ZS=null;function vh(i){return U.isPlainObject(i)||U.isArray(i)}function ay(i){return U.endsWith(i,"[]")?i.slice(0,-2):i}function hm(i,t,e){return i?i.concat(t).map(function(o,a){return o=ay(o),!e&&a?"["+o+"]":o}).join(e?".":""):t}function JS(i){return U.isArray(i)&&!i.some(vh)}const tC=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function xa(i,t,e){if(!U.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=U.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,_){return!U.isUndefined(_[k])});const r=e.metaTokens,o=e.visitor||m,a=e.dots,u=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(o))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(U.isDate(S))return S.toISOString();if(!d&&U.isBlob(S))throw new vt("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(S)||U.isTypedArray(S)?d&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function m(S,k,_){let R=S;if(S&&!_&&typeof S=="object"){if(U.endsWith(k,"{}"))k=r?k:k.slice(0,-2),S=JSON.stringify(S);else if(U.isArray(S)&&JS(S)||(U.isFileList(S)||U.endsWith(k,"[]"))&&(R=U.toArray(S)))return k=ay(k),R.forEach(function(B,D){!(U.isUndefined(B)||B===null)&&t.append(u===!0?hm([k],D,a):u===null?k:k+"[]",p(B))}),!1}return vh(S)?!0:(t.append(hm(_,k,a),p(S)),!1)}const y=[],w=Object.assign(tC,{defaultVisitor:m,convertValue:p,isVisitable:vh});function v(S,k){if(!U.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(S),U.forEach(S,function(R,O){(!(U.isUndefined(R)||R===null)&&o.call(t,R,U.isString(O)?O.trim():O,k,w))===!0&&v(R,k?k.concat(O):[O])}),y.pop()}}if(!U.isObject(i))throw new TypeError("data must be an object");return v(i),t}function cm(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Uh(i,t){this._pairs=[],i&&xa(i,this,t)}const ly=Uh.prototype;ly.append=function(t,e){this._pairs.push([t,e])};ly.toString=function(t){const e=t?function(r){return t.call(this,r,cm)}:cm;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function eC(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uy(i,t,e){if(!t)return i;const r=e&&e.encode||eC;U.isFunction(e)&&(e={serialize:e});const o=e&&e.serialize;let a;if(o?a=o(t,e):a=U.isURLSearchParams(t)?t.toString():new Uh(t,e).toString(r),a){const u=i.indexOf("#");u!==-1&&(i=i.slice(0,u)),i+=(i.indexOf("?")===-1?"?":"&")+a}return i}class dm{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(r){r!==null&&t(r)})}}const hy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nC=typeof URLSearchParams<"u"?URLSearchParams:Uh,iC=typeof FormData<"u"?FormData:null,rC=typeof Blob<"u"?Blob:null,sC={isBrowser:!0,classes:{URLSearchParams:nC,FormData:iC,Blob:rC},protocols:["http","https","file","blob","url","data"]},Hh=typeof window<"u"&&typeof document<"u",wh=typeof navigator=="object"&&navigator||void 0,oC=Hh&&(!wh||["ReactNative","NativeScript","NS"].indexOf(wh.product)<0),aC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lC=Hh&&window.location.href||"http://localhost",uC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hh,hasStandardBrowserEnv:oC,hasStandardBrowserWebWorkerEnv:aC,navigator:wh,origin:lC},Symbol.toStringTag,{value:"Module"})),pe={...uC,...sC};function hC(i,t){return xa(i,new pe.classes.URLSearchParams,Object.assign({visitor:function(e,r,o,a){return pe.isNode&&U.isBuffer(e)?(this.append(r,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function cC(i){return U.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function dC(i){const t={},e=Object.keys(i);let r;const o=e.length;let a;for(r=0;r<o;r++)a=e[r],t[a]=i[a];return t}function cy(i){function t(e,r,o,a){let u=e[a++];if(u==="__proto__")return!0;const c=Number.isFinite(+u),d=a>=e.length;return u=!u&&U.isArray(o)?o.length:u,d?(U.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!c):((!o[u]||!U.isObject(o[u]))&&(o[u]=[]),t(e,r,o[u],a)&&U.isArray(o[u])&&(o[u]=dC(o[u])),!c)}if(U.isFormData(i)&&U.isFunction(i.entries)){const e={};return U.forEachEntry(i,(r,o)=>{t(cC(r),o,e,0)}),e}return null}function fC(i,t,e){if(U.isString(i))try{return(t||JSON.parse)(i),U.trim(i)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(i)}const Ps={transitional:hy,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const r=e.getContentType()||"",o=r.indexOf("application/json")>-1,a=U.isObject(t);if(a&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return o?JSON.stringify(cy(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return hC(t,this.formSerializer).toString();if((c=U.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return xa(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||o?(e.setContentType("application/json",!1),fC(t)):t}],transformResponse:[function(t){const e=this.transitional||Ps.transitional,r=e&&e.forcedJSONParsing,o=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(r&&!this.responseType||o)){const u=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(c){if(u)throw c.name==="SyntaxError"?vt.from(c,vt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],i=>{Ps.headers[i]={}});const pC=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mC=i=>{const t={};let e,r,o;return i&&i.split(`
`).forEach(function(u){o=u.indexOf(":"),e=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!e||t[e]&&pC[e])&&(e==="set-cookie"?t[e]?t[e].push(r):t[e]=[r]:t[e]=t[e]?t[e]+", "+r:r)}),t},fm=Symbol("internals");function hs(i){return i&&String(i).trim().toLowerCase()}function na(i){return i===!1||i==null?i:U.isArray(i)?i.map(na):String(i)}function gC(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=e.exec(i);)t[r[1]]=r[2];return t}const yC=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function qu(i,t,e,r,o){if(U.isFunction(r))return r.call(this,t,e);if(o&&(t=e),!!U.isString(t)){if(U.isString(r))return t.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(t)}}function xC(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,r)=>e.toUpperCase()+r)}function vC(i,t){const e=U.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(i,r+e,{value:function(o,a,u){return this[r].call(this,t,o,a,u)},configurable:!0})})}class Me{constructor(t){t&&this.set(t)}set(t,e,r){const o=this;function a(c,d,p){const m=hs(d);if(!m)throw new Error("header name must be a non-empty string");const y=U.findKey(o,m);(!y||o[y]===void 0||p===!0||p===void 0&&o[y]!==!1)&&(o[y||d]=na(c))}const u=(c,d)=>U.forEach(c,(p,m)=>a(p,m,d));if(U.isPlainObject(t)||t instanceof this.constructor)u(t,e);else if(U.isString(t)&&(t=t.trim())&&!yC(t))u(mC(t),e);else if(U.isHeaders(t))for(const[c,d]of t.entries())a(d,c,r);else t!=null&&a(e,t,r);return this}get(t,e){if(t=hs(t),t){const r=U.findKey(this,t);if(r){const o=this[r];if(!e)return o;if(e===!0)return gC(o);if(U.isFunction(e))return e.call(this,o,r);if(U.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=hs(t),t){const r=U.findKey(this,t);return!!(r&&this[r]!==void 0&&(!e||qu(this,this[r],r,e)))}return!1}delete(t,e){const r=this;let o=!1;function a(u){if(u=hs(u),u){const c=U.findKey(r,u);c&&(!e||qu(r,r[c],c,e))&&(delete r[c],o=!0)}}return U.isArray(t)?t.forEach(a):a(t),o}clear(t){const e=Object.keys(this);let r=e.length,o=!1;for(;r--;){const a=e[r];(!t||qu(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const e=this,r={};return U.forEach(this,(o,a)=>{const u=U.findKey(r,a);if(u){e[u]=na(o),delete e[a];return}const c=t?xC(a):String(a).trim();c!==a&&delete e[a],e[c]=na(o),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return U.forEach(this,(r,o)=>{r!=null&&r!==!1&&(e[o]=t&&U.isArray(r)?r.join(", "):r)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[fm]=this[fm]={accessors:{}}).accessors,o=this.prototype;function a(u){const c=hs(u);r[c]||(vC(o,u),r[c]=!0)}return U.isArray(t)?t.forEach(a):a(t),this}}Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(Me.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(r){this[e]=r}}});U.freezeMethods(Me);function Ku(i,t){const e=this||Ps,r=t||e,o=Me.from(r.headers);let a=r.data;return U.forEach(i,function(c){a=c.call(e,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function dy(i){return!!(i&&i.__CANCEL__)}function hr(i,t,e){vt.call(this,i??"canceled",vt.ERR_CANCELED,t,e),this.name="CanceledError"}U.inherits(hr,vt,{__CANCEL__:!0});function fy(i,t,e){const r=e.config.validateStatus;!e.status||!r||r(e.status)?i(e):t(new vt("Request failed with status code "+e.status,[vt.ERR_BAD_REQUEST,vt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function wC(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function _C(i,t){i=i||10;const e=new Array(i),r=new Array(i);let o=0,a=0,u;return t=t!==void 0?t:1e3,function(d){const p=Date.now(),m=r[a];u||(u=p),e[o]=d,r[o]=p;let y=a,w=0;for(;y!==o;)w+=e[y++],y=y%i;if(o=(o+1)%i,o===a&&(a=(a+1)%i),p-u<t)return;const v=m&&p-m;return v?Math.round(w*1e3/v):void 0}}function SC(i,t){let e=0,r=1e3/t,o,a;const u=(p,m=Date.now())=>{e=m,o=null,a&&(clearTimeout(a),a=null),i.apply(null,p)};return[(...p)=>{const m=Date.now(),y=m-e;y>=r?u(p,m):(o=p,a||(a=setTimeout(()=>{a=null,u(o)},r-y)))},()=>o&&u(o)]}const la=(i,t,e=3)=>{let r=0;const o=_C(50,250);return SC(a=>{const u=a.loaded,c=a.lengthComputable?a.total:void 0,d=u-r,p=o(d),m=u<=c;r=u;const y={loaded:u,total:c,progress:c?u/c:void 0,bytes:d,rate:p||void 0,estimated:p&&c&&m?(c-u)/p:void 0,event:a,lengthComputable:c!=null,[t?"download":"upload"]:!0};i(y)},e)},pm=(i,t)=>{const e=i!=null;return[r=>t[0]({lengthComputable:e,total:i,loaded:r}),t[1]]},mm=i=>(...t)=>U.asap(()=>i(...t)),CC=pe.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,pe.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(pe.origin),pe.navigator&&/(msie|trident)/i.test(pe.navigator.userAgent)):()=>!0,AC=pe.hasStandardBrowserEnv?{write(i,t,e,r,o,a){const u=[i+"="+encodeURIComponent(t)];U.isNumber(e)&&u.push("expires="+new Date(e).toGMTString()),U.isString(r)&&u.push("path="+r),U.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kC(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function bC(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function py(i,t){return i&&!kC(t)?bC(i,t):t}const gm=i=>i instanceof Me?{...i}:i;function Si(i,t){t=t||{};const e={};function r(p,m,y,w){return U.isPlainObject(p)&&U.isPlainObject(m)?U.merge.call({caseless:w},p,m):U.isPlainObject(m)?U.merge({},m):U.isArray(m)?m.slice():m}function o(p,m,y,w){if(U.isUndefined(m)){if(!U.isUndefined(p))return r(void 0,p,y,w)}else return r(p,m,y,w)}function a(p,m){if(!U.isUndefined(m))return r(void 0,m)}function u(p,m){if(U.isUndefined(m)){if(!U.isUndefined(p))return r(void 0,p)}else return r(void 0,m)}function c(p,m,y){if(y in t)return r(p,m);if(y in i)return r(void 0,p)}const d={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c,headers:(p,m,y)=>o(gm(p),gm(m),y,!0)};return U.forEach(Object.keys(Object.assign({},i,t)),function(m){const y=d[m]||o,w=y(i[m],t[m],m);U.isUndefined(w)&&y!==c||(e[m]=w)}),e}const my=i=>{const t=Si({},i);let{data:e,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:c}=t;t.headers=u=Me.from(u),t.url=uy(py(t.baseURL,t.url),i.params,i.paramsSerializer),c&&u.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let d;if(U.isFormData(e)){if(pe.hasStandardBrowserEnv||pe.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((d=u.getContentType())!==!1){const[p,...m]=d?d.split(";").map(y=>y.trim()).filter(Boolean):[];u.setContentType([p||"multipart/form-data",...m].join("; "))}}if(pe.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(t)),r||r!==!1&&CC(t.url))){const p=o&&a&&AC.read(a);p&&u.set(o,p)}return t},PC=typeof XMLHttpRequest<"u",EC=PC&&function(i){return new Promise(function(e,r){const o=my(i);let a=o.data;const u=Me.from(o.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:p}=o,m,y,w,v,S;function k(){v&&v(),S&&S(),o.cancelToken&&o.cancelToken.unsubscribe(m),o.signal&&o.signal.removeEventListener("abort",m)}let _=new XMLHttpRequest;_.open(o.method.toUpperCase(),o.url,!0),_.timeout=o.timeout;function R(){if(!_)return;const B=Me.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),G={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:B,config:i,request:_};fy(function(j){e(j),k()},function(j){r(j),k()},G),_=null}"onloadend"in _?_.onloadend=R:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(R)},_.onabort=function(){_&&(r(new vt("Request aborted",vt.ECONNABORTED,i,_)),_=null)},_.onerror=function(){r(new vt("Network Error",vt.ERR_NETWORK,i,_)),_=null},_.ontimeout=function(){let D=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const G=o.transitional||hy;o.timeoutErrorMessage&&(D=o.timeoutErrorMessage),r(new vt(D,G.clarifyTimeoutError?vt.ETIMEDOUT:vt.ECONNABORTED,i,_)),_=null},a===void 0&&u.setContentType(null),"setRequestHeader"in _&&U.forEach(u.toJSON(),function(D,G){_.setRequestHeader(G,D)}),U.isUndefined(o.withCredentials)||(_.withCredentials=!!o.withCredentials),c&&c!=="json"&&(_.responseType=o.responseType),p&&([w,S]=la(p,!0),_.addEventListener("progress",w)),d&&_.upload&&([y,v]=la(d),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",v)),(o.cancelToken||o.signal)&&(m=B=>{_&&(r(!B||B.type?new hr(null,i,_):B),_.abort(),_=null)},o.cancelToken&&o.cancelToken.subscribe(m),o.signal&&(o.signal.aborted?m():o.signal.addEventListener("abort",m)));const O=wC(o.url);if(O&&pe.protocols.indexOf(O)===-1){r(new vt("Unsupported protocol "+O+":",vt.ERR_BAD_REQUEST,i));return}_.send(a||null)})},TC=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let r=new AbortController,o;const a=function(p){if(!o){o=!0,c();const m=p instanceof Error?p:this.reason;r.abort(m instanceof vt?m:new hr(m instanceof Error?m.message:m))}};let u=t&&setTimeout(()=>{u=null,a(new vt(`timeout ${t} of ms exceeded`,vt.ETIMEDOUT))},t);const c=()=>{i&&(u&&clearTimeout(u),u=null,i.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),i=null)};i.forEach(p=>p.addEventListener("abort",a));const{signal:d}=r;return d.unsubscribe=()=>U.asap(c),d}},MC=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let r=0,o;for(;r<e;)o=r+t,yield i.slice(r,o),r=o},RC=async function*(i,t){for await(const e of IC(i))yield*MC(e,t)},IC=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},ym=(i,t,e,r)=>{const o=RC(i,t);let a=0,u,c=d=>{u||(u=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:p,value:m}=await o.next();if(p){c(),d.close();return}let y=m.byteLength;if(e){let w=a+=y;e(w)}d.enqueue(new Uint8Array(m))}catch(p){throw c(p),p}},cancel(d){return c(d),o.return()}},{highWaterMark:2})},va=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gy=va&&typeof ReadableStream=="function",FC=va&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),yy=(i,...t)=>{try{return!!i(...t)}catch{return!1}},LC=gy&&yy(()=>{let i=!1;const t=new Request(pe.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),xm=64*1024,_h=gy&&yy(()=>U.isReadableStream(new Response("").body)),ua={stream:_h&&(i=>i.body)};va&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ua[t]&&(ua[t]=U.isFunction(i[t])?e=>e[t]():(e,r)=>{throw new vt(`Response type '${t}' is not supported`,vt.ERR_NOT_SUPPORT,r)})})})(new Response);const OC=async i=>{if(i==null)return 0;if(U.isBlob(i))return i.size;if(U.isSpecCompliantForm(i))return(await new Request(pe.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(U.isArrayBufferView(i)||U.isArrayBuffer(i))return i.byteLength;if(U.isURLSearchParams(i)&&(i=i+""),U.isString(i))return(await FC(i)).byteLength},BC=async(i,t)=>{const e=U.toFiniteNumber(i.getContentLength());return e??OC(t)},zC=va&&(async i=>{let{url:t,method:e,data:r,signal:o,cancelToken:a,timeout:u,onDownloadProgress:c,onUploadProgress:d,responseType:p,headers:m,withCredentials:y="same-origin",fetchOptions:w}=my(i);p=p?(p+"").toLowerCase():"text";let v=TC([o,a&&a.toAbortSignal()],u),S;const k=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let _;try{if(d&&LC&&e!=="get"&&e!=="head"&&(_=await BC(m,r))!==0){let G=new Request(t,{method:"POST",body:r,duplex:"half"}),H;if(U.isFormData(r)&&(H=G.headers.get("content-type"))&&m.setContentType(H),G.body){const[j,nt]=pm(_,la(mm(d)));r=ym(G.body,xm,j,nt)}}U.isString(y)||(y=y?"include":"omit");const R="credentials"in Request.prototype;S=new Request(t,{...w,signal:v,method:e.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:R?y:void 0});let O=await fetch(S);const B=_h&&(p==="stream"||p==="response");if(_h&&(c||B&&k)){const G={};["status","statusText","headers"].forEach(dt=>{G[dt]=O[dt]});const H=U.toFiniteNumber(O.headers.get("content-length")),[j,nt]=c&&pm(H,la(mm(c),!0))||[];O=new Response(ym(O.body,xm,j,()=>{nt&&nt(),k&&k()}),G)}p=p||"text";let D=await ua[U.findKey(ua,p)||"text"](O,i);return!B&&k&&k(),await new Promise((G,H)=>{fy(G,H,{data:D,headers:Me.from(O.headers),status:O.status,statusText:O.statusText,config:i,request:S})})}catch(R){throw k&&k(),R&&R.name==="TypeError"&&/fetch/i.test(R.message)?Object.assign(new vt("Network Error",vt.ERR_NETWORK,i,S),{cause:R.cause||R}):vt.from(R,R&&R.code,i,S)}}),Sh={http:ZS,xhr:EC,fetch:zC};U.forEach(Sh,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const vm=i=>`- ${i}`,NC=i=>U.isFunction(i)||i===null||i===!1,xy={getAdapter:i=>{i=U.isArray(i)?i:[i];const{length:t}=i;let e,r;const o={};for(let a=0;a<t;a++){e=i[a];let u;if(r=e,!NC(e)&&(r=Sh[(u=String(e)).toLowerCase()],r===void 0))throw new vt(`Unknown adapter '${u}'`);if(r)break;o[u||"#"+a]=r}if(!r){const a=Object.entries(o).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=t?a.length>1?`since :
`+a.map(vm).join(`
`):" "+vm(a[0]):"as no adapter specified";throw new vt("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:Sh};function Qu(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new hr(null,i)}function wm(i){return Qu(i),i.headers=Me.from(i.headers),i.data=Ku.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),xy.getAdapter(i.adapter||Ps.adapter)(i).then(function(r){return Qu(i),r.data=Ku.call(i,i.transformResponse,r),r.headers=Me.from(r.headers),r},function(r){return dy(r)||(Qu(i),r&&r.response&&(r.response.data=Ku.call(i,i.transformResponse,r.response),r.response.headers=Me.from(r.response.headers))),Promise.reject(r)})}const vy="1.7.9",wa={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{wa[i]=function(r){return typeof r===i||"a"+(t<1?"n ":" ")+i}});const _m={};wa.transitional=function(t,e,r){function o(a,u){return"[Axios v"+vy+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,c)=>{if(t===!1)throw new vt(o(u," has been removed"+(e?" in "+e:"")),vt.ERR_DEPRECATED);return e&&!_m[u]&&(_m[u]=!0,console.warn(o(u," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,u,c):!0}};wa.spelling=function(t){return(e,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function DC(i,t,e){if(typeof i!="object")throw new vt("options must be an object",vt.ERR_BAD_OPTION_VALUE);const r=Object.keys(i);let o=r.length;for(;o-- >0;){const a=r[o],u=t[a];if(u){const c=i[a],d=c===void 0||u(c,a,i);if(d!==!0)throw new vt("option "+a+" must be "+d,vt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new vt("Unknown option "+a,vt.ERR_BAD_OPTION)}}const ia={assertOptions:DC,validators:wa},cn=ia.validators;class _i{constructor(t){this.defaults=t,this.interceptors={request:new dm,response:new dm}}async request(t,e){try{return await this._request(t,e)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Si(this.defaults,e);const{transitional:r,paramsSerializer:o,headers:a}=e;r!==void 0&&ia.assertOptions(r,{silentJSONParsing:cn.transitional(cn.boolean),forcedJSONParsing:cn.transitional(cn.boolean),clarifyTimeoutError:cn.transitional(cn.boolean)},!1),o!=null&&(U.isFunction(o)?e.paramsSerializer={serialize:o}:ia.assertOptions(o,{encode:cn.function,serialize:cn.function},!0)),ia.assertOptions(e,{baseUrl:cn.spelling("baseURL"),withXsrfToken:cn.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=a&&U.merge(a.common,a[e.method]);a&&U.forEach(["delete","get","head","post","put","patch","common"],S=>{delete a[S]}),e.headers=Me.concat(u,a);const c=[];let d=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(e)===!1||(d=d&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let m,y=0,w;if(!d){const S=[wm.bind(this),void 0];for(S.unshift.apply(S,c),S.push.apply(S,p),w=S.length,m=Promise.resolve(e);y<w;)m=m.then(S[y++],S[y++]);return m}w=c.length;let v=e;for(y=0;y<w;){const S=c[y++],k=c[y++];try{v=S(v)}catch(_){k.call(this,_);break}}try{m=wm.call(this,v)}catch(S){return Promise.reject(S)}for(y=0,w=p.length;y<w;)m=m.then(p[y++],p[y++]);return m}getUri(t){t=Si(this.defaults,t);const e=py(t.baseURL,t.url);return uy(e,t.params,t.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(t){_i.prototype[t]=function(e,r){return this.request(Si(r||{},{method:t,url:e,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(t){function e(r){return function(a,u,c){return this.request(Si(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}_i.prototype[t]=e(),_i.prototype[t+"Form"]=e(!0)});class jh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(c=>{r.subscribe(c),a=c}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},t(function(a,u,c){r.reason||(r.reason=new hr(a,u,c),e(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=r=>{t.abort(r)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new jh(function(o){t=o}),cancel:t}}}function WC(i){return function(e){return i.apply(null,e)}}function UC(i){return U.isObject(i)&&i.isAxiosError===!0}const Ch={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ch).forEach(([i,t])=>{Ch[t]=i});function wy(i){const t=new _i(i),e=Qg(_i.prototype.request,t);return U.extend(e,_i.prototype,t,{allOwnKeys:!0}),U.extend(e,t,null,{allOwnKeys:!0}),e.create=function(o){return wy(Si(i,o))},e}const Xt=wy(Ps);Xt.Axios=_i;Xt.CanceledError=hr;Xt.CancelToken=jh;Xt.isCancel=dy;Xt.VERSION=vy;Xt.toFormData=xa;Xt.AxiosError=vt;Xt.Cancel=Xt.CanceledError;Xt.all=function(t){return Promise.all(t)};Xt.spread=WC;Xt.isAxiosError=UC;Xt.mergeConfig=Si;Xt.AxiosHeaders=Me;Xt.formToJSON=i=>cy(U.isHTMLForm(i)?new FormData(i):i);Xt.getAdapter=xy.getAdapter;Xt.HttpStatusCode=Ch;Xt.default=Xt;class HC{constructor({securityWorker:t,secure:e,format:r,...o}={}){Z(this,"instance");Z(this,"securityData",null);Z(this,"securityWorker");Z(this,"secure");Z(this,"format");Z(this,"setSecurityData",t=>{this.securityData=t});Z(this,"request",async({secure:t,path:e,type:r,query:o,format:a,body:u,...c})=>{const d=(typeof t=="boolean"?t:this.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},p=this.mergeRequestParams(c,d),m=a||this.format||void 0;return r==="multipart/form-data"&&u&&u!==null&&typeof u=="object"&&(u=this.createFormData(u)),r==="text/plain"&&u&&u!==null&&typeof u!="string"&&(u=JSON.stringify(u)),this.instance.request({...p,headers:{...p.headers||{},...r?{"Content-Type":r}:{}},params:o,responseType:m,data:u,url:e})});this.instance=Xt.create({...o,baseURL:o.baseURL||""}),this.secure=e,this.format=r,this.securityWorker=t}mergeRequestParams(t,e){const r=t.method||e&&e.method;return{...this.instance.defaults,...t,...e||{},headers:{...r&&this.instance.defaults.headers[r.toLowerCase()]||{},...t.headers||{},...e&&e.headers||{}}}}stringifyFormItem(t){return typeof t=="object"&&t!==null?JSON.stringify(t):`${t}`}createFormData(t){return t instanceof FormData?t:Object.keys(t||{}).reduce((e,r)=>{const o=t[r],a=o instanceof Array?o:[o];for(const u of a){const c=u instanceof Blob||u instanceof File;e.append(r,c?u:this.stringifyFormItem(u))}return e},new FormData)}}let jC=class extends HC{constructor(){super(...arguments);Z(this,"farmControllerGetFarmByUser",(e={})=>this.request({path:"/farm",method:"POST",format:"json",...e}));Z(this,"farmControllerUpdateFarmByUser",(e={})=>this.request({path:"/farm/update",method:"POST",...e}));Z(this,"farmControllerUpdateFarmTile",(e={})=>this.request({path:"/farm/farmtile",method:"POST",...e}));Z(this,"farmControllerGetAllFarm",(e={})=>this.request({path:"/farm/all",method:"GET",...e}))}};const GC=(i,t,e)=>{let r="";{const o=new Date;o.setTime(o.getTime()+e*24*60*60*1e3),r=`; expires=${o.toUTCString()}`}document.cookie=`${i}=${encodeURIComponent(t)||""}${r}; path=/`},_y=i=>{const t=`${i}=`,e=document.cookie.split(";");for(let r=0;r<e.length;r++){let o=decodeURIComponent(e[r]);for(;o.startsWith(" ");)o=o.substring(1,o.length);if(o.startsWith(t))return o.substring(t.length,o.length)}return null},VC=i=>{const t=i;if(typeof window<"u"){const e=_y("innerData")||JSON.parse(sessionStorage.getItem("__telegram__initParams")).tgWebAppData;e&&t.headers&&(t.headers["x-innerData"]=e)}return t},$C=i=>i,YC=i=>Promise.reject(i),XC=i=>Promise.reject(i),_a=Xt.create({baseURL:"https://js-game-pack-backend-production.up.railway.app"});_a.interceptors.request.use(VC,YC);_a.interceptors.response.use($C,XC);class qC{constructor(t=0,e=0){Z(this,"x");Z(this,"y");this.x=t,this.y=e}}const KC=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};function QC(i,t){let e;return(...r)=>(e&&clearTimeout(e),new Promise(o=>{e=setTimeout(()=>{const a=i(...r);o(a)},t)}))}const ZC=i=>{const t=_y("innerData")||JSON.parse(sessionStorage.getItem("__telegram__initParams")).tgWebAppData;return new i({baseURL:"https://js-game-pack-backend-production.up.railway.app",headers:{"x-innerData":t}})},JC=async()=>{const{data:i}=await ZC(jC).farmControllerGetFarmByUser();return i},tA=async i=>{try{const{data:t}=await _a.post("/farm/farmtile",{ids:i});return t}catch(t){console.log(t)}},eA="/assets/Castle_Construction-CGFKAYiR.png";class Sy extends Nt{constructor({game:e}){super();Z(this,"game");this.game=e}add(e){this.parent||(console.log("add"),e.addChild(this))}remove(){this.parent&&(console.log("remove"),this.removeFromParent())}init(){}}class Sa extends Sy{constructor(){super(...arguments);Z(this,"currentResources",0);Z(this,"maxResources",1e3)}putResources(e){return this.currentResources+e<=this.maxResources?(this.currentResources+=e,0):e}update(){}}class nA extends Sa{constructor({game:e}){super({game:e});Z(this,"textLabel",new qg({text:"0"}));this.addChild(this.textLabel)}updateText(e){this.textLabel.text=e}async init(){const e=await pn.load(eA),r=new xn(e);this.addChild(r),this.parent&&this.position.set(this.parent.width/2-this.width/2,this.parent.height/2-this.height/2)}update(){}}const iA="/assets/House_Blue-DBNrx4_X.png";class rA extends Sa{constructor(){super(...arguments);Z(this,"gap",2)}async init(){const e=await pn.load(iA),r=new xn(e);r.position.x=150,this.addChild(r),this.position.set(20,20)}update(){}}const sA="/assets/Tower_Blue-B3h1mGgJ.png";class oA extends Sa{async init(){const t=await pn.load(sA),e=new xn(t);this.addChild(e),this.position.set(800,700)}update(){}}const aA="/assets/House_Red-DNy_Qh-W.png";class lA extends Sy{update(){}}class uA extends lA{constructor({game:e}){super({game:e});Z(this,"textLabel",new qg({text:"0"}));this.eventMode="static",this.cursor="pointer",this.addChild(this.textLabel),this.on("pointerup",r=>{this.game.systems.get(gn).signals.onToggleScreen.emit("possession")})}updateText(e){this.textLabel.text=e}async init(){const e=await pn.load(aA),r=new xn(e);this.addChild(r),this.parent&&this.position.set(this.parent.width/2-this.width/2,this.parent.height/2-this.height/2)}update(){}}const vs={main:"rgba(149, 138, 122)",primary:"#403d39",secondary:"#252422",odd:"#eb5e28"};var hA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Cy={exports:{}};(function(i,t){(function(){var e,r;r=function(o){return i.exports=o},e={linear:function(o,a,u,c){return u*o/c+a},easeInQuad:function(o,a,u,c){return u*(o/=c)*o+a},easeOutQuad:function(o,a,u,c){return-u*(o/=c)*(o-2)+a},easeInOutQuad:function(o,a,u,c){return(o/=c/2)<1?u/2*o*o+a:-u/2*(--o*(o-2)-1)+a},easeInCubic:function(o,a,u,c){return u*(o/=c)*o*o+a},easeOutCubic:function(o,a,u,c){return u*((o=o/c-1)*o*o+1)+a},easeInOutCubic:function(o,a,u,c){return(o/=c/2)<1?u/2*o*o*o+a:u/2*((o-=2)*o*o+2)+a},easeInQuart:function(o,a,u,c){return u*(o/=c)*o*o*o+a},easeOutQuart:function(o,a,u,c){return-u*((o=o/c-1)*o*o*o-1)+a},easeInOutQuart:function(o,a,u,c){return(o/=c/2)<1?u/2*o*o*o*o+a:-u/2*((o-=2)*o*o*o-2)+a},easeInQuint:function(o,a,u,c){return u*(o/=c)*o*o*o*o+a},easeOutQuint:function(o,a,u,c){return u*((o=o/c-1)*o*o*o*o+1)+a},easeInOutQuint:function(o,a,u,c){return(o/=c/2)<1?u/2*o*o*o*o*o+a:u/2*((o-=2)*o*o*o*o+2)+a},easeInSine:function(o,a,u,c){return-u*Math.cos(o/c*(Math.PI/2))+u+a},easeOutSine:function(o,a,u,c){return u*Math.sin(o/c*(Math.PI/2))+a},easeInOutSine:function(o,a,u,c){return-u/2*(Math.cos(Math.PI*o/c)-1)+a},easeInExpo:function(o,a,u,c){return o===0?a:u*Math.pow(2,10*(o/c-1))+a},easeOutExpo:function(o,a,u,c){return o===c?a+u:u*(-Math.pow(2,-10*o/c)+1)+a},easeInOutExpo:function(o,a,u,c){return(o/=c/2)<1?u/2*Math.pow(2,10*(o-1))+a:u/2*(-Math.pow(2,-10*--o)+2)+a},easeInCirc:function(o,a,u,c){return-u*(Math.sqrt(1-(o/=c)*o)-1)+a},easeOutCirc:function(o,a,u,c){return u*Math.sqrt(1-(o=o/c-1)*o)+a},easeInOutCirc:function(o,a,u,c){return(o/=c/2)<1?-u/2*(Math.sqrt(1-o*o)-1)+a:u/2*(Math.sqrt(1-(o-=2)*o)+1)+a},easeInElastic:function(o,a,u,c){var d,p,m;return m=1.70158,p=0,d=u,o===0||(o/=c),p||(p=c*.3),d<Math.abs(u)?(d=u,m=p/4):m=p/(2*Math.PI)*Math.asin(u/d),-(d*Math.pow(2,10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/p))+a},easeOutElastic:function(o,a,u,c){var d,p,m;return m=1.70158,p=0,d=u,o===0||(o/=c),p||(p=c*.3),d<Math.abs(u)?(d=u,m=p/4):m=p/(2*Math.PI)*Math.asin(u/d),d*Math.pow(2,-10*o)*Math.sin((o*c-m)*(2*Math.PI)/p)+u+a},easeInOutElastic:function(o,a,u,c){var d,p,m;return m=1.70158,p=0,d=u,o===0||(o/=c/2),p||(p=c*(.3*1.5)),d<Math.abs(u)?(d=u,m=p/4):m=p/(2*Math.PI)*Math.asin(u/d),o<1?-.5*(d*Math.pow(2,10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/p))+a:d*Math.pow(2,-10*(o-=1))*Math.sin((o*c-m)*(2*Math.PI)/p)*.5+u+a},easeInBack:function(o,a,u,c,d){return d===void 0&&(d=1.70158),u*(o/=c)*o*((d+1)*o-d)+a},easeOutBack:function(o,a,u,c,d){return d===void 0&&(d=1.70158),u*((o=o/c-1)*o*((d+1)*o+d)+1)+a},easeInOutBack:function(o,a,u,c,d){return d===void 0&&(d=1.70158),(o/=c/2)<1?u/2*(o*o*(((d*=1.525)+1)*o-d))+a:u/2*((o-=2)*o*(((d*=1.525)+1)*o+d)+2)+a},easeInBounce:function(o,a,u,c){var d;return d=e.easeOutBounce(c-o,0,u,c),u-d+a},easeOutBounce:function(o,a,u,c){return(o/=c)<1/2.75?u*(7.5625*o*o)+a:o<2/2.75?u*(7.5625*(o-=1.5/2.75)*o+.75)+a:o<2.5/2.75?u*(7.5625*(o-=2.25/2.75)*o+.9375)+a:u*(7.5625*(o-=2.625/2.75)*o+.984375)+a},easeInOutBounce:function(o,a,u,c){var d;return o<c/2?(d=e.easeInBounce(o*2,0,u,c),d*.5+a):(d=e.easeOutBounce(o*2-c,0,u,c),d*.5+u*.5+a)}},r(e)}).call(hA)})(Cy);var dA=Cy.exports;const Sm=cA(dA);function Ca(i,t){if(i){if(typeof i=="function")return i;if(typeof i=="string")return Sm[i]}else return Sm[t]}class fA{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Ht(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var t;(t=this.viewport.options.events.domElement)==null||t.removeEventListener("wheel",this.wheelFunction)}down(t){if(!(this.viewport.pause||!this.viewport.visible)){if(t.pointerType==="mouse"?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),this.count()===1){this.last=t.global.clone();const e=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!e||!e.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const r=t.global.x-this.last.x,o=t.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(o))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.visible)return;t.pointerType==="mouse"&&(this.isMouseDown=!1),t.pointerType!=="mouse"&&this.remove(t.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new At;return this.viewport.options.events.mapPositionToPoint(e,t.clientX,t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t){this.touches.splice(e,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const cs=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class pA{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,r=cs.length){const o=this.plugins[t];o&&o.destroy(),this.plugins[t]=e;const a=cs.indexOf(t);a!==-1&&cs.splice(a,1),cs.splice(r,0,t),this.sort()}get(t,e){var r;return e&&(r=this.plugins[t])!=null&&r.paused?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach(t=>{t.destroy()}),this.plugins={},this.sort()}remove(t){var e;this.plugins[t]&&((e=this.plugins[t])==null||e.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var e;(e=this.plugins[t])==null||e.pause()}resume(t){var e;(e=this.plugins[t])==null||e.resume()}sort(){this.list=[];for(const t of cs)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const r of this.list)r.down(t)&&(e=!0);return e}move(t){let e=!1;for(const r of this.viewport.plugins.list)r.move(t)&&(e=!0);return e}up(t){let e=!1;for(const r of this.list)r.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const r of this.list)r.wheel(t)&&(e=!0);return e}}class $e{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const mA={removeOnInterrupt:!1,ease:"linear",time:1e3};class gA extends $e{constructor(t,e={}){super(t),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},mA,e),this.options.ease=Ca(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const e=new At(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,o=this.parent.height;this.complete(),(r!==this.parent.width||o!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const o=this.startWidth,a=this.deltaWidth;this.parent.fitWidth(o+a*r,this.keepCenter,this.height===null)}if(this.height!==null){const o=this.startHeight,a=this.deltaHeight;this.parent.fitHeight(o+a*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const o=this.startX,a=this.startY,u=this.deltaX,c=this.deltaY,d=new At(this.parent.x,this.parent.y);this.parent.moveCenter(o+u*r,a+c*r),this.parent.emit("moved",{viewport:this.parent,original:d,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}}}const yA={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class xA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},yA,e),this.ease=Ca(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=typeof t.x>"u"?0:t.x,r=typeof t.y>"u"?0:t.y,o=typeof t.width>"u"?this.parent.worldWidth:t.width,a=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>o,top:this.parent.top<r,bottom:this.parent.bottom>a,topLeft:new At(e*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new At(o*this.parent.scale.x-this.parent.screenWidth,a*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new At(0,0),bottomRight:new At(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,e;if(this.paused)return;let r,o=this.parent.plugins.get("decelerate",!0);o&&(o.x||o.y)&&(o.x&&o.percentChangeX===((t=o.options)==null?void 0:t.friction)||o.y&&o.percentChangeY===((e=o.options)==null?void 0:e.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(o.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(o.percentChangeY=this.options.friction));const a=this.parent.plugins.get("drag",!0)||{},u=this.parent.plugins.get("pinch",!0)||{};if(o=o||{},!(a!=null&&a.active)&&!(u!=null&&u.active)&&(!this.toX||!this.toY)&&(!o.x||!o.y)){r=r||this.oob();const c=r.topLeft,d=r.bottomRight;if(!this.toX&&!o.x){let p=null;r.left&&this.left?p=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-c.x:r.right&&this.right&&(p=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-d.x),p!==null&&this.parent.x!==p&&(this.toX={time:0,start:this.parent.x,delta:p-this.parent.x,end:p},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!o.y){let p=null;r.top&&this.top?p=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-c.y:r.bottom&&this.bottom&&(p=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-d.y),p!==null&&this.parent.y!==p&&(this.toY={time:0,start:this.parent.y,delta:p-this.parent.y,end:p},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const vA={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class wA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},vA,e),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="none"?this.noUnderflow=!0:t==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new At(this.parent.x,this.parent.y),e=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,e.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,e.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const _A={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class SA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},_A,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&t<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&t>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&e<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&e>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if(typeof this.options.minScale=="number")t.x=this.options.minScale,t.y=this.options.minScale;else if(this.options.minScale!==null){const a=this.options.minScale;t.x=typeof a.x>"u"?null:a.x,t.y=typeof a.y>"u"?null:a.y}if(typeof this.options.maxScale=="number")e.x=this.options.maxScale,e.y=this.options.maxScale;else if(this.options.maxScale!==null){const a=this.options.maxScale;e.x=typeof a.x>"u"?null:a.x,e.y=typeof a.y>"u"?null:a.y}let r=this.parent.scale.x,o=this.parent.scale.y;t.x!==null&&r<t.x&&(r=t.x),e.x!==null&&r>e.x&&(r=e.x),t.y!==null&&o<t.y&&(o=t.y),e.y!==null&&o>e.y&&(o=e.y),(r!==this.parent.scale.x||o!==this.parent.scale.y)&&(this.parent.scale.set(r,o),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const CA={friction:.98,bounce:.8,minSpeed:.01},Qn=16;class AA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},CA,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(t===1||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];t.type==="clamp-x"&&t.original?e.x===t.original.x&&(e.x=this.parent.x):t.type==="clamp-y"&&t.original&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const r=t-e.time;this.x=(this.parent.x-e.x)/r,this.y=(this.parent.y-e.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){t=t||{},typeof t.x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,r=this.timeSinceRelease,o=this.timeSinceRelease+t;if(this.x){const a=this.percentChangeX,u=Math.log(a);this.parent.x+=this.x*Qn/u*(Math.pow(a,o/Qn)-Math.pow(a,r/Qn)),this.x*=Math.pow(this.percentChangeX,t/Qn)}if(this.y){const a=this.percentChangeY,u=Math.log(a);this.parent.y+=this.y*Qn/u*(Math.pow(a,o/Qn)-Math.pow(a,r/Qn)),this.y*=Math.pow(this.percentChangeY,t/Qn)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const kA={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class bA extends $e{constructor(t,e={}){super(t),this.windowEventHandlers=[],this.options=Object.assign({},kA,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){const e=o=>{t.includes(o.code)&&(this.keyIsPressed=!0)},r=o=>{t.includes(o.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",e)}addWindowEventHandler(t,e){typeof window>"u"||(window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:t,handler:e})=>{window.removeEventListener(t,e)})}mouseButtons(t){!t||t==="all"?this.mouse=[!0,!0,!0]:this.mouse=[t.indexOf("left")!==-1,t.indexOf("middle")!==-1,t.indexOf("right")!==-1]}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e=t.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!e||this.mouse[t.button]))}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&t.data.pointerType==="touch"}down(t){return this.paused||!this.options.pressDrag?!1:this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=t.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.global.x,r=t.global.y,o=this.parent.input.count();if(o===1||o>1&&!this.parent.plugins.get("pinch",!0)){const a={x:e,y:r};(this.parent.parent||this.parent).toLocal(a,void 0,a);const u=a.x-this.last.x,c=a.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(u)||this.yDirection&&this.parent.input.checkThreshold(c))return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:t,screen:new At(this.last.x,this.last.y),world:this.parent.toWorld(new At(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(e.length===1){const r=e[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new At(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(r,r,!0),this.parent.emit("drag-end",{event:t,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const r=t.deltaMode?this.options.lineHeight:1,o=[t.deltaX,t.deltaY],[a,u]=this.options.wheelSwapAxes?o.reverse():o;return this.xDirection&&(this.parent.x+=a*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=u*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const PA={speed:0,acceleration:null,radius:null};class EA extends $e{constructor(t,e,r={}){super(t),this.target=e,this.options=Object.assign({},PA,r),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let r=this.target.x,o=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius){const c=Math.atan2(this.target.y-e.y,this.target.x-e.x);r=this.target.x-Math.cos(c)*this.options.radius,o=this.target.y-Math.sin(c)*this.options.radius}else return;const a=r-e.x,u=o-e.y;if(a||u)if(this.options.speed)if(this.options.acceleration){const c=Math.atan2(o-e.y,r-e.x),d=Math.sqrt(Math.pow(a,2)+Math.pow(u,2));if(d){const p=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);d>p?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*t,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*t,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const m=Math.cos(c)*this.velocity.x,y=Math.sin(c)*this.velocity.y,w=Math.abs(m)>Math.abs(a)?r:e.x+m,v=Math.abs(y)>Math.abs(u)?o:e.y+y;this.parent.moveCenter(w,v),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const c=Math.atan2(o-e.y,r-e.x),d=Math.cos(c)*this.options.speed,p=Math.sin(c)*this.options.speed,m=Math.abs(d)>Math.abs(a)?r:e.x+d,y=Math.abs(p)>Math.abs(u)?o:e.y+p;this.parent.moveCenter(m,y),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,o),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const TA={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class MA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},TA,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;t!==null?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||t.pointerType!=="mouse"&&t.pointerId!==1||!this.options.allowButtons&&t.buttons!==0)return!1;const e=t.global.x,r=t.global.y;if(this.radiusSquared){const o=this.parent.toScreen(this.parent.center);if(Math.pow(o.x-e,2)+Math.pow(o.y-r,2)>=this.radiusSquared){const a=Math.atan2(o.y-r,o.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(a))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(a))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(a)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(a)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const RA={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},IA=new At;class FA extends $e{constructor(t,e={}){super(t),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},RA,e)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const{x:e,y:r}=(this.parent.parent||this.parent).toLocal(t.global,void 0,IA),o=this.parent.input.touches;if(o.length>=2){const a=o[0],u=o[1],c=a.last&&u.last?Math.sqrt(Math.pow(u.last.x-a.last.x,2)+Math.pow(u.last.y-a.last.y,2)):null;if(a.id===t.pointerId?a.last={x:e,y:r,data:t}:u.id===t.pointerId&&(u.last={x:e,y:r,data:t}),c){let d;const p=new At(a.last.x+(u.last.x-a.last.x)/2,a.last.y+(u.last.y-a.last.y)/2);this.options.center||(d=this.parent.toLocal(p,this.parent.parent||this.parent));let m=Math.sqrt(Math.pow(u.last.x-a.last.x,2)+Math.pow(u.last.y-a.last.y,2));m=m===0?m=1e-10:m;const y=(1-c/m)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=y),this.isAxisY()&&(this.parent.scale.y+=y),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:p});const w=this.parent.plugins.get("clamp-zoom",!0);if(w&&w.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const v=(this.parent.parent||this.parent).toLocal(d,this.parent);this.parent.x+=(p.x-v.x)*this.options.factor,this.parent.y+=(p.y-v.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(p.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(p.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=p,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const LA={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class OA extends $e{constructor(t,e,r,o={}){super(t),this.options=Object.assign({},LA,o),this.ease=Ca(o.ease,"easeInOutSine"),this.x=e,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const e=this.snapping;e.time+=t;let r,o,a;const u=this.startX,c=this.startY,d=this.deltaX,p=this.deltaY;if(e.time>this.options.time)r=!0,o=u+d,a=c+p;else{const m=this.ease(e.time,0,1,this.options.time);o=u+d*m,a=c+p*m}this.options.topLeft?this.parent.moveCorner(o,a):this.parent.moveCenter(o,a),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const e=this.options.topLeft?this.parent.corner:this.parent.center;(e.x!==this.x||e.y!==this.y)&&this.snapStart()}}}const BA={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class zA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},BA,e),this.ease=Ca(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,o=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:r-t,deltaY:o-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let e;if(!this.options.center&&!this.options.noMove&&(e=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=t,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const a=this.snapping,u=this.ease(a.time,a.startX,a.deltaX,this.options.time),c=this.ease(a.time,a.startY,a.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/u,this.parent.scale.y=this.parent.screenHeight/c}const o=this.parent.plugins.get("clamp-zoom",!0);o&&o.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}resume(){this.snapping=null,super.resume()}}const NA={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class DA extends $e{constructor(t,e={}){super(t),this.options=Object.assign({},NA,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){typeof window>"u"||(window.addEventListener("keydown",e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.parent||this.parent;a.toLocal(r,this.parent,r);const u=a.toLocal(t);this.parent.x+=u.x-r.x,this.parent.y+=u.y-r.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,typeof this.options.smooth=="number"&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),r=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,o=Math.pow(2,(1+this.options.percent)*r);let a;this.options.center||(a=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=o),this.isAxisY()&&(this.parent.scale.y*=o),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(a,this.parent,a);const d=c.toLocal(e);this.parent.x+=d.x-a.x,this.parent.y+=d.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),r=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,o=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const a={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+a.x)*o-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+a.y)*o-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let a;this.options.center||(a=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=o),this.isAxisY()&&(this.parent.scale.y*=o),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const u=this.parent.plugins.get("clamp-zoom",!0);if(u&&u.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const c=this.parent.parent||this.parent;c.toLocal(a,this.parent,a);const d=c.toLocal(e);this.parent.x+=d.x-a.x,this.parent.y+=d.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}const WA={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:fs.shared,allowPreserveDragOutside:!1};class Ay extends Nt{constructor(t){super(),this._disableOnContextMenu=e=>e.preventDefault(),this.options={...WA,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new fA(this),this.plugins=new pA(this)}destroy(t){var e;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((e=this.options.events.domElement)==null||e.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Ht(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=typeof window>"u"?0:window.innerWidth,e=typeof window>"u"?0:window.innerHeight,r,o){this.screenWidth=t,this.screenHeight=e,typeof r<"u"&&(this._worldWidth=r),typeof o<"u"&&(this._worldHeight=o),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new Ht(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return arguments.length===2?this.toLocal(new At(t,e)):this.toLocal(t)}toScreen(t,e){return arguments.length===2?this.toGlobal(new At(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new At(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,r;typeof t[0]=="number"?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y);const o=(this.worldScreenWidth/2-e)*this.scale.x,a=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==o||this.y!==a)&&(this.position.set(o,a),this.plugins.reset(),this.dirty=!0),this}get corner(){return new At(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,r;return t.length===1?(e=-t[0].x*this.scale.x,r=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,r=-t[1]*this.scale.y),(e!==this.x||r!==this.y)&&(this.position.set(e,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const r=this.screenWidth/t,o=this.screenHeight/e;return Math.min(r,o)}findCover(t,e){const r=this.screenWidth/t,o=this.screenHeight/e;return Math.max(r,o)}fitWidth(t=this.worldWidth,e,r=!0,o){let a;e&&(a=this.center),this.scale.x=this.screenWidth/t,r&&(this.scale.y=this.scale.x);const u=this.plugins.get("clamp-zoom",!0);return!o&&u&&u.clamp(),e&&a&&this.moveCenter(a),this}fitHeight(t=this.worldHeight,e,r=!0,o){let a;e&&(a=this.center),this.scale.y=this.screenHeight/t,r&&(this.scale.x=this.scale.y);const u=this.plugins.get("clamp-zoom",!0);return!o&&u&&u.clamp(),e&&a&&this.moveCenter(a),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,r=this.worldHeight){let o;t&&(o=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const a=this.plugins.get("clamp-zoom",!0);return a&&a.clamp(),t&&o&&this.moveCenter(o),this}setZoom(t,e){let r;e&&(r=this.center),this.scale.set(t);const o=this.plugins.get("clamp-zoom",!0);return o&&o.clamp(),e&&r&&this.moveCenter(r),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new zA(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new At(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new Ht(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new bA(this,t)),this}clamp(t){return this.plugins.add("clamp",new wA(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new AA(this,t)),this}bounce(t){return this.plugins.add("bounce",new xA(this,t)),this}pinch(t){return this.plugins.add("pinch",new FA(this,t)),this}snap(t,e,r){return this.plugins.add("snap",new OA(this,t,e,r)),this}follow(t,e){return this.plugins.add("follow",new EA(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new DA(this,t)),this}animate(t){return this.plugins.add("animate",new gA(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new SA(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new MA(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,r,o,a){a&&(r>this.worldScreenWidth||o>this.worldScreenHeight)&&(this.fit(!0,r,o),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let u=!1;t<this.left?(this.left=t,u=!0):t+r>this.right&&(this.right=t+r,u=!0),e<this.top?(this.top=e,u=!0):e+o>this.bottom&&(this.bottom=e+o,u=!0),u&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const ky=1e3,by=1e3,Cm=ky+200,Am=by+150,Py=1e3,Ey=1e3,km=Py+200,bm=Ey+150;class UA extends Nt{constructor(){super(...arguments);Z(this,"viewport");Z(this,"activeContainer",new Nt)}init(e){this.viewport=new Ay({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:Cm,worldHeight:Am,events:e.renderer.events}),this.viewport.on("drag-start",()=>{this.viewport.interactiveChildren=!1}),this.viewport.on("drag-end",()=>{this.viewport.interactiveChildren=!0}),this.viewport.moveCenter(this.viewport.worldWidth/2,this.viewport.worldHeight/2),this.viewport.drag().clamp({direction:"all"}),this.viewport.addChild(new Rn().rect(0,0,Cm,Am).fill({color:"rgba(149, 138, 122)"})),this.activeContainer.addChild(new Rn().rect(0,0,ky,by).fill({color:"rgba(197, 187, 164)"})),this.updateActiveContainerPositio(),this.viewport.addChild(this.activeContainer),this.addChild(this.viewport)}updateActiveContainerPositio(){this.activeContainer.position.set(this.viewport.width/2-this.activeContainer.width/2,this.viewport.height/2-this.activeContainer.height/2)}addContainer(e){this.activeContainer.addChild(e),this.updateActiveContainerPositio()}update(){}}class HA extends Nt{constructor(){super(...arguments);Z(this,"viewport");Z(this,"activeContainer",new Nt)}init(e){this.viewport=new Ay({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:km,worldHeight:bm,events:e.renderer.events}),this.viewport.on("drag-start",()=>{this.viewport.interactiveChildren=!1}),this.viewport.on("drag-end",()=>{this.viewport.interactiveChildren=!0}),this.viewport.moveCenter(this.viewport.worldWidth/2,this.viewport.worldHeight/2),this.viewport.drag().clamp({direction:"all"}),this.viewport.addChild(new Rn().rect(0,0,km,bm).fill({color:"rgba(149, 138, 122)"})),this.activeContainer.addChild(new Rn().rect(0,0,Py,Ey).fill({color:"rgba(197, 187, 164)"})),this.updateActiveContainerPositio(),this.viewport.addChild(this.activeContainer),this.addChild(this.viewport)}updateActiveContainerPositio(){this.activeContainer.position.set(this.viewport.width/2-this.activeContainer.width/2,this.viewport.height/2-this.activeContainer.height/2)}addContainer(e){this.activeContainer.addChild(e),this.updateActiveContainerPositio()}update(){}}class jA extends Nt{init(){this.addChild(new Rn().rect(0,0,430,932).fill({color:"#2f4a6a"}))}addContainer(t){this.addChild(t)}update(){}}class gn{constructor(){Z(this,"game");Z(this,"map");Z(this,"possession");Z(this,"td");Z(this,"currentScreen");Z(this,"systems");Z(this,"signals",{onToggleScreen:new wi.Signal});this.map=new UA,this.possession=new HA,this.td=new jA,this.currentScreen=this.map,this.signals.onToggleScreen.connect(t=>{this.currentScreen.removeFromParent(),this.currentScreen=this[t],this.game.app.stage.addChild(this.currentScreen)})}addContainer(t,e){this[e].addContainer(t)}init(){this.map.init(this.game.app),this.possession.init(this.game.app),this.td.init(),this.game.app.stage.addChild(this.currentScreen)}update(){this.currentScreen.update()}}Z(gn,"SYSTEM_ID","screens");class GA{constructor(){Z(this,"time",0);Z(this,"duration",0);Z(this,"paused",!1);Z(this,"running",!1)}reset(){this.time=0,this.duration=0,this.running=!1,this.paused=!1}setup(t){this.reset(),this.duration=Math.floor(t)}start(){this.running=!0,this.paused=!1,this.time=0}stop(){this.running=!1,this.paused=!1,this.time=this.duration}pause(){this.paused=!0}resume(){this.paused=!1}update(t){!this.running||this.paused||(this.time+=t,this.time>=this.duration&&this.stop())}get isPaused(){return this.paused}get isRunning(){return this.running}get currentTime(){return this.time}get getTimeRemaining(){return this.duration-this.time}}class tr{constructor(){Z(this,"nextId",0);Z(this,"game");Z(this,"timers",[]);Z(this,"signals",{onObserveTimer:new wi.Signal})}addTimer(t){this.nextId++;const e=new GA;return e.setup(t),e.start(),this.timers.push({timer:e,timerId:this.nextId}),this.nextId}getTimerById(t){return this.timers.find(e=>e.timerId===t)}update(){this.timers.forEach(t=>{t.timer.update(this.game.app.ticker.deltaMS),t.timer.isRunning||KC(this.timers,t)})}}Z(tr,"SYSTEM_ID","timers");class Gh{constructor(){Z(this,"timerId",0);Z(this,"game");Z(this,"castle")}init(){this.castle=new nA({game:this.game}),this.game.systems.get(gn).addContainer(this.castle,"possession"),this.castle.init(),this.timerId=this.game.systems.get(tr).addTimer(1e4);const t=this.game.systems.get(tr).getTimerById(this.timerId);t==null||t.timer.start()}timerUpdate(){if(this.timerId){const t=this.game.systems.get(tr).getTimerById(this.timerId);t?this.castle.updateText(String(Math.floor(t.timer.getTimeRemaining/1e3)%60)):this.timerId=0}}update(){this.timerUpdate(),this.castle.update()}}Z(Gh,"SYSTEM_ID","castle");class Ty{constructor(){Z(this,"castleTimerId",0);Z(this,"game");Z(this,"city")}init(){this.city=new uA({game:this.game}),console.log("this.city",this.city),this.game.systems.get(gn).addContainer(this.city,"map"),this.city.init()}timerUpdate(){const t=this.game.systems.get(Gh).timerId;if(t){const e=this.game.systems.get(tr).getTimerById(t);e&&this.city.updateText(String(Math.floor(e.timer.getTimeRemaining/1e3)%60))}}update(){this.timerUpdate(),this.city.update()}}Z(Ty,"SYSTEM_ID","city");class Pm extends Sa{constructor({game:e,position:{x:r,y:o},gap:a,data:u}){super({game:e});Z(this,"id");Z(this,"size",0);Z(this,"graphics");Z(this,"isPlanted",!1);Z(this,"isReady",!1);Z(this,"plantedAt");this.id=u.id,this.isPlanted=u.isPlanted,this.isReady=u.isReady,this.size=50,this.position.set(r*this.size+a*r,Math.floor(o)*this.size+a*Math.floor(o))}init(){const e=this.isPlanted?this.isReady?"blue":vs.odd:vs.main;this.graphics=new Rn().rect(0,0,this.size,this.size).fill({color:e}),this.graphics.eventMode="static",this.graphics.cursor="pointer",this.graphics.on("pointerup",()=>{(!this.isPlanted||this.isReady)&&(this.graphics.clear(),this.graphics.rect(0,0,this.size,this.size).fill({color:vs.primary}),this.game.systems.get(As).signals.onTileClick.emit(this.id))}),this.addChild(this.graphics)}update(){}}class As{constructor(){Z(this,"game");Z(this,"farm");Z(this,"tilesIds",[]);Z(this,"signals",{onTileClick:new wi.Signal,onUpdateFarm:new wi.Signal,onInitFarm:new wi.Signal});Z(this,"handleTileClick",QC(t=>{this.tilesIds=[],this.game.mediator.updateFarmFx(t)},3e3));this.signals.onTileClick.connect(t=>{this.tilesIds.includes(t)||this.tilesIds.push(t),this.handleTileClick(this.tilesIds)}),this.signals.onInitFarm.connect(()=>{this.initFarm()}),this.signals.onUpdateFarm.connect(()=>{this.updateFarm()})}init(){this.game.mediator.initFarmFx(),this.farm=new rA({game:this.game}),this.game.systems.get(gn).addContainer(this.farm,"possession"),this.farm.init()}updateFarm(){const t=Mn.farm.data;for(const e of this.farm.children)if(e instanceof Pm){const r=t.find(o=>o.id===e.id);if(r){e.isPlanted=r.isPlanted,e.isReady=r.isReady;const o=r.isPlanted?r.isReady?"blue":vs.odd:vs.main;e.graphics.clear(),e.graphics.rect(r.x,r.y,e.size,e.size).fill({color:o})}}}initFarm(){const t=Mn.farm.data;console.log("state.farm.data",t);for(let e=0;e<t.length;e++){const r=new Pm({game:this.game,position:new qC(e%3,e/3),gap:this.farm.gap,data:t[e]});this.farm.addChild(r),r.init()}}update(){this.farm.update()}}Z(As,"SYSTEM_ID","farm");class My{constructor(){Z(this,"game");Z(this,"sawmill")}init(){this.sawmill=new oA({game:this.game}),console.log(this.sawmill),this.game.systems.get(gn).addContainer(this.sawmill,"possession"),this.sawmill.init()}update(){this.sawmill.update()}}Z(My,"SYSTEM_ID","sawmill");class VA{constructor(){Z(this,"game");Z(this,"innerUserData","");Z(this,"user",{gold:0});Z(this,"farmData")}init(t){this.game=t}set initFarm(t){this.farmData=t,this.game.systems.get(As).signals.onInitFarm.emit()}set updateFarm(t){this.farmData.data=t,this.game.systems.get(As).signals.onUpdateFarm.emit()}get farm(){return this.farmData}set updateInnerUserData(t){this.innerUserData=t}get getInnerUserData(){return this.innerUserData}set updateUserGold(t){this.user.gold=t}get getUserGold(){return this.user.gold}}const Mn=new VA;class $A{constructor(t){Z(this,"game");this.game=t,this.game.setMediator(this)}async initFarmFx(){return await JC().then(t=>{Mn.initFarm=t})}async updateFarmFx(t){return await tA(t).then(e=>{e&&(Mn.updateFarm=e.data,Mn.updateUserGold=e.gold,this.game.signals.onGoldUpdate.emit(e.gold))})}}class YA{constructor(t){Z(this,"_game");Z(this,"allSystems",new Map);this._game=t}add(t){const e=t.SYSTEM_ID;if(!e)throw new Error("[SystemManager]: cannot add System without name");if(this.allSystems.has(e))return this.allSystems.get(e);const r=new t;return r.game=this._game,this.allSystems.set(t.SYSTEM_ID,r),r}get(t){return this.allSystems.get(t.SYSTEM_ID)}init(){this.allSystems.forEach(t=>{var e;return(e=t.init)==null?void 0:e.call(t)})}update(){this.allSystems.forEach(t=>{var e;return(e=t.update)==null?void 0:e.call(t)})}}const XA=()=>Promise.resolve([{id:"1",name:"",alias:"gold",quantityPerSecond:100}]);class Ry{constructor(){Z(this,"game");Z(this,"resources",[])}async getAllResources(){await XA().then(t=>{this.resources=t})}init(){this.getAllResources(),console.log("ResourcesSystem",this.resources)}}Z(Ry,"SYSTEM_ID","resources");class qA extends Nt{constructor(){super();Z(this,"app");Z(this,"systems");Z(this,"mediator");Z(this,"isStarted",!1);Z(this,"signals",{onGoldUpdate:new wi.Signal,onGameStarted:new wi.Signal});this.app=new vg,this.systems=new YA(this),new $A(this)}async initAssets(){await pn.init({manifest:"/game-manifest.json",basePath:"assets"});const e=await pn.loadBundle("backgrounds");xn.from(e.map)}async init(){var e;return await this.app.init({background:"#403d39",resizeTo:window,roundPixels:!1,resolution:1,preference:"webgl"}),console.log("app",this.app),(e=document.getElementById("game-canvas"))==null||e.appendChild(this.app.canvas),await this.initAssets(),Mn.init(this),this.systems.add(gn),this.systems.add(tr),this.systems.add(Ty),this.systems.add(As),this.systems.add(Gh),this.systems.add(My),this.systems.add(Ry),this.systems.init(),this.isStarted=!0,this.signals.onGameStarted.emit(!0),this.app.ticker.add(()=>{this.isStarted&&this.systems.update()}),this}setMediator(e){this.mediator=e}}const KA=()=>Ft.jsx("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-icon":"home",children:Ft.jsx("path",{d:"M12 3 6 7.58V6H4v3.11L1 11.4l1.21 1.59L4 11.62V21h7v-6h2v6h7v-9.38l1.79 1.36L23 11.4zm-2-2c0 1.66-1.34 3-3 3-.55 0-1 .45-1 1H4c0-1.66 1.34-3 3-3 .55 0 1-.45 1-1z"})}),QA=()=>Ft.jsx("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-icon":"map",fill:"currentColor",children:Ft.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})}),ZA=()=>Ft.jsx("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24","data-icon":"PublicOff",children:Ft.jsx("path",{d:"M11 8.17 6.49 3.66C8.07 2.61 9.96 2 12 2c5.52 0 10 4.48 10 10 0 2.04-.61 3.93-1.66 5.51l-1.46-1.46C19.59 14.87 20 13.48 20 12c0-3.35-2.07-6.22-5-7.41V5c0 1.1-.9 2-2 2h-2zm10.19 13.02-1.41 1.41-2.27-2.27C15.93 21.39 14.04 22 12 22 6.48 22 2 17.52 2 12c0-2.04.61-3.93 1.66-5.51L1.39 4.22 2.8 2.81zM11 18c-1.1 0-2-.9-2-2v-1l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.08 3.05 7.44 7 7.93z"})}),JA=()=>{const i=mn.useContext(Vh),[t,e]=mn.useState(0),r=()=>{i.systems.get(gn).signals.onToggleScreen.emit("map")},o=()=>{i.systems.get(gn).signals.onToggleScreen.emit("possession")},a=()=>{i.systems.get(gn).signals.onToggleScreen.emit("td")};return mn.useEffect(()=>{i.signals.onGoldUpdate.connect(u=>{e(u)})},[]),Ft.jsxs(Ft.Fragment,{children:[Ft.jsx("div",{className:"absolute top-0 left-0 w-full bg-slate-400 p-2",children:Ft.jsxs("div",{className:"text-3xl",children:[t||Mn.getUserGold," "]})}),Ft.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-slate-400 p-2 flex justify-between",children:[Ft.jsx("button",{onClick:r,className:"text-2xl size-14",children:Ft.jsx(QA,{})}),Ft.jsx("button",{onClick:o,className:"text-2xl size-14",children:Ft.jsx(KA,{})}),Ft.jsx("button",{onClick:a,className:"text-2xl size-14",children:Ft.jsx(ZA,{})})]})]})},tk=()=>(console.log("LoadingScreen..."),Ft.jsxs("div",{className:"w-svw h-svh flex items-center justify-center flex-col",children:[Ft.jsx("div",{className:"text-5xl",children:" "}),Ft.jsx("div",{children:"..."})]})),ek=(i,t)=>{const[e,r]=mn.useState(!1);return mn.useEffect(()=>{!i.isStarted&&t&&(console.log("gameinit"),i.init()),i.signals.onGameStarted.connect(o=>{r(o)})},[t]),{isGameStarted:e}},nk=async()=>{try{const{data:i}=await _a.post("/auth/register");return i}catch(i){console.log(i)}},ik=i=>{const t=i==null?void 0:i.initData,[e,r]=mn.useState(null);return GC("innerData",t,365),mn.useEffect(()=>{i&&i.disableVerticalSwipes()},[]),mn.useEffect(()=>{console.log(!e,t),!e&&t&&nk().then(o=>{o&&(Mn.updateInnerUserData=t,Mn.updateUserGold=o==null?void 0:o.gold,r(o))})},[]),{tgUser:e}};var Em;const rk=(Em=window==null?void 0:window.Telegram)==null?void 0:Em.WebApp,sk=()=>{const i=mn.useContext(Vh),{tgUser:t}=ik(rk),{isGameStarted:e}=ek(i,t);return console.log("tgUser",t),console.log("isGameStarted",e),Ft.jsxs("div",{children:[!t&&!e&&Ft.jsx(tk,{}),t&&e&&Ft.jsx(JA,{}),Ft.jsx("div",{id:"game-canvas",className:"h-dvh w-screen flex items-center justify-center fixed top-0 left-0 -z-10"})]})},Iy=new qA,Vh=mn.createContext(Iy),ok=()=>Ft.jsx(Vh.Provider,{value:Iy,children:Ft.jsx(sk,{})}),ak=Dx.createRoot(document.getElementById("root"));ak.render(Ft.jsx(ok,{}));export{gg as $,mg as A,Te as B,Nt as C,Vt as D,ct as E,Mv as F,da as G,yn as H,op as I,xn as J,t1 as K,u1 as L,Tt as M,ee as N,Ht as O,At as P,f1 as Q,ah as R,M1 as S,fs as T,ih as U,lp as V,hp as W,Fv as X,Tu as Y,Qt as Z,Um as _,nn as a,Et as a0,It as a1,x1 as a2,B1 as a3,ew as a4,iw as a5,lw as a6,hw as a7,cw as a8,nr as a9,rr as aa,t_ as ab,Ig as ac,_p as ad,vp as ae,ev as af,Vp as ag,o_ as ah,Rn as ai,Gt as aj,iv as ak,gh as al,mh as am,jp as an,sa as ao,Og as ap,_s as b,Jo as c,Th as d,ve as e,wp as f,P1 as g,dg as h,Qm as i,vn as j,cg as k,Hp as l,tw as m,nw as n,ow as o,Sg as p,uw as q,gv as r,Mh as s,bt as t,ag as u,nv as v,Zt as w,fw as x,Tn as y,Nm as z};
